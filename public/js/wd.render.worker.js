!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.wdrd=t():n.wdrd=t()}(self,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)r.d(e,i,function(t){return n[t]}.bind(null,i));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=11)}([function(n,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"c",function(){return i}),r.d(t,"b",function(){return o});var e=r(2);function i(n,t,r){for(var e=new Array(r),i=0,o=t;i<r;)e[i]=n[o],i=i+1|0,o=o+1|0;return e}function o(n,t){if(t<0||t>=n.length)throw[e.e,"index out of bounds"];return n[t]}function u(n){return n.slice(0)}},function(n,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"f",function(){return u}),r.d(t,"b",function(){return a}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return f});var e=r(0);function i(n,t){for(;;){var r=t,o=n,u=o.length,a=u-r.length|0;if(0===a)return o.apply(null,r);if(!(a<0))return function(n,t){return function(r){return i(n,t.concat([r]))}}(o,r);t=e.c(r,u,0|-a),n=o.apply(null,e.c(r,0,u))}}function o(n,t){var r=n.length;return 1===r?n(t):function(n,t,r){switch(r){case 1:return n(t);case 2:return function(r){return n(t,r)};case 3:return function(r,e){return n(t,r,e)};case 4:return function(r,e,i){return n(t,r,e,i)};case 5:return function(r,e,i,o){return n(t,r,e,i,o)};case 6:return function(r,e,i,o,u){return n(t,r,e,i,o,u)};case 7:return function(r,e,i,o,u,a){return n(t,r,e,i,o,u,a)};default:return i(n,[t])}}(n,t,r)}function u(n){return 1===n.length?n:function(t){return o(n,t)}}function a(n,t,r){var e=n.length;return 2===e?n(t,r):function(n,t,r,e){switch(e){case 1:return i(n(t),[r]);case 2:return n(t,r);case 3:return function(e){return n(t,r,e)};case 4:return function(e,i){return n(t,r,e,i)};case 5:return function(e,i,o){return n(t,r,e,i,o)};case 6:return function(e,i,o,u){return n(t,r,e,i,o,u)};case 7:return function(e,i,o,u,a){return n(t,r,e,i,o,u,a)};default:return i(n,[t,r])}}(n,t,r,e)}function c(n,t,r,e){var o=n.length;return 3===o?n(t,r,e):function(n,t,r,e,o){switch(o){case 1:return i(n(t),[r,e]);case 2:return i(n(t,r),[e]);case 3:return n(t,r,e);case 4:return function(i){return n(t,r,e,i)};case 5:return function(i,o){return n(t,r,e,i,o)};case 6:return function(i,o,u){return n(t,r,e,i,o,u)};case 7:return function(i,o,u,a){return n(t,r,e,i,o,u,a)};default:return i(n,[t,r,e])}}(n,t,r,e,o)}function s(n,t,r,e,o){var u=n.length;return 4===u?n(t,r,e,o):function(n,t,r,e,o,u){switch(u){case 1:return i(n(t),[r,e,o]);case 2:return i(n(t,r),[e,o]);case 3:return i(n(t,r,e),[o]);case 4:return n(t,r,e,o);case 5:return function(i){return n(t,r,e,o,i)};case 6:return function(i,u){return n(t,r,e,o,i,u)};case 7:return function(i,u,a){return n(t,r,e,o,i,u,a)};default:return i(n,[t,r,e,o])}}(n,t,r,e,o,u)}function f(n,t,r,e,o,u){var a=n.length;return 5===a?n(t,r,e,o,u):function(n,t,r,e,o,u,a){switch(a){case 1:return i(n(t),[r,e,o,u]);case 2:return i(n(t,r),[e,o,u]);case 3:return i(n(t,r,e),[o,u]);case 4:return i(n(t,r,e,o),[u]);case 5:return n(t,r,e,o,u);case 6:return function(i){return n(t,r,e,o,u,i)};case 7:return function(i,a){return n(t,r,e,o,u,i,a)};default:return i(n,[t,r,e,o,u])}}(n,t,r,e,o,u,a)}},function(n,t,r){"use strict";r.d(t,"d",function(){return e}),r.d(t,"e",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return u}),r.d(t,"g",function(){return a}),r.d(t,"f",function(){return c}),r.d(t,"a",function(){return s});var e=["Failure",-2],i=["Invalid_argument",-3],o=["End_of_file",-4],u=["Division_by_zero",-5],a=["Not_found",-6],c=["Match_failure",-7],s=["Assert_failure",-10];e.tag=248,i.tag=248,o.tag=248,u.tag=248,a.tag=248,c.tag=248,s.tag=248},function(n,t,r){"use strict";(function(n){r.d(t,"f",function(){return f}),r.d(t,"g",function(){return i}),r.d(t,"e",function(){return o}),r.d(t,"a",function(){return u}),r.d(t,"c",function(){return a}),r.d(t,"d",function(){return c}),r.d(t,"b",function(){return s});var e=r(1),i=["",function(t,r){var e=r.length-1|0;return void 0!==n&&n.stdout&&n.stdout.write?n.stdout.write(r):"\n"===r[e]?(console.log(r.slice(0,e)),0):(console.log(r),0)}],o=["",function(n,t){var r=t.length-1|0;return"\n"===t[r]?(console.log(t.slice(0,r)),0):(console.log(t),0)}];function u(n){return""!==n[0]?(e.b(n[1],n,n[0]),n[0]="",0):0}function a(t,r,e,o){var a=0===e&&o===r.length?r:r.slice(e,o);if(void 0!==n&&n.stdout&&n.stdout.write&&t===i)return n.stdout.write(a);var c=a.lastIndexOf("\n");return c<0?(t[0]=t[0]+a,0):(t[0]=t[0]+a.slice(0,c+1|0),u(t),t[0]=t[0]+a.slice(c+1|0),0)}function c(n,t){return a(n,String.fromCharCode(t),0,1)}function s(n){return[i,[o,0]]}var f=void 0}).call(this,r(6))},function(module,__webpack_exports__,__webpack_require__){"use strict";function serializeFunction(n){return n.toString()}function deserializeFunction(funcStr){return eval("("+funcStr+")")}function serializeValueWithFunction(n){return JSON.stringify(n,function(n,t){return"function"==typeof t?t.toString():t})}function deserializeValueWithFunction(value){return JSON.parse(value,(key,value)=>"string"!=typeof value?value:"function"==value.substring(0,8)?eval("("+value+")"):value)}__webpack_require__.d(__webpack_exports__,"c",function(){return serializeFunction}),__webpack_require__.d(__webpack_exports__,"a",function(){return deserializeFunction}),__webpack_require__.d(__webpack_exports__,"d",function(){return serializeValueWithFunction}),__webpack_require__.d(__webpack_exports__,"b",function(){return deserializeValueWithFunction})},function(n,t,r){"use strict";(function(n,e){var i,o=r(7);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:e;var u=Object(o.a)(i);t.a=u}).call(this,r(9),r(10)(n))},function(n,t){var r,e,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(n){if(r===setTimeout)return setTimeout(n,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(n){r=o}try{e="function"==typeof clearTimeout?clearTimeout:u}catch(n){e=u}}();var c,s=[],f=!1,h=-1;function v(){f&&c&&(f=!1,c.length?s=c.concat(s):h=-1,s.length&&l())}function l(){if(!f){var n=a(v);f=!0;for(var t=s.length;t;){for(c=s,s=[];++h<t;)c&&c[h].run();h=-1,t=s.length}c=null,f=!1,function(n){if(e===clearTimeout)return clearTimeout(n);if((e===u||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(n);try{e(n)}catch(t){try{return e.call(null,n)}catch(t){return e.call(this,n)}}}(n)}}function p(n,t){this.fun=n,this.array=t}function d(){}i.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new p(n,t)),1!==s.length||f||a(l)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,t,r){"use strict";function e(n){var t,r=n.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",function(){return e})},function(n,t,r){"use strict";(function(n){r.d(t,"a",function(){return e});r(2);function e(t){return void 0!==n?n.exit(t):0}}).call(this,r(6))},function(n,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}n.exports=r},function(n,t){n.exports=function(n){if(!n.webpackPolyfill){var t=Object.create(n);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(n,t,r){"use strict";r.r(t);var e=r(1);
/** @license MIT License (c) copyright 2010-2016 original author or authors */function i(n){this.source=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function o(n,t){var r=t.length,e=new Array(r+1);e[0]=n;for(var i=0;i<r;++i)e[i+1]=t[i];return e}function u(n,t){if(n<0)throw new TypeError("n must be >= 0");var r=t.length;return 0===n||0===r?t:n>=r?[]:function(n,t,r){for(var e=new Array(r),i=0;i<r;++i)e[i]=t[n+i];return e}(n,t,r-n)}function a(n){return u(1,n)}function c(n,t){for(var r=t.length,e=new Array(r),i=0;i<r;++i)e[i]=n(t[i]);return e}function s(n,t,r){if(t<0)throw new TypeError("i must be >= 0");for(var e=r.length,i=new Array(e),o=0;o<e;++o)i[o]=t===o?n:r[o];return i}function f(n,t){if(n<0)throw new TypeError("i must be >= 0");var r=t.length;return 0===r||n>=r?t:1===r?[]:function(n,t,r){var e=new Array(r),i=void 0;for(i=0;i<n;++i)e[i]=t[i];for(i=n;i<r;++i)e[i]=t[i+1];return e}(n,t,r-1)}function h(n,t){for(var r=0,e=t.length;r<e;++r)if(n===t[r])return r;return-1}i.prototype.run=function(n,t){return this.source.run(n,t)};
/** @license MIT License (c) copyright 2010-2016 original author or authors */
var v=function(n){return n},l=function(n,t){return n(t)};
/** @license MIT License (c) copyright 2016 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function p(n,t){this._dispose=n,this._data=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function d(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var n=this;this.result=new Promise(function(t){n._resolve=t})}p.prototype.dispose=function(){return this._dispose(this._data)},d.prototype.setDisposable=function(n){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=n,this.disposed&&this._resolve(n.dispose())},d.prototype.dispose=function(){return this.disposed?this.result:(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose()),this.result)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;
/** @license MIT License (c) copyright 2010-2016 original author or authors */
var _=c,g=v;function y(n,t,r){var e,i=T(t);return null!==(e=i)&&"object"==typeof e&&"function"==typeof e.then?i.catch(function(t){r.error(n,t)}):i}function m(n,t){return x(new p(n,t))}function E(){return new p(g,void 0)}function w(n){return m(b,n)}function b(n){return Promise.all(_(T,n))}function T(n){try{return n.dispose()}catch(n){return Promise.reject(n)}}function A(){return new d}function x(n){return new p(S,function(n){return{disposed:!1,disposable:n,value:void 0}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(n))}function S(n){return n.disposed||(n.disposed=!0,n.value=T(n.disposable),n.disposable=void 0),n.value}function D(n){setTimeout(function(){throw n},0)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function L(n,t,r){this._run=n,this.value=t,this.sink=r,this.active=!0}function R(n,t,r){r.error(n,t)}function P(n,t,r){r.event(n,t)}function k(n,t,r){r.end(n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function M(n){return new i(new N(n))}function N(n){this.value=n}function I(n,t,r){r.event(n,t),r.end(n,void 0)}function U(){return F}function C(){}function B(n){return n.dispose()}L.event=function(n,t){return new L(P,n,t)},L.end=function(n,t){return new L(k,n,t)},L.error=function(n,t){return new L(R,n,t)},L.prototype.dispose=function(){this.active=!1},L.prototype.run=function(n){this.active&&this._run(n,this.value,this.sink)},L.prototype.error=function(n,t){if(!this.active)return D(t);this.sink.error(n,t)},N.prototype.run=function(n,t){return t.asap(new L(I,this.value,n))},C.prototype.run=function(n,t){var r=L.end(void 0,n);return t.asap(r),m(B,r)};var F=new i(new C);function O(){}O.prototype.run=function(){return E()};var Y;
/** @license MIT License (c) copyright 2010-2016 original author or authors */new i(new O);function G(n){this.array=n}function H(n,t,r){for(var e=0,i=t.length;e<i&&this.active;++e)r.event(n,t[e]);this.active&&r.end(n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function W(n){this.iterable=n}function V(n,t,r){for(var e=t.next();!e.done&&this.active;)r.event(n,e.value),e=t.next();r.end(n,e.value)}G.prototype.run=function(n,t){return t.asap(new L(H,this.array,n))},Y="function"==typeof Set&&"function"==typeof(new Set)["@@iterator"]?"@@iterator":"function"==typeof Symbol?Symbol.iterator:"_es6shim_iterator_",W.prototype.run=function(n,t){return t.asap(new L(V,this.iterable[Y](),n))};var j=r(5);
/** @license MIT License (c) copyright 2010-2016 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function X(n,t,r){try{r.event(n,t)}catch(t){r.error(n,t)}}function z(n,t,r){try{r.end(n,t)}catch(t){r.error(n,t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function q(n){this.observable=n}function J(n,t){this.sink=n,this.scheduler=t}function $(n){return n.unsubscribe()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function K(n){if(n instanceof i)return n;var t,r=function(n){var t=null;if(n){var r=n[j.a];if("function"==typeof r&&(!(t=r.call(n))||"function"!=typeof t.subscribe))throw new TypeError("invalid observable "+t)}return t}(n);if(null!=r)return function(n){return new i(new q(n))}(r);if(Array.isArray(n)||null!=(t=n)&&"number"==typeof t.length&&"function"!=typeof t)return function(n){return new i(new G(n))}(n);if("function"==typeof n[Y])return new i(new W(n));throw new TypeError("from(x) must be observable, iterable, or array-like: "+n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Z(n,t){this.period=n,this.value=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Q(n,t,r,e){this.time=n,this.period=t,this.task=r,this.scheduler=e,this.active=!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function nn(n){return Promise.resolve(n).then(tn)}function tn(n){try{return n.run()}catch(t){return n.error(t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function rn(n,t){this.timer=n,this.timeline=t,this._timer=null,this._nextArrival=1/0;var r=this;this._runReadyTasksBound=function(){r._runReadyTasks(r.now())}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function en(){}function on(n){this.f=n,this.active=!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function un(){this.tasks=[]}function an(n,t,r){for(var e=t.events,i=0;i<e.length;++i){var o=e[i];o.active&&(n(o),o.period>=0&&o.active&&(o.time=o.time+o.period,cn(o,r)))}return r}function cn(n,t){var r=t.length;if(0!==r){var e=fn(n.time,t);e>=r?t.push(hn(n.time,[n])):n.time===t[e].time?t[e].events.push(n):t.splice(e,0,hn(n.time,[n]))}else t.push(hn(n.time,[n]))}function sn(n,t){t.events=function(n,t){for(var r,e=t.length,i=new Array(e),o=0,u=0;u<e;++u)n(r=t[u])||(i[o]=r,++o);return i.length=o,i}(n,t.events)}function fn(n,t){for(var r,e,i=0,o=t.length;i<o;){if(n===(e=t[r=Math.floor((i+o)/2)]).time)return r;n<e.time?o=r:i=r+1}return o}function hn(n,t){return{time:n,events:t}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */q.prototype.run=function(n,t){var r=this.observable.subscribe(new J(n,t));if("function"==typeof r)return m(r);if(r&&"function"==typeof r.unsubscribe)return m($,r);throw new TypeError("Observable returned invalid subscription "+String(r))},J.prototype.next=function(n){X(this.scheduler.now(),n,this.sink)},J.prototype.complete=function(n){z(this.scheduler.now(),n,this.sink)},J.prototype.error=function(n){this.sink.error(this.scheduler.now(),n)},Z.prototype.run=function(n,t){return t.periodic(this.period,L.event(this.value,n))},Q.prototype.run=function(){return this.task.run(this.time)},Q.prototype.error=function(n){return this.task.error(this.time,n)},Q.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()},rn.prototype.now=function(){return this.timer.now()},rn.prototype.asap=function(n){return this.schedule(0,-1,n)},rn.prototype.delay=function(n,t){return this.schedule(n,-1,t)},rn.prototype.periodic=function(n,t){return this.schedule(0,n,t)},rn.prototype.schedule=function(n,t,r){var e=this.now(),i=new Q(e+Math.max(0,n),t,r,this);return this.timeline.add(i),this._scheduleNextRun(e),i},rn.prototype.cancel=function(n){n.active=!1,this.timeline.remove(n)&&this._reschedule()},rn.prototype.cancelAll=function(n){this.timeline.removeAll(n),this._reschedule()},rn.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},rn.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},rn.prototype._scheduleNextRun=function(n){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t,n):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t,n))}},rn.prototype._scheduleNextArrival=function(n,t){this._nextArrival=n;var r=Math.max(0,n-t);this._timer=this.timer.setTimer(this._runReadyTasksBound,r)},rn.prototype._runReadyTasks=function(n){this._timer=null,this.timeline.runTasks(n,tn),this._scheduleNextRun(this.now())},en.prototype.now=Date.now,en.prototype.setTimer=function(n,t){return t<=0?function(n){var t=new on(n);return nn(t),t}(n):setTimeout(n,t)},en.prototype.clearTimer=function(n){return n instanceof on?n.cancel():clearTimeout(n)},on.prototype.run=function(){return this.active&&this.f()},on.prototype.error=function(n){throw n},on.prototype.cancel=function(){this.active=!1},un.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},un.prototype.isEmpty=function(){return 0===this.tasks.length},un.prototype.add=function(n){cn(n,this.tasks)},un.prototype.remove=function(n){var t=fn(n.time,this.tasks);if(t>=0&&t<this.tasks.length){var r=h(n,this.tasks[t].events);if(r>=0)return this.tasks[t].events.splice(r,1),!0}return!1},un.prototype.removeAll=function(n){for(var t=0,r=this.tasks.length;t<r;++t)sn(n,this.tasks[t])},un.prototype.runTasks=function(n,t){for(var r=this.tasks,e=r.length,i=0;i<e&&r[i].time<=n;)++i;this.tasks=r.slice(i);for(var o=0;o<i;++o)this.tasks=an(t,r[o],this.tasks)};var vn=new rn(new en,new un);function ln(n,t,r){this.fatalError=n,this.subscriber=t,this.disposable=r}function pn(n){this.disposable=n}function dn(n,t,r){if("function"==typeof t.error)try{t.error(n)}catch(n){r(n)}else r(n)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function _n(n,t,r){this.event=n,this.source=t,this.capture=r}function gn(n){var t=n.target;t.source.removeEventListener(t.event,n.addEvent,t.capture)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function yn(n){this.sink=n,this.events=[],this.active=!0}function mn(n,t,r){this.sink=n,this.events=r,this.time=t}function En(n,t,r){this.time=n,this.value=t,this.sink=r}function wn(n,t,r){this.time=n,this.value=t,this.sink=r}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function bn(n,t){this.event=n,this.source=t}function Tn(n){var t=n.target;t.source.removeListener(t.event,n.addEvent)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function An(n,t,r){var e;if("function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener)arguments.length<3&&(r=!1),e=new _n(n,t,r);else{if("function"!=typeof t.addListener||"function"!=typeof t.removeListener)throw new Error("source must support addEventListener/removeEventListener or addListener/removeListener");e=new bn(n,t)}return new i(e)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function xn(n){return function(n,t){return new Promise(function(r,e){!function(n,t,r,e){var i=A(),o=new Sn(r,e,i);i.setDisposable(n.run(o,t))}(n,t,r,e)})}(n,vn)}function Sn(n,t,r){this._end=n,this._error=t,this._disposable=r,this.active=!0}function Dn(n,t,r,e){Promise.resolve(r.dispose()).then(function(){n(e)},t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Ln(n){this.sink=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Rn(n,t){this.p=n,this.source=t}function Pn(n,t){this.p=n,this.sink=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function kn(n,t,r){this.p=n,this.f=t,this.source=r}function Mn(n,t,r){this.p=n,this.f=t,this.sink=r}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Nn(n,t){this.f=n,this.source=t}function In(n,t){this.f=n,this.sink=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Un(n,t){return new i(Nn.create(n,t.source))}function Cn(n,t){return new i(new Bn(n,t.source))}function Bn(n,t){this.source=t,this.f=n}function Fn(n,t){this.sink=t,this.f=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function On(n,t){return Yn(Cn(n,t))}function Yn(n){return xn(n.source)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Gn(n,t,r){this.step=n,this.seed=t,this.source=r}function Hn(n,t,r){this.step=n,this.seed=t,this.sink=r}function Wn(n,t,r){this.source=r,this.f=n,this.value=t}function Vn(n,t,r){this.f=n,this.value=t,this.sink=r}function jn(n,t,r){return xn(new Xn(n,t,r.source))}function Xn(n,t,r){this.source=r,this.f=n,this.value=t}function zn(n,t,r){this.f=n,this.value=t,this.sink=r}function qn(n,t){this.f=n,this.value=t}function Jn(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0;var i=this;Promise.resolve(this).then(function(n){return $n(n,t)}).catch(function(n){i.sink.error(i.scheduler.now(),n)})}function $n(n,t){var r=n.f;return Promise.resolve(r(t)).then(function(t){return function(n,t){if(t.done)return n.sink.end(n.scheduler.now(),t.value),t.value;if(n.sink.event(n.scheduler.now(),t.value),!n.active)return t.value;return $n(n,t.seed)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(n,t)})}function Kn(n,t){this.f=n,this.value=t}function Zn(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0;var i=t,o=this;Promise.resolve(this).then(function(n){return Qn(n,i)}).catch(function(n){o.sink.error(o.scheduler.now(),n)})}function Qn(n,t){if(n.sink.event(n.scheduler.now(),t),!n.active)return t;var r=n.f;return Promise.resolve(r(t)).then(function(t){return function(n,t){return n.active?Qn(n,t):n.value}
/** @license MIT License (c) copyright 2010-2014 original author or authors */(n,t)})}function nt(n,t){this.f=n,this.args=t}function tt(n,t,r){this.iterator=n,this.sink=t,this.scheduler=r,this.active=!0;var e=this;Promise.resolve(this).then(rt).catch(function(n){e.sink.error(e.scheduler.now(),n)})}function rt(n,t){return n.active?et(n,n.iterator.next(t)):t}function et(n,t){return t.done?n.sink.end(n.scheduler.now(),t.value):Promise.resolve(t.value).then(function(t){return function(n,t){return n.sink.event(n.scheduler.now(),t),rt(n,t)}(n,t)},function(t){return function(n,t){return et(n,n.iterator.throw(t))}(n,t)})}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function it(n,t){return new i(new ot(n,t.source))}function ot(n,t){this.f=n,this.source=t}function ut(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0,this.disposable=x(t.run(this,e))}function at(n,t){return it(function(){return t},n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function ct(n,t){this.sink=t,this.index=n,this.active=!0,this.value=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function st(n,t){switch(t.length){case 0:return n();case 1:return n(t[0]);case 2:return n(t[0],t[1]);case 3:return n(t[0],t[1],t[2]);case 4:return n(t[0],t[1],t[2],t[3]);case 5:return n(t[0],t[1],t[2],t[3],t[4]);default:return n.apply(void 0,t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */ln.prototype.event=function(n,t){this.disposable.disposed||"function"!=typeof this.subscriber.next||this.subscriber.next(t)},ln.prototype.end=function(n,t){if(!this.disposable.disposed){var r=this.subscriber,e=this.fatalError;Promise.resolve(this.disposable.dispose()).then(function(){"function"==typeof r.complete&&r.complete(t)}).catch(function(n){dn(n,r,e)})}},ln.prototype.error=function(n,t){var r=this.subscriber,e=this.fatalError;Promise.resolve(this.disposable.dispose()).then(function(){dn(t,r,e)})},pn.prototype.unsubscribe=function(){this.disposable.dispose()},_n.prototype.run=function(n,t){function r(r){X(t.now(),r,n)}return this.source.addEventListener(this.event,r,this.capture),m(gn,{target:this,addEvent:r})},yn.prototype.event=function(n,t){this.active&&(0===this.events.length&&nn(new mn(this.sink,n,this.events)),this.events.push({time:n,value:t}))},yn.prototype.end=function(n,t){this.active&&this._end(new En(n,t,this.sink))},yn.prototype.error=function(n,t){this._end(new wn(n,t,this.sink))},yn.prototype._end=function(n){this.active=!1,nn(n)},mn.prototype.run=function(){for(var n,t=this.events,r=this.sink,e=0,i=t.length;e<i;++e)n=t[e],this.time=n.time,r.event(n.time,n.value);t.length=0},mn.prototype.error=function(n){this.sink.error(this.time,n)},En.prototype.run=function(){this.sink.end(this.time,this.value)},En.prototype.error=function(n){this.sink.error(this.time,n)},wn.prototype.run=function(){this.sink.error(this.time,this.value)},wn.prototype.error=function(n){throw n},bn.prototype.run=function(n,t){var r=new yn(n);function e(n){var e=arguments.length;if(e>1){for(var i=new Array(e),o=0;o<e;++o)i[o]=arguments[o];X(t.now(),i,r)}else X(t.now(),n,r)}return this.source.addListener(this.event,e),m(Tn,{target:this,addEvent:e})},Sn.prototype.event=function(n,t){},Sn.prototype.end=function(n,t){this.active&&(this.active=!1,Dn(this._end,this._error,this._disposable,t))},Sn.prototype.error=function(n,t){this.active=!1,Dn(this._error,this._error,this._disposable,t)},Ln.prototype.event=function(n,t){return this.sink.event(n,t)},Ln.prototype.end=function(n,t){return this.sink.end(n,t)},Ln.prototype.error=function(n,t){return this.sink.error(n,t)},Rn.create=function(n,t){return t instanceof Rn?new Rn(function(n,t){return function(r){return n(r)&&t(r)}}(t.p,n),t.source):new Rn(n,t)},Rn.prototype.run=function(n,t){return this.source.run(new Pn(this.p,n),t)},Pn.prototype.end=Ln.prototype.end,Pn.prototype.error=Ln.prototype.error,Pn.prototype.event=function(n,t){(0,this.p)(t)&&this.sink.event(n,t)},kn.prototype.run=function(n,t){return this.source.run(new Mn(this.p,this.f,n),t)},Mn.prototype.event=function(n,t){var r=this.f;(0,this.p)(t)&&this.sink.event(n,r(t))},Mn.prototype.end=Ln.prototype.end,Mn.prototype.error=Ln.prototype.error,Nn.create=function(n,t){return t instanceof Nn?new Nn(function(n,t){return function(r){return n(t(r))}}(n,t.f),t.source):t instanceof Rn?new kn(t.p,n,t.source):new Nn(n,t)},Nn.prototype.run=function(n,t){return this.source.run(new In(this.f,n),t)},In.prototype.end=Ln.prototype.end,In.prototype.error=Ln.prototype.error,In.prototype.event=function(n,t){var r=this.f;this.sink.event(n,r(t))},Bn.prototype.run=function(n,t){return this.source.run(new Fn(this.f,n),t)},Fn.prototype.end=Ln.prototype.end,Fn.prototype.error=Ln.prototype.error,Fn.prototype.event=function(n,t){(0,this.f)(t),this.sink.event(n,t)},Gn.prototype.run=function(n,t){return this.source.run(new Hn(this.step,this.seed,n),t)},Hn.prototype.error=Ln.prototype.error,Hn.prototype.event=function(n,t){var r=this.step(this.seed,t);this.seed=r.seed,this.sink.event(n,r.value)},Hn.prototype.end=function(n){this.sink.end(n,this.seed)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Wn.prototype.run=function(n,t){return w([t.asap(L.event(this.value,n)),this.source.run(new Vn(this.f,this.value,n),t)])},Vn.prototype.event=function(n,t){var r=this.f;this.value=r(this.value,t),this.sink.event(n,this.value)},Vn.prototype.error=Ln.prototype.error,Vn.prototype.end=Ln.prototype.end,Xn.prototype.run=function(n,t){return this.source.run(new zn(this.f,this.value,n),t)},zn.prototype.event=function(n,t){var r=this.f;this.value=r(this.value,t),this.sink.event(n,this.value)},zn.prototype.error=Ln.prototype.error,zn.prototype.end=function(n){this.sink.end(n,this.value)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,qn.prototype.run=function(n,t){return new Jn(this.f,this.value,n,t)},Jn.prototype.dispose=function(){this.active=!1},Kn.prototype.run=function(n,t){return new Zn(this.f,this.value,n,t)},Zn.prototype.dispose=function(){this.active=!1},nt.prototype.run=function(n,t){return new tt(this.f.apply(void 0,this.args),n,t)},tt.prototype.dispose=function(){this.active=!1},ot.prototype.run=function(n,t){return new ut(this.f,this.source,n,t)},ut.prototype.error=Ln.prototype.error,ut.prototype.event=function(n,t){this.active&&this.sink.event(n,t)},ut.prototype.end=function(n,t){this.active&&(y(n,this.disposable,this.sink),this._startNext(n,t,this.sink))},ut.prototype._startNext=function(n,t,r){try{this.disposable=this._continue(this.f,t,r)}catch(t){r.error(n,t)}},ut.prototype._continue=function(n,t,r){return n(t).source.run(r,this.scheduler)},ut.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,ct.prototype.event=function(n,t){this.active&&(this.value=t,this.sink.event(n,this))},ct.prototype.end=function(n,t){this.active&&(this.active=!1,this.sink.end(n,{index:this.index,value:t}))},ct.prototype.error=Ln.prototype.error;var ft=c,ht=a;function vt(n,t){var r=t.length;return 0===r?U():1===r?Un(n,t[0]):new i(function(n,t){return new pt(n,ft(lt,t))}(n,t))}function lt(n){return n.source}function pt(n,t){this.f=n,this.sources=t}function dt(n,t,r,e){this.sink=r,this.disposables=n,this.sinks=t,this.f=e;var i=t.length;this.awaiting=i,this.values=new Array(i),this.hasValue=new Array(i);for(var o=0;o<i;++o)this.hasValue[o]=!1;this.activeCount=t.length}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function _t(n,t){return function(n){return vt(n,ht(arguments))}(l,n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function gt(n,t){this.transducer=n,this.source=t}function yt(n,t){this.xf=n,this.sink=t}function mt(n){this.time=-1/0,this.sink=n}function Et(n){this.tx=n}function wt(n){this.tx=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function bt(){this.head=null,this.length=0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Tt(n,t){return At(v,n,t)}function At(n,t,r){return new i(new xt(n,t,r.source))}function xt(n,t,r){this.f=n,this.concurrency=t,this.source=r}function St(n,t,r,e,i){this.f=n,this.concurrency=t,this.sink=e,this.scheduler=i,this.pending=[],this.current=new bt,this.disposable=x(r.run(this,i)),this.active=!0}function Dt(n,t,r){this.prev=this.next=null,this.time=n,this.outer=t,this.sink=r,this.disposable=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Lt(n,t){return At(n,1/0,t)}function Rt(n){return Tt(1/0,n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Pt(n,t){return At(n,1,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */pt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new dt(i,o,n,this.f),a=0;a<e;++a)r=o[a]=new ct(a,u),i[a]=this.sources[a].run(r,t);return w(i)},dt.prototype.error=Ln.prototype.error,dt.prototype.event=function(n,t){var r=t.index,e=this._updateReady(r);this.values[r]=t.value,0===e&&this.sink.event(n,st(this.f,this.values))},dt.prototype._updateReady=function(n){return this.awaiting>0&&(this.hasValue[n]||(this.hasValue[n]=!0,this.awaiting-=1)),this.awaiting},dt.prototype.end=function(n,t){y(n,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(n,t.value)},gt.prototype.run=function(n,t){var r,e=this.transducer(new mt(n));return this.source.run(new yt("function"==typeof(r=e)["@@transducer/step"]?new Et(r):new wt(r),n),t)},yt.prototype.event=function(n,t){var r=this.xf.step(n,t);return this.xf.isReduced(r)?this.sink.end(n,this.xf.getResult(r)):r},yt.prototype.end=function(n,t){return this.xf.result(t)},yt.prototype.error=function(n,t){return this.sink.error(n,t)},mt.prototype["@@transducer/init"]=mt.prototype.init=function(){},mt.prototype["@@transducer/step"]=mt.prototype.step=function(n,t){return isNaN(n)||(this.time=Math.max(n,this.time)),this.sink.event(this.time,t)},mt.prototype["@@transducer/result"]=mt.prototype.result=function(n){return this.sink.end(this.time,n)},Et.prototype.step=function(n,t){return this.tx["@@transducer/step"](n,t)},Et.prototype.result=function(n){return this.tx["@@transducer/result"](n)},Et.prototype.isReduced=function(n){return null!=n&&n["@@transducer/reduced"]},Et.prototype.getResult=function(n){return n["@@transducer/value"]},wt.prototype.step=function(n,t){return this.tx.step(n,t)},wt.prototype.result=function(n){return this.tx.result(n)},wt.prototype.isReduced=function(n){return null!=n&&n.__transducers_reduced__},wt.prototype.getResult=function(n){return n.value},bt.prototype.add=function(n){null!==this.head&&(this.head.prev=n,n.next=this.head),this.head=n,++this.length},bt.prototype.remove=function(n){--this.length,n===this.head&&(this.head=this.head.next),null!==n.next&&(n.next.prev=n.prev,n.next=null),null!==n.prev&&(n.prev.next=n.next,n.prev=null)},bt.prototype.isEmpty=function(){return 0===this.length},bt.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var n=[],t=this.head;for(this.head=null,this.length=0;null!==t;)n.push(t.dispose()),t=t.next;return Promise.all(n)},xt.prototype.run=function(n,t){return new St(this.f,this.concurrency,this.source,n,t)},St.prototype.event=function(n,t){this._addInner(n,t)},St.prototype._addInner=function(n,t){this.current.length<this.concurrency?this._startInner(n,t):this.pending.push(t)},St.prototype._startInner=function(n,t){try{this._initInner(n,t)}catch(t){this.error(n,t)}},St.prototype._initInner=function(n,t){var r=new Dt(n,this,this.sink);r.disposable=function(n,t,r,e){return n(t).source.run(r,e)}(this.f,t,r,this.scheduler),this.current.add(r)},St.prototype.end=function(n,t){this.active=!1,y(n,this.disposable,this.sink),this._checkEnd(n,t)},St.prototype.error=function(n,t){this.active=!1,this.sink.error(n,t)},St.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},St.prototype._endInner=function(n,t,r){this.current.remove(r),y(n,r,this),0===this.pending.length?this._checkEnd(n,t):this._startInner(n,this.pending.shift())},St.prototype._checkEnd=function(n,t){!this.active&&this.current.isEmpty()&&this.sink.end(n,t)},Dt.prototype.event=function(n,t){this.sink.event(Math.max(n,this.time),t)},Dt.prototype.end=function(n,t){this.outer._endInner(Math.max(n,this.time),t,this)},Dt.prototype.error=function(n,t){this.outer.error(Math.max(n,this.time),t)},Dt.prototype.dispose=function(){return this.disposable.dispose()};var kt=function(n){for(var t=n.length,r=new Array(t),e=0;e<t;++e)r[e]=n[e];return r},Mt=function(n,t,r){for(var e=t,i=0,o=r.length;i<o;++i)e=n(e,r[i],i);return e};function Nt(){return It(kt(arguments))}function It(n){var t=n.length;return 0===t?U():1===t?n[0]:new i(function(n){return new Ct(Mt(Ut,[],n))}(n))}function Ut(n,t){var r=t.source;return r instanceof Ct?n.concat(r.sources):n.concat(r)}function Ct(n){this.sources=n}function Bt(n,t,r){this.sink=r,this.disposables=n,this.activeCount=t.length}function Ft(n,t,r){return new i(new Yt(n,t.source,c(Ot,r)))}function Ot(n){return n.source}function Yt(n,t,r){this.f=n,this.sampler=t,this.sources=r}function Gt(n){this.sink=n,this.hasValue=!1}function Ht(n,t,r){this.f=n,this.sinks=t,this.sink=r,this.active=!1}function Wt(n){return n.hasValue}function Vt(n){return n.value}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function jt(n){this._capacity=n||32,this._length=0,this._head=0}Ct.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new Bt(i,o,n),a=0;a<e;++a)r=o[a]=new ct(a,u),i[a]=this.sources[a].run(r,t);return w(i)},Bt.prototype.error=Ln.prototype.error,Bt.prototype.event=function(n,t){this.sink.event(n,t.value)},Bt.prototype.end=function(n,t){y(n,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(n,t.value)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Yt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e+1),o=new Array(e),u=new Ht(this.f,o,n),a=0;a<e;++a)r=o[a]=new Gt(u),i[a]=this.sources[a].run(r,t);return i[a]=this.sampler.run(u,t),w(i)},Gt.prototype.event=function(n,t){this.value=t,this.hasValue=!0,this.sink._notify(this)},Gt.prototype.end=function(){},Gt.prototype.error=Ln.prototype.error,Ht.prototype._notify=function(){this.active||(this.active=this.sinks.every(Wt))},Ht.prototype.event=function(n){this.active&&this.sink.event(n,st(this.f,c(Vt,this.sinks)))},Ht.prototype.end=Ln.prototype.end,Ht.prototype.error=Ln.prototype.error,jt.prototype.push=function(n){var t=this._length;this._checkCapacity(t+1),this[this._head+t&this._capacity-1]=n,this._length=t+1},jt.prototype.shift=function(){var n=this._head,t=this[n];return this[n]=void 0,this._head=n+1&this._capacity-1,this._length--,t},jt.prototype.isEmpty=function(){return 0===this._length},jt.prototype.length=function(){return this._length},jt.prototype._checkCapacity=function(n){this._capacity<n&&this._ensureCapacity(this._capacity<<1)},jt.prototype._ensureCapacity=function(n){var t=this._capacity;this._capacity=n;var r=this._head+this._length;r>t&&function(n,t,r,e,i){for(var o=0;o<i;++o)r[o+e]=n[o+t],n[o+t]=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(this,0,this,t,r&t-1)};var Xt=c;function zt(n,t){return 0===t.length?U():1===t.length?Un(n,t[0]):new i(new Jt(n,Xt(qt,t)))}function qt(n){return n.source}function Jt(n,t){this.f=n,this.sources=t}function $t(n,t,r,e){this.f=n,this.sinks=r,this.sink=e,this.buffers=t}function Kt(n){return n.shift()}function Zt(n){this.source=n}function Qt(n,t){this.sink=n,this.scheduler=t,this.current=null,this.ended=!1}function nr(n,t,r,e){this.min=n,this.max=t,this.outer=r,this.sink=e,this.disposable=E()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function tr(n,t){return new i(Rn.create(n,t.source))}function rr(n,t){return new i(new er(n,t.source))}function er(n,t){this.equals=n,this.source=t}function ir(n,t){this.equals=n,this.sink=t,this.value=void 0,this.init=!0}function or(n,t){return n===t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function ur(n,t){return cr(0,n,t)}function ar(n,t){return cr(n,1/0,t)}function cr(n,t,r){return t<=n?U():new i(sr(n,t,r.source))}function sr(n,t,r){return r instanceof Nn?function(n,t,r){return Nn.create(r.f,sr(n,t,r.source))}(n,t,r):r instanceof fr?function(n,t,r){return n+=r.min,t=Math.min(t+r.min,r.max),new fr(n,t,r.source)}(n,t,r):new fr(n,t,r)}function fr(n,t,r){this.source=r,this.min=n,this.max=t}function hr(n,t,r,e){this.sink=r,this.skip=n,this.take=t,this.disposable=e}function vr(n,t){this.p=n,this.source=t}function lr(n,t,r){this.p=n,this.sink=t,this.active=!0,this.disposable=r}function pr(n,t){this.p=n,this.source=t}function dr(n,t){this.p=n,this.sink=t,this.skipping=!0}function _r(n,t){this.p=n,this.source=t}function gr(n,t){this.p=n,this.sink=t,this.skipping=!1}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function yr(n,t){return new i(new Er(n.source,t.source))}function mr(n,t){return new i(new wr(n.source,t.source))}function Er(n,t){this.maxSignal=n,this.source=t}function wr(n,t){this.minSignal=n,this.source=t}function br(n,t){this.value=n,this.sink=t}function Tr(n,t,r){this.min=n,this.max=t,this.sink=r}function Ar(n,t,r){this.value=1/0,this.sink=t,this.disposable=n.run(this,r)}function xr(n,t,r){this.value=1/0,this.sink=t,this.disposable=n.run(this,r)}function Sr(){}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Dr(n,t){this.dt=n,this.source=t}function Lr(n,t,r){this.dt=n,this.sink=t,this.scheduler=r}function Rr(n){this.source=n}function Pr(n){this.sink=n}function kr(n,t){return t instanceof Nn?function(n,t){return Nn.create(t.f,kr(n,t.source))}(n,t):t instanceof Mr?function(n,t){return new Mr(Math.max(n,t.period),t.source)}(n,t):new Mr(n,t)}function Mr(n,t){this.period=n,this.source=t}function Nr(n,t){this.time=0,this.period=n,this.sink=t}function Ir(n,t){this.dt=n,this.source=t}function Ur(n,t,r,e){this.dt=n,this.sink=r,this.scheduler=e,this.value=void 0,this.timer=null,this.disposable=t.run(this,e)}function Cr(n,t){this.debounce=n,this.value=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Br(n){return Fr(M(n))}function Fr(n){return new i(new Or(n.source))}function Or(n){this.source=n}function Yr(n,t){this.sink=n,this.scheduler=t,this.queue=Promise.resolve();var r=this;this._eventBound=function(n){r.sink.event(r.scheduler.now(),n)},this._endBound=function(n){r.sink.end(r.scheduler.now(),n)},this._errorBound=function(n){r.sink.error(r.scheduler.now(),n)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Gr(n){this.sink=n,this.active=!0}Jt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new Array(e),a=new $t(this.f,u,o,n),c=0;c<e;++c)u[c]=new jt,r=o[c]=new ct(c,a),i[c]=this.sources[c].run(r,t);return w(i)},$t.prototype.event=function(n,t){var r=this.buffers,e=r[t.index];if(e.push(t.value),1===e.length()){if(!function(n){for(var t=0,r=n.length;t<r;++t)if(n[t].isEmpty())return!1;return!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(this.buffers))return;!function(n,t,r,e){e.event(t,st(n,Xt(Kt,r)))}(this.f,n,r,this.sink),function(n,t){for(var r=0,e=n.length;r<e;++r)if(n[r].isEmpty()&&!t[r].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(n,void 0)}},$t.prototype.end=function(n,t){this.buffers[t.index].isEmpty()&&this.sink.end(n,t.value)},$t.prototype.error=Ln.prototype.error,Zt.prototype.run=function(n,t){var r=new Qt(n,t);return w([r,this.source.run(r,t)])},Qt.prototype.event=function(n,t){this._disposeCurrent(n),this.current=new nr(n,1/0,this,this.sink),this.current.disposable=t.source.run(this.current,this.scheduler)},Qt.prototype.end=function(n,t){this.ended=!0,this._checkEnd(n,t)},Qt.prototype.error=function(n,t){this.ended=!0,this.sink.error(n,t)},Qt.prototype.dispose=function(){return this._disposeCurrent(this.scheduler.now())},Qt.prototype._disposeCurrent=function(n){if(null!==this.current)return this.current._dispose(n)},Qt.prototype._disposeInner=function(n,t){t._dispose(n),t===this.current&&(this.current=null)},Qt.prototype._checkEnd=function(n,t){this.ended&&null===this.current&&this.sink.end(n,t)},Qt.prototype._endInner=function(n,t,r){this._disposeInner(n,r),this._checkEnd(n,t)},Qt.prototype._errorInner=function(n,t,r){this._disposeInner(n,r),this.sink.error(n,t)},nr.prototype.event=function(n,t){n<this.max&&this.sink.event(Math.max(n,this.min),t)},nr.prototype.end=function(n,t){this.outer._endInner(Math.max(n,this.min),t,this)},nr.prototype.error=function(n,t){this.outer._errorInner(Math.max(n,this.min),t,this)},nr.prototype._dispose=function(n){this.max=n,y(n,this.disposable,this.sink)},er.prototype.run=function(n,t){return this.source.run(new ir(this.equals,n),t)},ir.prototype.end=Ln.prototype.end,ir.prototype.error=Ln.prototype.error,ir.prototype.event=function(n,t){this.init?(this.init=!1,this.value=t,this.sink.event(n,t)):this.equals(this.value,t)||(this.value=t,this.sink.event(n,t))},fr.prototype.run=function(n,t){var r=A(),e=new hr(this.min,this.max-this.min,n,r);return r.setDisposable(this.source.run(e,t)),r},hr.prototype.end=Ln.prototype.end,hr.prototype.error=Ln.prototype.error,hr.prototype.event=function(n,t){this.skip>0?this.skip-=1:0!==this.take&&(this.take-=1,this.sink.event(n,t),0===this.take&&(this.disposable.dispose(),this.sink.end(n,t)))},vr.prototype.run=function(n,t){var r=A(),e=new lr(this.p,n,r);return r.setDisposable(this.source.run(e,t)),r},lr.prototype.end=Ln.prototype.end,lr.prototype.error=Ln.prototype.error,lr.prototype.event=function(n,t){if(this.active){var r=this.p;this.active=r(t),this.active?this.sink.event(n,t):(this.disposable.dispose(),this.sink.end(n,t))}},pr.prototype.run=function(n,t){return this.source.run(new dr(this.p,n),t)},dr.prototype.end=Ln.prototype.end,dr.prototype.error=Ln.prototype.error,dr.prototype.event=function(n,t){if(this.skipping){var r=this.p;if(this.skipping=r(t),this.skipping)return}this.sink.event(n,t)},_r.prototype.run=function(n,t){return this.source.run(new gr(this.p,n),t)},gr.prototype.event=function(n,t){if(!this.skipping){var r=this.p;this.skipping=r(t),this.sink.event(n,t),this.skipping&&this.sink.end(n,t)}},gr.prototype.end=Ln.prototype.end,gr.prototype.error=Ln.prototype.error,Er.prototype.run=function(n,t){var r=new br(-1/0,n),e=new xr(this.maxSignal,n,t);return w([r,e,this.source.run(new Tr(r,e,n),t)])},wr.prototype.run=function(n,t){var r=new Ar(this.minSignal,n,t),e=new br(1/0,n);return w([r,e,this.source.run(new Tr(r,e,n),t)])},br.prototype.error=Ln.prototype.error,br.prototype.event=Sr,br.prototype.end=Sr,br.prototype.dispose=Sr,Tr.prototype.event=function(n,t){n>=this.min.value&&n<this.max.value&&this.sink.event(n,t)},Tr.prototype.error=Ln.prototype.error,Tr.prototype.end=Ln.prototype.end,Ar.prototype.event=function(n){n<this.value&&(this.value=n)},Ar.prototype.end=Sr,Ar.prototype.error=Ln.prototype.error,Ar.prototype.dispose=function(){return this.disposable.dispose()},xr.prototype.event=function(n,t){n<this.value&&(this.value=n,this.sink.end(n,t))},xr.prototype.end=Sr,xr.prototype.error=Ln.prototype.error,xr.prototype.dispose=function(){return this.disposable.dispose()},Dr.prototype.run=function(n,t){var r=new Lr(this.dt,n,t);return w([r,this.source.run(r,t)])},Lr.prototype.dispose=function(){var n=this;this.scheduler.cancelAll(function(t){return t.task.sink===n.sink})},Lr.prototype.event=function(n,t){this.scheduler.delay(this.dt,L.event(t,this.sink))},Lr.prototype.end=function(n,t){this.scheduler.delay(this.dt,L.end(t,this.sink))},Lr.prototype.error=Ln.prototype.error,Rr.prototype.run=function(n,t){return this.source.run(new Pr(n),t)},Pr.prototype.end=Ln.prototype.end,Pr.prototype.error=Ln.prototype.error,Pr.prototype.event=function(n,t){this.sink.event(n,{time:n,value:t})}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Mr.prototype.run=function(n,t){return this.source.run(new Nr(this.period,n),t)},Nr.prototype.event=function(n,t){n>=this.time&&(this.time=n+this.period,this.sink.event(n,t))},Nr.prototype.end=Ln.prototype.end,Nr.prototype.error=Ln.prototype.error,Ir.prototype.run=function(n,t){return new Ur(this.dt,this.source,n,t)},Ur.prototype.event=function(n,t){this._clearTimer(),this.value=t,this.timer=this.scheduler.delay(this.dt,new Cr(this,t))},Ur.prototype._event=function(n,t){this._clearTimer(),this.sink.event(n,t)},Ur.prototype.end=function(n,t){this._clearTimer()&&(this.sink.event(n,this.value),this.value=void 0),this.sink.end(n,t)},Ur.prototype.error=function(n,t){this._clearTimer(),this.sink.error(n,t)},Ur.prototype.dispose=function(){return this._clearTimer(),this.disposable.dispose()},Ur.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},Cr.prototype.run=function(n){this.debounce._event(n,this.value)},Cr.prototype.error=function(n,t){this.debounce.error(n,t)},Cr.prototype.dispose=function(){},Or.prototype.run=function(n,t){return this.source.run(new Yr(n,t),t)},Yr.prototype.event=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._event(t)}).catch(this._errorBound)},Yr.prototype.end=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._end(t)}).catch(this._errorBound)},Yr.prototype.error=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._errorBound(t)}).catch(D)},Yr.prototype._event=function(n){return n.then(this._eventBound)},Yr.prototype._end=function(n){return Promise.resolve(n).then(this._endBound)},Gr.prototype.event=function(n,t){this.active&&this.sink.event(n,t)},Gr.prototype.end=function(n,t){this.active&&(this.disable(),this.sink.end(n,t))},Gr.prototype.error=function(n,t){this.disable(),this.sink.error(n,t)},Gr.prototype.disable=function(){return this.active=!1,this.sink}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;var Hr=function(n,t){return new i(new jr(n,t.source))};function Wr(n){this.value=n}function Vr(n,t,r){r.error(n,t)}function jr(n,t){this.f=n,this.source=t}function Xr(n,t,r,e){this.f=n,this.sink=new Gr(r),this.scheduler=e,this.disposable=t.run(this,e)}Wr.prototype.run=function(n,t){return t.asap(new L(Vr,this.value,n))},jr.prototype.run=function(n,t){return new Xr(this.f,this.source,n,t)},Xr.prototype.event=function(n,t){X(n,t,this.sink)},Xr.prototype.end=function(n,t){z(n,t,this.sink)},Xr.prototype.error=function(n,t){var r=this.sink.disable();y(n,this.disposable,this.sink),this._startNext(n,t,r)},Xr.prototype._startNext=function(n,t,r){try{this.disposable=this._continue(this.f,t,r)}catch(t){r.error(n,t)}},Xr.prototype._continue=function(n,t,r){return n(t).source.run(r,this.scheduler)},Xr.prototype.dispose=function(){return this.disposable.dispose()};var zr=function(n,t){this.source=n,this.sink=t,this.disposed=!1};function qr(n,t,r){try{r.event(n,t)}catch(t){r.error(n,t)}}function Jr(n,t,r){try{r.end(n,t)}catch(t){r.error(n,t)}}zr.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var $r=function(n){return n.dispose()},Kr={dispose:function(){}},Zr=function(n){this.source=n,this.sinks=[],this._disposable=Kr};Zr.prototype.run=function(n,t){return 1===this.add(n)&&(this._disposable=this.source.run(this,t)),new zr(this,n)},Zr.prototype._dispose=function(){var n=this._disposable;return this._disposable=Kr,Promise.resolve(n).then($r)},Zr.prototype.add=function(n){return this.sinks=function(n,t){for(var r=t.length,e=new Array(r+1),i=0;i<r;++i)e[i]=t[i];return e[r]=n,e}(n,this.sinks),this.sinks.length},Zr.prototype.remove=function(n){var t=h(n,this.sinks);return t>=0&&(this.sinks=f(t,this.sinks)),this.sinks.length},Zr.prototype.event=function(n,t){var r=this.sinks;if(1===r.length)return r[0].event(n,t);for(var e=0;e<r.length;++e)qr(n,t,r[e])},Zr.prototype.end=function(n,t){for(var r=this.sinks,e=0;e<r.length;++e)Jr(n,t,r[e])},Zr.prototype.error=function(n,t){for(var r=this.sinks,e=0;e<r.length;++e)r[e].error(n,t)};var Qr=function(n){var t=n.source;return t instanceof Zr?n:new n.constructor(new Zr(t))};
/** @license MIT License (c) copyright 2010-2016 original author or authors */i.of=M,i.empty=U,i.from=K,i.prototype.subscribe=function(n){
/** @license MIT License (c) copyright 2010-2016 original author or authors */
return function(n,t){if(Object(n)!==n)throw new TypeError("subscriber must be an object");var r=A(),e=new ln(D,n,r);return r.setDisposable(t.source.run(e,vn)),new pn(r)}(n,this)},i.prototype[j.a]=function(){return this},i.prototype.thru=function(n){return function(n,t){return n(t)}(n,this)},i.prototype.observe=i.prototype.forEach=function(n){return On(n,this)},i.prototype.drain=function(){return Yn(this)},i.prototype.loop=function(n,t){return function(n,t,r){return new i(new Gn(n,t,r.source))}(n,t,this)},i.prototype.scan=function(n,t){return function(n,t,r){return new i(new Wn(n,t,r.source))}(n,t,this)},i.prototype.reduce=function(n,t){return jn(n,t,this)},i.prototype.concat=function(n){return at(this,n)},i.prototype.startWith=function(n){return function(n,t){return at(M(n),t)}(n,this)},i.prototype.map=function(n){return Un(n,this)},i.prototype.ap=function(n){return _t(this,n)},i.prototype.constant=function(n){return function(n,t){return Un(function(){return n},t)}(n,this)},i.prototype.tap=function(n){return Cn(n,this)},i.prototype.transduce=function(n){return function(n,t){return new i(new gt(n,t.source))}(n,this)},i.prototype.chain=function(n){return Lt(n,this)},i.prototype.flatMap=i.prototype.chain,i.prototype.join=function(){return Rt(this)},i.prototype.continueWith=function(n){return it(n,this)},i.prototype.flatMapEnd=i.prototype.continueWith,i.prototype.concatMap=function(n){return Pt(n,this)},i.prototype.mergeConcurrently=function(n){return Tt(n,this)},i.prototype.merge=function(){return It(o(this,arguments))},i.prototype.combine=function(n){return vt(n,s(this,0,arguments))},i.prototype.sampleWith=function(n){return function(n,t){return new i(new Yt(v,n.source,[t.source]))}(n,this)},i.prototype.sample=function(n){return Ft(n,this,a(arguments))},i.prototype.zip=function(n){return zt(n,s(this,0,arguments))},i.prototype.switchLatest=function(){return new i(new Zt(this.source))},i.prototype.switch=i.prototype.switchLatest,i.prototype.filter=function(n){return tr(n,this)},i.prototype.skipRepeats=function(){return rr(or,this)},i.prototype.skipRepeatsWith=function(n){return rr(n,this)},i.prototype.take=function(n){return ur(n,this)},i.prototype.skip=function(n){return ar(n,this)},i.prototype.slice=function(n,t){return cr(n,t,this)},i.prototype.takeWhile=function(n){return function(n,t){return new i(new vr(n,t.source))}(n,this)},i.prototype.skipWhile=function(n){return function(n,t){return new i(new pr(n,t.source))}(n,this)},i.prototype.skipAfter=function(n){return function(n,t){return new i(new _r(n,t.source))}(n,this)},i.prototype.until=function(n){return yr(n,this)},i.prototype.takeUntil=i.prototype.until,i.prototype.since=function(n){return mr(n,this)},i.prototype.skipUntil=i.prototype.since,i.prototype.during=function(n){return function(n,t){return yr(Rt(n),mr(n,t))}(n,this)},i.prototype.delay=function(n){return function(n,t){return n<=0?t:new i(new Dr(n,t.source))}(n,this)},i.prototype.timestamp=function(){return new i(new Rr(this.source))},i.prototype.throttle=function(n){return function(n,t){return new i(kr(n,t.source))}(n,this)},i.prototype.debounce=function(n){return function(n,t){return new i(new Ir(n,t.source))}(n,this)},i.prototype.awaitPromises=function(){return Fr(this)},i.prototype.await=i.prototype.awaitPromises,i.prototype.recoverWith=function(n){return Hr(n,this)},i.prototype.flatMapError=i.prototype.recoverWith,i.prototype.multicast=function(){return Qr(this)};var ne=[0];function te(n){var t=[n,(ne[0]+=1,ne[0])];return t.tag=248,t}var re=te("Exception-WonderLog.Check_fail"),ee=function(n){throw new Error(n)};function ie(n){return console.warn(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.warn(n)}(n)}function oe(n){return console.log(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.debug(n)}(n)}function ue(n){return console.error(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.error(n)}(n)}function ae(n){return console.trace(),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.trace(n)}(n),0}function ce(n){return JSON.stringify(n)}function se(n){return ie(String(n)+"")}function fe(n,t,r){return"\n  Debug:\n\n  description\n  "+String(n)+"\n\n  params\n  "+String(t)+"\n\n  "}function he(n,t){return t?e.a(n,0):0}function ve(n,t){return t?(oe(e.a(n,0)),ae(ve)):0}function le(n,t,r){var e=JSON.stringify(t);return"\n  DebugJson:\n\n  description\n  "+String(n)+"\n\n  variable value\n  "+String(e)+"\n  "}function pe(n,t){return t?(oe(e.a(n,0)),ae(pe)):0}function de(n,t,r,e,i){return"\n  Fatal:\n\n  title\n  "+String(n)+"\n\n  description\n  "+String(t)+"\n\n  reason\n  "+String(r)+"\n\n  solution\n  "+String(e)+"\n\n  params\n  "+String(i)+"\n\n   "}function _e(n){return e.a(ee,n)}function ge(n,t,r,e,i){return"\n  Error:\n\n  title\n  "+String(n)+"\n\n  description\n  "+String(t)+"\n\n  reason\n  "+String(r)+"\n\n  solution\n  "+String(e)+"\n\n  params\n  "+String(i)+"\n\n   "}function ye(n){return ue(n),ae(ye)}function me(n,t){return"expect "+String(n)+", but actual "+String(t)}var Ee=function(n){return"undefined"!=typeof window&&void 0!==window.fake_self_wonder?window.fake_self_wonder:self};function we(n,t){return t.postMessage(n),0}var be=r(0);function Te(n){return void 0!==n}function Ae(n){return void 0!==n}var xe=[];function Se(n){if(void 0===n){var t=[xe,0];return t.tag=256,t}if(null!==n&&n[0]===xe){var r=n[1]+1|0,e=[xe,r];return e.tag=256,e}return n}function De(n){return null==n?void 0:Se(n)}function Le(n){return void 0===n?void 0:Se(n)}function Re(n){if(null!==n&&n[0]===xe){var t=n[1];return 0===t?void 0:[xe,t-1|0]}return n}function Pe(n){for(var t=Object.keys(n),r=t.length,e=new Array(r),i=0,o=r-1|0;i<=o;++i){var u=t[i];e[i]=[u,n[u]]}return e}function ke(n,t,r){for(var e=t,i=0,o=r.length-1|0;i<=o;++i)e=n(e,r[i]);return e}function Me(n){return null===n||void 0===n}function Ne(n){return void 0===n}function Ie(n){return void 0!==n}function Ue(n){return{}}function Ce(n,t){return t[n]}function Be(n,t){var r=t[n];return Me(r)?void 0:Se(r)}var Fe=function(n){for(var t={},r=n;;){var e=r;if(!e)return t;var i=e[0];t[i[0]]=i[1],r=e[1]}};function Oe(n,t){return!Me(t[n])}function Ye(n){return Pe(n).filter(function(n){return Ie(n[1])})}function Ge(n){return function(n){for(var t=Object.keys(n),r=t.length,e=new Array(r),i=0,o=r-1|0;i<=o;++i)e[i]=n[t[i]];return e}(n).filter(Ie)}function He(n){return ke(function(n,t){return function(n,t,r){return r[n]=t,r}(t[0],t[1],n)},{},Pe(n))}function We(n,t,r){return r[n]=t,r}var Ve=Ue,je=Be,Xe=Ce,ze=Fe,qe=Ge;function Je(n,t){var r=Xe(n,t);return[Te(r),r]}function $e(n,t){return n<t?-1:n===t?0:1}function Ke(n,t){return n===t?0:n<t?-1:1}var Ze=r(2);function Qe(n,t){for(var r in n)t(r)}function ni(n,t){for(;;){var r=t,e=n;if(e===r)return 0;var i=typeof e,o=typeof r,u=0;switch(i){case"boolean":if("boolean"===o)return F=r,e?F?0:1:F?-1:0;u=1;break;case"function":if("function"===o)throw[Ze.e,"compare: functional value"];u=1;break;case"number":if("number"===o)return $e(e,r);u=1;break;case"string":return"string"===o?Ke(e,r):1;case"undefined":return-1;default:u=1}if(1===u)switch(o){case"string":return-1;case"undefined":return 1;default:if("boolean"===i)return 1;if("boolean"===o)return-1;if("function"===i)return 1;if("function"===o)return-1;if("number"===i)return null===r||256===r.tag?1:-1;if("number"===o)return null===e||256===e.tag?-1:1;if(null===e)return 256===r.tag?1:-1;if(null===r)return 256===e.tag?-1:1;var a=0|e.tag,c=0|r.tag;if(250===a){n=e[0];continue}if(250===c){t=r[0];continue}if(256===a)return 256===c?$e(e[1],r[1]):-1;if(248===a)return $e(e[1],r[1]);if(251===a)throw[Ze.e,"equal: abstract value"];if(a!==c)return a<c?-1:1;var s=0|e.length,f=0|r.length;if(s===f){if(!Array.isArray(e)){var h=e,v=r,l=[void 0],p=[void 0],d=function(n,t){var r=n[2],e=n[1];if(!e.hasOwnProperty(t)||ni(n[0][t],e[t])>0){var i=r[0];return void 0!==i&&t>=i?0:(r[0]=t,0)}return 0},_=function(n){return function(t){return d(n,t)}}([h,v,p]),g=function(n){return function(t){return d(n,t)}}([v,h,l]);Qe(h,_),Qe(v,g);var y=l[0],m=p[0];return void 0!==y?void 0!==m?Ke(y,m):-1:void 0!==m?1:0}for(var E=e,w=r,b=0,T=s;;){var A=b;if(A===T)return 0;var x=ni(E[A],w[A]);if(0!==x)return x;b=A+1|0}}else if(s<f)for(var S=e,D=r,L=0,R=s;;){var P=L;if(P===R)return-1;var k=ni(S[P],D[P]);if(0!==k)return k;L=P+1|0}else for(var M=e,N=r,I=0,U=f;;){var C=I;if(C===U)return 1;var B=ni(M[C],N[C]);if(0!==B)return B;I=C+1|0}}}var F}function ti(n,t){for(;;){var r=t,e=n;if(e===r)return!0;var i=typeof e;if("string"===i||"number"===i||"boolean"===i||"undefined"===i||null===e)return!1;var o=typeof r;if("function"===i||"function"===o)throw[Ze.e,"equal: functional value"];if("number"===o||"undefined"===o||null===r)return!1;var u=0|e.tag,a=0|r.tag;if(250!==u)if(250!==a){if(248===u)return e[1]===r[1];if(251===u)throw[Ze.e,"equal: abstract value"];if(u!==a)return!1;if(256===u)return e[1]===r[1];var c=0|e.length;if(c!==(0|r.length))return!1;if(!Array.isArray(e)){var s=e,f=r,h=[!0],v=function(n,t){return function(r){return n.hasOwnProperty(r)?0:(t[0]=!1,0)}}(f,h),l=function(n,t,r){return function(e){return n.hasOwnProperty(e)&&ti(t[e],n[e])?0:(r[0]=!1,0)}}(s,f,h);return Qe(s,v),h[0]&&Qe(f,l),h[0]}for(var p=e,d=r,_=0,g=c;;){var y=_;if(y===g)return!0;if(!ti(p[y],d[y]))return!1;_=y+1|0}}else t=r[0];else n=e[0]}}function ri(n,t){return!ti(n,t)}function ei(n,t){return ni(n,t)>=0}function ii(n,t){return ni(n,t)>0}function oi(n,t){return ni(n,t)<0}function ui(n){return void 0!==n}function ai(n){if(void 0!==n)return Re(n);throw new Error("getExn")}te("Caml_js_exceptions.Error");function ci(n,t){if(n)return 0;throw[re,t]}function si(n,t){try{t()}catch(t){throw new Error(JSON.stringify(n))}}function fi(n,t){return t?e.a(n,0):0}function hi(n,t,r){return t?(e.a(n,r),r):r}function vi(n){return ci(!0===n,"expect to be true, but actual is false")}function li(n){return ci(!1===n,"expect to be false, but actual is true")}var pi=function(n){return null!=n};function di(n){return ci(e.a(pi,n),"expect exist, but actual not")}function _i(n){return ci(ui(n),"expect exist, but actual not")}function gi(n,t,r){return ci(ti(t,r),function(n,t){return'"expect to be '+String(t)+", but actual is "+String(n)+'"'}(t,r))}function yi(n,t,r){return ci(ri(t,r),function(n,t){return'"expect not to be '+String(t)+", but actual is "+String(n)+'"'}(t,r))}function mi(n,t,r){return ci(ii(t,r),"expect "+String(t)+" > "+String(r)+", but actual isn't")}function Ei(n,t,r){return ci(ei(t,r),"expect "+String(t)+" >= "+String(r)+", but actual isn't")}function wi(n,t,r){return ci(oi(t,r),"expect "+String(t)+" < "+String(r)+", but actual isn't")}function bi(n,t,r){return ci(ni(t,r)<=0,"expect "+String(t)+" <= "+String(r)+", but actual isn't")}var Ti=[function(n,t){return gi(0,n,t)},function(n,t){return gi(0,n,t)},function(n,t){return gi(0,n,t)},function(n,t){return yi(0,n,t)},function(n,t){return yi(0,n,t)},function(n,t){return mi(0,n,t)},function(n,t){return mi(0,n,t)},function(n,t){return Ei(0,n,t)},function(n,t){return Ei(0,n,t)},function(n,t){return wi(0,n,t)},function(n,t){return wi(0,n,t)},function(n,t){return bi(0,n,t)},function(n,t){return bi(0,n,t)}];var Ai=[void 0,!1];function xi(n){return n[1]}function Si(n){for(var t=[],r=Ve(0),e=0,i=n.length-1|0;e<=i;++e){var o=n[e],u=o.toString();void 0===je(u,r)&&(t.push(o),We(u,o,r))}return t}function Di(n,t){for(var r=0,e=t.length-1|0;r<=e;++r)n(t[r]);return 0}function Li(n,t){for(var r=0,e=t.length-1|0;r<=e;++r)n(t[r],r);return 0}function Ri(n,t,r){for(var e=t,i=0,o=r.length-1|0;i<=o;++i)e=n(e,r[i],i);return e}var Pi=ke;function ki(n){var t=n.source;return!!t.event&&!!t.source}function Mi(n){return 0!==n.length?Pi(function(n,t){return ki(n),n.concat(t)},be.b(n,0),n.slice(1)):M(1)}function Ni(n,t){return fi(function(n){var r=t.length;return si(me("stream count >= 2","is "+String(r)),function(n){return Ti[7](r,2)}),si("the first stream should be fromEvent stream",function(n){return ci(!0===ki(be.b(t,0)),"expect to be true, but actual is false")}),si("only the first stream should be fromEvent stream",function(n){return Di(function(n){return ci(!1===ki(n),"expect to be false, but actual is true")},t.slice(1))})},xi(Ai)),Pi(function(t,r){return Pt(function(t){return e.b(r,t,n)},t)},e.b(be.b(t,0),void 0,n),t.slice(1))}function Ii(n){return Un(function(n){return e.a(n,0)},M(n))}function Ui(n,t,r){var e=He(r);return e[n]=t,e}function Ci(n,t){var r=He(t);return r[n]=void 0,r}var Bi=Ue,Fi=Ce,Oi=Oe,Yi=Ye;function Gi(n,t){for(var r=[],e=n;e<=t;++e)r.push(e);return r}function Hi(n,t){return t.push(n),t}function Wi(n){return n[0]}function Vi(n,t,r){return hi(function(r){var e=ce(n);return si(me("find "+String(t)+" in "+String(e),"not"),function(n){return di(r)})},xi(Ai),n.find(r))}function ji(n){return fi(function(t){return si(me("data exist(get by getExn)","not"),function(t){return _i(n)})},xi(Ai)),ai(n)}function Xi(n){return null===n||void 0===n}var zi=ji,qi=ti;function Ji(n){return void 0!==n?Re(n):_e(de("throwJobFlagsShouldBeDefined","jobFlags should be defined","","",""))}var $i=Vi;function Ki(n,t){var r=n[3],i=n[0];return Pi(function(n,o){var u=o[0],a=function(n,t){return $i(n,t,function(n){return qi(n[0],t)})}(r,u),c=e.b(t,u,i);return Hi(e.a(c,a[1]),n)},[],n[1])}function Zi(n,t,r,i){return function(n,t,r,e){var i=n[1];return Pi(function(n,o){return Hi(Ni(r,Ki([t,o,r,i],e)),n)},[],n[0])}([n,t],e.a(r[0],0),i,r[1])}var Qi=[void 0],no=r(3);r(8);var to=Math.imul||function(n,t){return((n>>16)*(t|=0)<<16)+(65535&n)*t|0};te("Pervasives.Exit");no.f,no.g,no.e;no.a,no.d,no.d;var ro=ze;var eo=function(n){return parseInt(n,16)};function io(n){var t=n[0];return fi(function(n){return si(me("gl exist","not"),function(n){return _i(t)})},xi(Ai)),ji(t)}function oo(n,t,r){return n.depthFunc(t),r}function uo(n,t,r){var e=r[4];return void 0!==e&&e===t?r:1===1?(function(n,t){switch(t){case 0:return n.enable(n.CULL_FACE),n.cullFace(n.FRONT_AND_BACK),0;case 1:return n.disable(n.CULL_FACE),0;case 2:return n.enable(n.CULL_FACE),n.cullFace(n.BACK),0;case 3:n.enable(n.CULL_FACE),n.cullFace(n.FRONT)}}(n,t),[r[0],r[1],r[2],r[3],t,r[5],r[6],r[7],r[8]]):void 0}function ao(n,t,r){var e=r[5];return void 0!==e&&e===t?r:1===1?(function(n,t){t?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)}(n,t),[r[0],r[1],r[2],r[3],r[4],t,r[6],r[7],r[8]]):void 0}function co(n,t){return n[0]=t,t}function so(n){return ji(n[0])}function fo(n,t,r){return Ii(function(n){return function(n){n.commit()}(io(so(r)[4])),t})}function ho(n){return[]}function vo(n,t){return t[n]}function lo(n,t){var r=t[n];return Me(r)?void 0:Se(r)}function po(n,t){return!Me(t[n])}function _o(n){return n.length}function go(n){return n.filter(Ie)}function yo(n,t,r){return Ri(function(t,r,e){return Ne(r)?t:n(t,r,e)},t,r)}function mo(n,t,r){return r[n]=t,r}function Eo(n,t){return t[n]=void 0,t}var wo=ho,bo=vo,To=lo,Ao=po,xo=_o,So=go,Do=yo;function Lo(n){return n<<4}function Ro(n){return to(n,3)}function Po(n){return 0+to(n<<4,Float32Array.BYTES_PER_ELEMENT)|0}function ko(n){return n<<2}function Mo(n){return Po(n)+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function No(n){return to(n,3)}function Io(n){return Mo(n)+to(n<<2,Float32Array.BYTES_PER_ELEMENT)|0}function Uo(n){return n<<4}function Co(n,t){return t[n]}function Bo(n,t){return t[n]}function Fo(n,t){return t[n]}function Oo(n,t){return t[n]}function Yo(n,t){return[t[n],t[n+1|0],t[n+2|0]]}function Go(n,t,r){return si(me("not exceed bound","exceed"),function(i){return Ti[9](n,e.a(r,t))})}function Ho(n,t,r){return fi(function(t){return Go(n,r,function(n){return n.length})},xi(Ai)),r[n]=t,r}function Wo(n,t,r){return fi(function(t){return Go(n,r,function(n){return n.length})},xi(Ai)),r[n]=t,r}function Vo(n,t,r,e){return n[r]=t[e],0}function jo(n,t,r,e){for(var i=t[0],o=n[0],u=n[1],a=t[1],c=r-1|0;a<=c;++a)e(o,i,u,a),u=u+1|0;return u}function Xo(n,t,r){return jo(n,t,r,Vo)}function zo(n,t){return[new Float32Array(n,0,Lo(t)),new Float32Array(n,Po(t),Ro(t)),new Float32Array(n,Mo(t),ko(t)),new Float32Array(n,Io(t),No(t))]}function qo(n,t){return _e(de(n,"unknown browser","","","browser: "+String(t)))}var Jo="\nprecision mediump float;\n\nattribute vec2 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_projectionMat;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  gl_Position = u_projectionMat * vec4(a_position, 0, 1);\n  v_color = a_color;\n  v_texCoord = a_texCoord;\n}\n    ",$o="\nprecision mediump float;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_sampler2D;\n\nvoid main() {\n  vec4 sample = texture2D(u_sampler2D, v_texCoord);\n\n  gl_FragColor = vec4(v_color * sample.xyz, sample.w);\n}\n    ",Ko="\nprecision mediump float;\n\nattribute vec2 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_projectionMat;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  gl_Position = u_projectionMat * vec4(a_position, 0, 1);\n  v_color = a_color;\n  v_texCoord = a_texCoord;\n}\n    ",Zo="\nprecision mediump float;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_sampler2D;\n\nvoid main() {\n  vec4 sample = texture2D(u_sampler2D, v_texCoord);\n\n  gl_FragColor = vec4(v_color * sample.xyz, sample.w);\n}\n    ",Qo="\nprecision mediump float;\n\nattribute vec2 a_position;\nattribute vec3 a_color;\n\nuniform mat4 u_projectionMat;\n\nvarying vec3 v_color;\n\nvoid main() {\n  gl_Position = u_projectionMat * vec4(a_position, 0, 1);\n  v_color = a_color;\n}\n    ",nu="\nprecision mediump float;\n\nvarying vec3 v_color;\n\nvoid main() {\n  gl_FragColor = vec4(v_color, 1.0);\n}\n    ";function tu(n,t){return t.push(n),t}function ru(n){return[n[0],n[1],n[2],n[3]]}function eu(n,t){var r=t[6][0];return r[0][r[1]]=n,[t[0],t[1],t[2],t[3],t[4],t[5],[[r[0],r[1]+1|0]],t[7]]}function iu(n){var t=n[6][0];return[n[0],n[1],n[2],n[3],n[4],n[5],[[t[0],t[1]-1|0]],n[7]]}function ou(n,t){var r=function(n){var t=n[6][0];if(!(t[1]<=0))return Pi(function(n,t){var r=n[1],e=n[0],i=e[t];return[e,[r[0]+i[0]|0,r[1]+i[1]|0]]},[t[0],[0,0]],function(n,t){for(var r=[],e=n;e<=t;++e)r.push(e);return r}(0,t[1]-1|0))[1]}(t);if(void 0!==r){var e=r;return[n[0]+e[0]|0,n[1]+e[1]|0,n[2],n[3]]}return n}function uu(n,t){return Fi(n,t[7][0][1])}function au(n,t,r,e,i,o,u,a,c){return[void 0!==n?n:[.35,.1,.1],void 0!==t?t:[.4,.1,.1],void 0!==r?r:[.5,.1,.1],void 0!==e?Re(e):null,void 0!==i?Re(i):null,void 0!==o?Re(o):null,void 0!==u?u:1,void 0!==a?a:[1,1,1]]}var cu=[au,function(n){return au(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(n){return n[0]},function(n,t){return[n,t[1]]}];var su=[function(n){return function(n,t,r,e){var i=n[0],o=r.getIOData,u=r.getPointUp,a=r.getPointDown,c=r.getPointPosition,s=r.isClick,f=r.drawBox,h=r.drawText,v=r.drawImage,l=o(e);u(l);var p=a(l),d=c(l),_=r.parseShowData,g=(0,r.unsafeGetSkinData)(_(t)[0],e)[0],y=function(n,t,r,e){var o=n[0];return function(n,t){var r=n[0],e=n[1],i=t[1],o=t[0],u=r+n[2],a=e+n[3];return r<=o&&o<=u&&e<=i&&i<=a}(i,function(n){return[n[0],n[1]]}(t[1]))?r(e)?[!0,o]:t[0]?[!1,o]:[!1,n[1]]:[!1,n[2]]}([[g[5],g[2]],[g[4],g[1]],[g[3],g[0]]],[p,d],s,e),m=y[1],E=m[0],w=null==E?f(i,m[1],e):v(i,[0,0,1,1],E,e);return[h(i,n[1],[g[7],g[6]],w),y[0]]}},function(n){return"Wonder_Button"},function(n,t,r){return uu("Wonder_Button",r)([ru(ou(n[0],r)),n[1]],t,r)}];function fu(n){return fi(function(t){return si(me("data exist(get by getExn)","not"),function(t){return _i(n)})},!0),ai(n)}var hu=Ui,vu=Ci,lu=Fi;function pu(n){return n[7][1][0]}function du(n,t){var r=t[7];return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],[r[0],[n]]]}function _u(n){return du(Bi(0),n)}function gu(n,t){return lu(n,t[7][1][0])}function yu(n,t){return[n,t]}function mu(n){return Bi(0)}function Eu(n){return Bi(0)}var wu=Ui;function bu(n,t){return Fi(n,t[1])}var Tu=Fi,Au=Oi;function xu(n){return!(null==n)}function Su(n){return fu(null==n?void 0:Se(n))}function Du(n){var t=mu(),r=Eu(),e=wu("Wonder_Default_CustomStyle",r,t);return yu(cu[1](0),e)}function Lu(n){var t=n[7];return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],[t[0],[Ui("Wonder_Default_Skin",Du(),pu(n))]]]}cu[2],cu[3];var Ru=function(n,t,r){var e=r[7],i=e[0];return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],[[i[0],Ui(n,function(n,r,e){return t(n,r,e[7][0][0],e)},r[7][0][1])],e[1]]]};function Pu(n){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function ku(n,t,r){return n.shaderSource(r,t),n.compileShader(r),he(function(e){if(!1===n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r),o=String(i)+"";ve(function(n){return fe("shader info log",o)},!0);var u=String(t)+"";return ve(function(n){return fe("glsl source",u)},!0)}return 0},!0),r}function Mu(n,t,r,e){var i=ku(r,n,r.createShader(r.VERTEX_SHADER)),o=ku(r,t,r.createShader(r.FRAGMENT_SHADER));return r.attachShader(e,i),r.attachShader(e,o),r.bindAttribLocation(e,0,"a_position"),function(n,t){t.linkProgram(n),he(function(r){if(!1===t.getProgramParameter(n,t.LINK_STATUS)){var e=t.getProgramInfoLog(n);return _e(de("link program error",String(e)+"","","",""))}return 0},!0)}(e,r),r.deleteShader(i),r.deleteShader(o),e}function Nu(n){return URL.createObjectURL(n)}function Iu(n){URL.revokeObjectURL(n)}var Uu=function(n){return parseInt(n,10)};function Cu(n){var t=function(n){return n.headers.get("content-length")}(n);return null==t?_e(ge("load","Content-Length response header unavailable","","","")):e.a(Uu,t)}function Bu(n){var t=function(n){var t=/\.(\w+)$/.exec(n);if(null!==t)return De(be.b(t,0))}(n);if(void 0===t)return _e(de("getType","image extname should exist","","",""));switch(t){case".jpg":return 0;case".png":return 1;default:return 2}}function Fu(n){return Br(new Promise(function(t,r){return function(n,t,r){void 0===window.loadImageBlob_wonder_imgui&&(window.loadImageBlob_wonder_imgui=function(n,t,r){var e=new Image;e.src=n,e.onload=function(){return t(e)},e.onerror=function(n){return console.trace(),r(new Error(n))}}),window.loadImageBlob_wonder_imgui(n,t,r)}(n,t,r)}))}function Ou(n){return fu(n[2])}function Yu(n){return n[5]}function Gu(n){return n[3][0]}function Hu(n){return n[3][2]}function Wu(n){return n[3][3]}function Vu(n,t){return null==n?0:t(n)}function ju(n){return parseInt(n)}function Xu(n){for(var t=/\w+=[^ \r\n]+/gi,r=/^[\-]?\d+$/,e=Ve(0),i=!1;!i;){var o=t.exec(n);null!==o?Vu(be.b(o,0),function(n){var t,i=n.indexOf("="),o=n.substring(0,i),u=n.substring(i+1|0);r.test(u)?t=u:t='"'===u[0]?u.substring(1,u.length):u;return We(o,ju(t),e),0}):i=!0}return e}function zu(n){for(var t=wo(0),r=/char [^\n]*(\n|$)/gi,e=!1;!e;){var i=r.exec(n);null!==i?Vu(be.b(i,0),function(n){var r=Xu(n),e=Xe("id",r);return mo(e,[e,[Xe("x",r),Xe("y",r),Xe("width",r),Xe("height",r)],Xe("xoffset",r),Xe("yoffset",r),Xe("xadvance",r)],t),0}):e=!0}return t}function qu(n,t){return to(n,1e3)+t|0}function Ju(n){for(var t=[],r=/kerning [^\n]*(\n|$)/gi,e=!1;!e;){var i=r.exec(n);null!==i?Vu(be.b(i,0),function(n){var r=Xu(n);return tu([Xe("first",r),Xe("second",r),Xe("amount",r)],t),0}):e=!0}return function(n){return Pi(function(n,t){return mo(qu(t[0],t[1]),t[2],n)},wo(0),n)}(t)}function $u(n){var t=/common [^\n]*(\n|$)/gi,r=/page [^\n]*(\n|$)/gi,e=t.exec(n),i=Xu(null!==e?fu(De(be.b(e,0))):_e(de("parse","fntStr should match common_exp","","","fntStr: "+String(n)+"\n    common_exp: "+String(t)+" "))),o=r.exec(n),u=Xu(null!==o?fu(De(be.b(o,0))):_e(de("parse","fntStr should match page_exp","","","fntStr: "+String(n)+"\n    page_exp: "+String(r)+" ")));return void 0===je("id",u)&&_e(de("parse","file could not be found","","","")),[Xe("lineHeight",i),Xe("base",i),Xe("scaleW",i),Xe("scaleH",i),zu(n),Ju(n)]}function Ku(n){return n[0][6]}function Zu(n,t){var r=t[0],e=r[3],i=r[1];return Un(function(n){return We(i,n,e),0},Cn(function(t){return Iu(n)},Fu(Nu(n))))}function Qu(n,t){var r=t[0],e=r[2],i=r[0];return Un(function(n){return We(i,n,e),0},Un($u,M(n)))}function na(n,t,r){var i=function(n){return fu(n[1])}(r),o=i[1],u=i[0];return Yn(Nt(Lt(function(n){return Qu(n,r)},Br(n(u).then(function(n){return e.b(t,Cu(n),u),Promise.resolve(n)}).then(function(n){return n.text()}))),Lt(function(n){return Zu(n,r)},Br(n(o).then(function(n){return e.b(t,Cu(n),o),Promise.resolve(n)}).then(function(n){return n.blob()}))))).then(function(n){return Promise.resolve(r)})}var ta=[function(n){return Ku(n)[1]},function(n){return fu(Ku(n)[1])},function(n,t){var r=t[0],e=Ku(t);return[[r[0],r[1],r[2],r[3],r[4],r[5],[e[0],Se(n),e[2]]],t[1],t[2],t[3],t[4],t[5],t[6],t[7]]},function(n){return Ku(n)[0]},function(n){return fu(Ku(n)[0])},function(n,t){var r=t[0],e=Ku(t);return[[r[0],r[1],r[2],r[3],r[4],r[5],[n,e[1],e[2]]],t[1],t[2],t[3],t[4],t[5],t[6],t[7]]}];var ra=[function(n){return Ku(n)[2]},function(n,t){var r=t[0],e=Ku(t);return[[r[0],r[1],r[2],r[3],r[4],r[5],[e[0],e[1],tu(n,Ku(t)[2])]],t[1],t[2],t[3],t[4],t[5],t[6],t[7]]}];function ea(n){var t=n[0];return je(t[0],t[2])}function ia(n){var t=n[0];return je(t[1],t[3])}function oa(n,t,r){var e=n.RGB,i=n.RGBA,o=n.TEXTURE_2D;return Pi(function(t,r){var u;switch(r[2]){case 0:u=e;break;case 1:u=i;break;case 2:u=_e(de("createCustomTextures","unknown image type. type should be jpg or png.","","",""))}var a=n.createTexture();return n.bindTexture(o,a),n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(o,0,u,u,n.UNSIGNED_BYTE,r[0]),We(r[1],a,t)},r,t)}function ua(n,t){return Xe(n,t[0][5])}var aa=[function(n){return ui(ia(n))},function(n,t,r){var i=t[1],o=t[0],u=r[0][4],a=[1];return Yn(It([Br(na(o,i,r).then(function(n){return a[0]=n,Promise.resolve(0)}))].concat(n.map(function(n){var t=n[1],r=n[0];return Un(function(n){return tu([n,t,Bu(r)],u),0},Lt(function(n){return Cn(function(t){return Iu(n)},Fu(Nu(n)))},Br(o(r).then(function(n){return e.b(i,Cu(n),r),Promise.resolve(n)}).then(function(n){return n.blob()}))))})))).then(function(n){var t=a[0],r=a[0][0];return Promise.resolve([[r[0],r[1],r[2],r[3],u,r[5],r[6]],t[1],t[2],t[3],t[4],t[5],t[6],t[7]])})}];function ca(n,t){return Pi(function(n,t){return tu(t,n)},t,n)}function sa(n){return[].concat.apply([],n)}function fa(n){return n.length/2|0}function ha(n,t){return t.bindBuffer(t.ARRAY_BUFFER,n[0]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n[1]),t.DYNAMIC_DRAW),t}function va(n,t){var r=n[0];return t.enableVertexAttribArray(r),t.vertexAttribPointer(r,n[1],t.FLOAT,!1,0,0),t}function la(n,t,r){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),r.DYNAMIC_DRAW),r}function pa(n){var t=Yu(n);return!!t[1]&&t[0]}function da(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0],a=Gu(r),c=a[0],s=fa(c),f=r[3];return[r[0],r[1],r[2],[[ca([u,o,u,o+e,u+i,o,u+i,o+e],c),ca(sa([t,t,t,t]),a[1]),ca([s,s+1|0,s+2|0,s+3|0,s+2|0,s+1|0],a[2])],f[1],f[2],f[3]],r[4],r[5],r[6],r[7]]}function _a(n,t,r){var e=To(qu(t,r),n[5]);return void 0!==e?e:0}function ga(n,t){var r=n[4];return To(t,r)}function ya(n,t,r){ga(t,r);var e=ga(t,r);return void 0!==e?e:r==="\t".charCodeAt(0)?n[1]:r===" ".charCodeAt(0)?n[0]:void 0}function ma(n,t){var r,e=ga(n," ".charCodeAt(0));if(void 0!==e)r=e;else{var i=function(n){return Pi(function(t,r){return void 0!==t?t:ga(n,r.charCodeAt(0))},void 0,["m","w"])}(n);r=void 0!==i?i:function(n){return So(n[4])[0]}(n)}return[r,["\t".charCodeAt(0),[0,0,0,0],0,0,to(t,r[4])]]}function Ea(n){return xo(n[4])>0}function wa(n,t,r,i,o,u,a,c,s){if(!e.a(a,n))return[i,i,0];for(var f=0,h=0,v=0,l=void 0,p=!1,d=i,_=Math.min(t.length,o)-1|0;d<=_;++d){if(!p){var g=t.charCodeAt(d),y=e.b(c,n,g);if(void 0!==y){var m=y,E=m[1],w=l,b=((f=f+(void 0!==w?e.c(s,n,w[0],m[0]):0)|0)+m[4]|0)+r|0,T=f+E[2]|0;if(T>u||b>u)0===v&&(v=1,h=T),p=!0;f=b,h=T,l=m}v=v+1|0}}return void 0!==l&&(h=h+l[2]|0),[i,i+v|0,h]}function ba(n,t,r,e){var i=n.indexOf(t,r);return-1===i||i>e?e:i}function Ta(n){return/\s/.test(n)}function Aa(n,t,r,e){return function(n,t,r,e,i,o,u,a,c){for(var s=[],f=o;e<i&&e<t.length;){let o=ba(t,"\n",e,i);for(;e<o&&Ta(t.charAt(e));)e++;let h=wa(n,t,r,e,o,f,u,a,c),v=e+(h[1]-h[0]),l=v+"\n".length;if(v<o){for(;v>e&&!Ta(t.charAt(v));)v--;if(v===e)l>e+"\n".length&&l--,v=l;else for(l=v;v>e&&Ta(t.charAt(v-"\n".length));)v--}v>=e&&s.push(wa(n,t,r,e,v,f,u,a,c)),e=l}return s}(n,t,r[0],r[2],r[3],r[1],Ea,function(n,t){return ya(e,n,t)},_a)}function xa(n,t,r){return(n-to(r.length,t)|0)/2|0}function Sa(n,t,r,e){var i=r[0],o=r[1][1],u=o[3],a=o[2],c=i[0]+n,s=i[1]+t;return ca([c,s,c,s+u,c+a,s,c+a,s+u],e)}function Da(n,t,r,e){var i=n[1][1],o=i[1],u=i[0],a=u/t,c=o/r,s=(u+i[2]|0)/t,f=(o+i[3]|0)/r;return ca([a,c,a,f,s,c,s,f],e)}function La(n,t){return ca([n,n+1|0,n+2|0,n+3|0,n+2|0,n+1|0],t)}function Ra(n,t,r,e){var i=r[0],o=n[1],u=n[0],a=sa([i,i,i,i]),c=ea(e);if(void 0!==c){var s=c,f=function(n,t,r,e){var i=t[4],o=t[3],u=t[0],a=ma(r,t[2]),c=Aa(r,n,[o,u,0,n.length],a),s=r[0],f=Pi(function(n,t){return Math.max(n,t[2],u)},0,c);return Ri(function(t,e,u){for(var c=e[2],h=t[0],v=void 0,l=t[1],p=t[2],d=e[0],_=e[1]-1|0;d<=_;++d){var g=n.charCodeAt(d),y=ya(a,r,g);if(void 0!==y){var m,E,w=y;switch(m=void 0!==v?l=l+_a(r,v[0],w[0])|0:l,i){case 0:E=m;break;case 1:E=m+((f-c|0)/2|0)|0;break;case 2:E=m+(f-c|0)|0}tu([[E+w[2]|0,p+w[3]|0],w,d,u],h),l=(l+w[4]|0)+o|0,v=w}}return[h,0,p+s|0,v]},[[],0,xa(t[1],s,c),void 0],c)[0]}(t,[n[2],n[3],4,0,r[1]],s),h=Hu(e),v=Pi(function(n,t){var r=n[0],e=fa(r);return[Sa(u,o,t,r),ca(a,n[1]),Da(t,s[2],s[3],n[2]),La(e,n[3])]},[h[0],h[1],h[2],h[3]],f),l=e[3];return[e[0],e[1],e[2],[l[0],l[1],[v[0],v[1],v[2],v[3]],l[3]],e[4],e[5],e[6],e[7]]}return _e(de("getLayoutData","impossible to create font: not find fnt file","","",""))}function Pa(n,t,r,e){var i=t[3],o=t[2],u=t[1],a=t[0],c=n[3],s=n[2],f=n[1],h=n[0],v=function(n,t){var r=je(n,Wu(t));return void 0!==r?r:[Se(ua(n,t)),[],[],[],[]]}(r,e),l=v[1],p=fa(l),d=[v[0],ca([h,f,h,f+c,h+s,f,h+s,f+c],l),ca([1,1,1,1,1,1,1,1,1,1,1,1],v[2]),ca([a,u,a,i,o,u,o,i],v[3]),ca([p,p+1|0,p+2|0,p+3|0,p+2|0,p+1|0],v[4])],_=e[3];return[e[0],e[1],e[2],[_[0],_[1],_[2],We(r,d,e[3][3])],e[4],e[5],e[6],e[7]]}function ka(n){return null==n?["Wonder_Default_Skin","Wonder_Default_CustomStyle"]:n}function Ma(n,t,r,e){return Ra(ru(ou(n,e)),t,r,e)}function Na(n,t,r,e){return Pa(ru(ou(n,e)),t,r,e)}function Ia(n,t,r){return da(ru(ou(n,r)),t,r)}function Ua(n){var t=n.createBuffer();return n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,new Float32Array([]),n.DYNAMIC_DRAW),t}function Ca(n){var t=n.createBuffer();return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([]),n.DYNAMIC_DRAW),t}function Ba(n,t,r){var e,i,o,u,a,c,s,f,h,v,l;return n.uniformMatrix4fv(n.getUniformLocation(t,"u_projectionMat"),!1,(i=0,o=(e=r)[0],u=e[1],a=0,c=-1,s=1,f=Pu(),h=1/(i-o),v=1/(u-a),l=1/(c-s),f[0]=-2*h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*v,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*l,f[11]=0,f[12]=(i+o)*h,f[13]=(a+u)*v,f[14]=(s+c)*l,f[15]=1,f)),0}function Fa(n,t,r){return n.useProgram(t),Ba(n,t,r),n.uniform1i(n.getUniformLocation(t,"u_sampler2D"),0),0}function Oa(n){return[[[],[],[]],[void 0,[],[],[],[]],[[],[],[],[]],Ve(0)]}function Ya(n,t,r){return 0===n?r:(r.drawElements(r.TRIANGLES,n,r.UNSIGNED_SHORT,t),r)}function Ga(n,t,r){var e=Ou(t);r.useProgram(e[0][0]);var i=function(n,t,r){var e=Ou(r)[0],i=Pi(function(n,t){var r=t[4],e=n[5],i=n[4],o=n[3],u=n[2],a=n[1],c=n[0],s=r.length;if(0!==s){var f=a+(s<<1)|0;return[tu([t[0],s,a],c),f,u.concat(t[1]),o.concat(t[2]),i.concat(t[3]),e.concat(r)]}return[c,0,u,o,i,e]},[[],0,[],[],[],[]],t);return la(e[7],i[5],va([e[3],2],ha([e[6],i[4]],va([e[2],3],ha([e[5],i[3]],va([e[1],2],ha([e[4],i[2]],n))))))),[r,i[0]]}(r,n,t);return function(n,t,r){return Di(function(n){var t=fu(n[0]);return r.bindTexture(r.TEXTURE_2D,t),Ya(n[1],n[2],r),0},n),r}(i[1],i[0],r)}function Ha(n,t,r){var e=Ou(t);r.useProgram(e[1][0]);var i=function(n,t,r){var e=Ou(r),i=t[3],o=e[1];return la(o[7],i,va([o[3],2],ha([o[6],t[2]],va([o[2],3],ha([o[5],t[1]],va([o[1],2],ha([o[4],t[0]],n))))))),[r,[i.length]]}(r,n,t);return function(n,t,r){var e=Ou(t);return r.bindTexture(r.TEXTURE_2D,e[3]),Ya(n[0],0,r)}(i[1],i[0],r)}function Wa(n,t,r){var e=Ou(t);return r.useProgram(e[2][0]),function(n,t){return Ya(n[0],0,t)}(function(n,t,r){var e=t[2],i=Ou(r)[2];return la(i[5],e,va([i[2],3],ha([i[4],t[1]],va([i[1],2],ha([i[3],t[0]],n))))),[r,[e.length]]}(r,n,t)[1],r)}function Va(n,t,r){var i=e.a(t[0],r);!function(n){var t=n.getExtension("OES_vertex_array_object");null==t||t.bindVertexArrayOES(null)}(n);var o=function(n){var t=Hu(n),r=Wu(n),e=Gu(n);return[n,Pi(function(n,t){var r=fa(n[0])+n[1]|0;return[t[1],r,tu([t[0],t[1],t[2],t[3],t[4].map(function(n){return n+r|0})],n[2])]},[[],0,[]],qe(r))[2],t,e]}(function(n,t){var r=Ou(t);return[t[0],t[1],[r[0],r[1],r[2],r[3],[De(n.getParameter(n.CURRENT_PROGRAM)),n.getParameter(n.ELEMENT_ARRAY_BUFFER_BINDING),n.getParameter(n.ARRAY_BUFFER_BINDING),De(n.getParameter(n.TEXTURE_BINDING_2D)),n.isEnabled(n.DEPTH_TEST),n.isEnabled(n.BLEND)]],t[3],t[4],t[5],t[6],t[7]]}(n,i)),u=o[0];return Ou(u),function(n){n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}(n),function(n,t){var r=fu(Ou(n)[4]),e=r[3],i=r[0];t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r[1]),t.bindBuffer(t.ARRAY_BUFFER,r[2]),void 0!==i&&t.useProgram(Re(i)),void 0!==e&&t.bindTexture(t.TEXTURE_2D,Re(e)),r[4]?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),r[5]?t.enable(t.BLEND):t.disable(t.BLEND)}(u,Wa(o[3],u,Ha(o[2],u,Ga(o[1],u,n)))),e.b(t[1],u,r)}function ja(n){return[n[0],n[1],n[2],n[3],n[4],n[5],[[[],0]],n[7]]}function Xa(n,t,r,i,o){var u=i[1],a=i[0],c=e.a(a,o);return!aa[0](c)?o:Va(n,[a,u],function(n,t,r){var i=e.a(t,r);return Pi(function(t,r){return r[0](r[1],n,t)},r,i[4][0])}(r,a,function(n,t,r){var i=e.a(t[0],r);return e.b(t[1],[i[0],i[1],i[2],Oa(),i[4],n,i[6],i[7]],r)}(t,[a,u],o)))}function za(n){return[["fnt","bitmap",Ve(0),Ve(0),[],Ve(0),[void 0,void 0,[]]],void 0,void 0,Oa(),[[],{label:Ma,image:Na,box:Ia,button:su[2],beginGroup:eu,endGroup:iu,unsafeGetCustomControl:uu}],[!1,!1,[0,0],[0,0]],[[[],0]],[[{getIOData:Yu,getPointUp:function(n){return n[0]},getPointDown:function(n){return n[1]},getPointPosition:function(n){return n[2]},isClick:pa,drawBox:da,drawText:Ra,drawImage:Pa,parseShowData:ka,unsafeGetSkinData:gu,unsafeGetSingleCustomStyleDataMap:bu,unsafeGetCustomStyleData:Tu,hasSingleCustomStyleName:xu,parseSingleCustomStyleName:Su,hasCustomStyleData:Au},Bi(0)],[Bi(0)]]]}function qa(n){return n[44][3]}function Ja(n){return ji(n).data}function $a(n,t,r){return Ii(function(n){var e,i=so(r),o=Ja(t),u=(e=function(n){return{alpha:n[0],depth:n[1],stencil:n[2],antialias:n[3],premultipliedAlpha:n[4],preserveDrawingBuffer:n[5]}}(o.contextConfig),o.canvas.getContext("webgl",e));return i[4]=function(n,t){return[Se(n),t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}(u,i[4]),co(r,i),t})}function Ka(n,t){var r;switch(n){case"element_index_uint":r=function(n){return null!=n.getExtension("OES_element_index_uint")||(_e(de("_getExtension","not support OES_element_index_uint extension","","","")),!1)}(t);break;case"instanced_arrays":r=t.getExtension("ANGLE_instanced_arrays");break;default:r=t.getExtension(n)}return null==r?void 0:Se(r)}function Za(n,t){return function(n,t){var r=n.VERTEX_SHADER,e=n.FRAGMENT_SHADER,i=n.HIGH_FLOAT,o=n.MEDIUM_FLOAT,u=n.getShaderPrecisionFormat(r,i),a=n.getShaderPrecisionFormat(r,o),c=n.getShaderPrecisionFormat(e,i),s=n.getShaderPrecisionFormat(e,o),f=u.precision>0&&c.precision>0,h=a.precision>0&&s.precision>0;return f?[t[0],t[1],0,t[3]]:h?(se("not support highp, using mediump instead"),[t[0],t[1],1,t[3]]):(se("not support highp and mediump, using lowp instead"),[t[0],t[1],2,t[3]])}(n,function(n,t){return[t[0],t[1],t[2],n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)]}(n,t))}function Qa(n,t){return Za(n,function(n,t){return[Ka("instanced_arrays",n),Ka("element_index_uint",n),t[2],t[3]]}(n,t))}var nc=ui;function tc(n,t,r){return Ii(function(n){var e=so(r);return Ja(t),e[3]=Qa(io(e[4]),e[3]),co(r,e),t})}function rc(n,t,r){return[t[0]-r[0],t[1]-r[1],t[2]-r[2]]}function ec(n,t){var r=t[2],e=t[1],i=t[0],o=n[2],u=n[1],a=n[0];return[u*r-e*o,o*i-r*a,a*e-i*u]}function ic(n){return Pu()}function oc(n,t){var r=n[0],e=n[1],i=n[2],o=n[4],u=n[5],a=n[6],c=n[8],s=n[9],f=n[10],h=f*u-a*s,v=-f*e+i*s,l=a*e-i*u,p=-f*o+a*c,d=f*r-i*c,_=-a*r+i*o,g=s*o-u*c,y=-s*r+e*c,m=u*r-e*o,E=r*h+e*p+i*g;return 0!==E?(E=1/E,t[0]=h*E,t[1]=v*E,t[2]=l*E,t[3]=p*E,t[4]=d*E,t[5]=_*E,t[6]=g*E,t[7]=y*E,t[8]=m*E,t):new Float32Array([0,0,0,0,0,0,0,0,0])}var uc=Eo;function ac(n,t){var r=bo(n,t);return[Te(r),r]}function cc(n,t,r,e){return si(me(n,"not"),function(n){var r=To(t,e);return void 0!==r?li(Pi(function(n,t){var r=n[0];return void 0!==To(t,r)?[r,!0]:[mo(t,!0,r),n[1]]},[wo(0),!1],r)[1]):0})}function sc(n){return to(n,3)}function fc(n){return n<<1}function hc(n){return 0+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function vc(n){return hc(n)+to(n<<1,Float32Array.BYTES_PER_ELEMENT)|0}function lc(n){return n<<0}function pc(n){return vc(n)+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function dc(n){return n<<0}function _c(n){return pc(n)+to(n<<0,Uint16Array.BYTES_PER_ELEMENT)|0}function gc(n){return n<<1}function yc(n){return _c(n)+to(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function mc(n){return n<<1}function Ec(n,t){return yc(n)+to(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function wc(n){return n<<1}function bc(n,t){return Ec(n,t)+to(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function Tc(n){return n<<1}function Ac(n,t){return bc(n,t)+to(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function xc(n){return n<<1}function Sc(n,t,r){return[new Float32Array(n,0,sc(t)),new Float32Array(n,hc(t),fc(t)),new Float32Array(n,vc(t),sc(t)),new Uint16Array(n,pc(t),lc(t)),new Uint32Array(n,_c(t),dc(t)),new Uint32Array(n,yc(t),gc(r)),new Uint32Array(n,Ec(t,r),mc(r)),new Uint32Array(n,bc(t,r),wc(r)),new Uint32Array(n,Ac(t,r),Tc(r))]}function Dc(n){return n<<0}function Lc(n){return n<<0}function Rc(n){return 0+to(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function Pc(n){return n<<0}function kc(n,t){return[new Uint8Array(n,0,Dc(t)),new Uint8Array(n,Rc(t),Lc(t))]}function Mc(n,t){return Co(Pc(n),t)}function Nc(n){return to(n,3)}function Ic(n){return to(n,3)}function Uc(n){return 0+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Cc(n){return n<<0}function Bc(n){return Uc(n)+to(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Fc(n){return n<<0}function Oc(n){return Bc(n)+to(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Yc(n){return n<<0}function Gc(n){return Oc(n)+to(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Hc(n){return n<<0}function Wc(n){return Gc(n)+to(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Vc(n){return n<<0}function jc(n,t){return[new Float32Array(n,0,Ic(t)),new Float32Array(n,Uc(t),Cc(t)),new Float32Array(n,Bc(t),Fc(t)),new Float32Array(n,Oc(t),Yc(t)),new Float32Array(n,Gc(t),Hc(t)),new Float32Array(n,Wc(t),Vc(t))]}function Xc(n){return n<<0}function zc(n,t){return Fo(n<<0,t)}function qc(n,t,r){return Wo(n<<0,t,r)}function Jc(n){return n<<0}function $c(n){return n<<0}function Kc(n){return to(n,3)}function Zc(n){return 0+to(Xc(n),Uint32Array.BYTES_PER_ELEMENT)|0}function Qc(n){return to(n,3)}function ns(n){return n<<0}function ts(n){return Zc(n)+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function rs(n){return n<<0}function es(n){return n<<0}function is(n){return ts(n)+to(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function os(n){return n<<0}function us(n,t){return[new Uint32Array(n,0,Xc(t)),new Float32Array(n,Zc(t),Kc(t)),new Uint8Array(n,ts(t),ns(t)),new Float32Array(n,is(t),es(t))]}function as(n){return 429496729!==n}function cs(n){return to(n,3)}function ss(n){return to(Xc(n),Uint32Array.BYTES_PER_ELEMENT)}function fs(n){return to(n,3)}function hs(n){return to(Xc(n),Uint32Array.BYTES_PER_ELEMENT)+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function vs(n){return n<<0}function ls(n){return hs(n)+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function ps(n){return to(n,3)}function ds(n){return to(n,3)}function _s(n){return n<<0}function gs(n){return ls(n)+to(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function ys(n){return gs(n)+to(Jc(n),Uint32Array.BYTES_PER_ELEMENT)|0}var ms=Jc,Es=Jc;function ws(n,t){return[new Uint32Array(n,0,Xc(t)),new Float32Array(n,ss(t),cs(t)),new Float32Array(n,hs(t),fs(t)),new Float32Array(n,ls(t),vs(t)),new Uint32Array(n,gs(t),ms(t)),new Uint32Array(n,ys(t),Es(t))]}function bs(n,t){return Yo(ps(n),t)}function Ts(n,t){return Yo(ds(n),t)}function As(n,t){return Oo(_s(n),t)}var xs=function(n,t){return Fo($c(n),t)};function Ss(n){return to(n,3)}function Ds(n){return n<<0}function Ls(n){return to(n,3)}function Rs(n){return 0+to(to(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Ps(n){return n<<0}function ks(n,t){return[new Float32Array(n,0,Ls(t)),new Float32Array(n,Rs(t),Ps(t))]}var Ms=to;function Ns(n){return n<<0}function Is(n,t){return 0+to(to(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}var Us=to;function Cs(n){return n<<0}function Bs(n,t,r){return[new Uint32Array(n,0,Ms(t,r)),new Uint8Array(n,Is(t,r),Ns(t))]}function Fs(n,t){return!!n&&nc(t[0])}var Os=bo;function Ys(n){switch(n){case"vec2":return 2;case"vec3":return 3;default:return _e(de("getBufferSizeByType","invalide type_: "+String(n),"","",""))}}function Gs(n,t,r){var e,i,o;return(i=!0,(e=t)>=(o=r).length||ri(o[e],i))?(n.enableVertexAttribArray(t),r[t]=!0,0):0}function Hs(n,t,r){return n.uniformMatrix3fv(t,!1,r),0}function Ws(n,t,r){return n.uniformMatrix4fv(t,!1,r),0}var Vs=To;function js(n,t,r){var e=r[2],i=r[1],o=r[0],u=Je(t,n);return u[0]?function(n,t,r,e){var i=!1;return n[0]!==t&&(n[0]=t,i=!0),n[1]!==r&&(n[1]=r,i=!0),n[2]!==e&&(n[2]=e,i=!0),i}(u[1],o,i,e):(We(t,[o,i,e],n),!0)}function Xs(n,t,r){var e=Je(t,n);return!(e[0]&&e[1]===r)&&(We(t,r,n),!0)}function zs(n,t,r,e){return Xs(t,r[0],e)?(n.uniform1f(r[1],e),0):0}function qs(n,t,r,e){return Xs(t,r[0],e)?(n.uniform1i(r[1],e),0):0}function Js(n,t,r,e){fi(function(n){return si(me("valueArr.length === 3","not"),function(n){return Ti[0](e.length,3)})},xi(Ai));var i=be.b(e,0),o=be.b(e,1),u=be.b(e,2);return js(t,r[0],[i,o,u])?(n.uniform3f(r[1],i,o,u),0):0}function $s(n,t,r,e){return js(t,r[0],e)?(n.uniform3f(r[1],e[0],e[1],e[2]),0):0}function Ks(n){switch(n){case"mat3":return Hs;case"mat4":return Ws;default:return _e(de("getSendNoCachableDataByType","unknown type:"+String(n),"","",""))}}function Zs(n){switch(n){case"float":return zs;case"float3":return Js;case"sampler2D":case"samplerCube":return qs;case"vec3":return $s;default:return _e(de("getSendCachableDataByType","unknown type:"+String(n),"","",""))}}function Qs(n,t,r){return[t[0],t[1],Hi([n[1],r,Ks(n[0])],t[2]),t[3],t[4],t[5],t[6]]}function nf(n,t,r){return[t[0],t[1],t[2],t[3],Hi([n[0],n[1],n[2],r],t[4]),t[5],t[6]]}function tf(n){var t=n[0];return n[0]=t+1|0,hi(function(n){return si(me("not equal default shader index:"+String(429496729)+" ","equal"),function(t){return Ti[3](n,429496729)})},xi(Ai),t)}function rf(n){return n[0]}function ef(n){return n[1]}var of=function(n,t,r,i){var o=i[2],u=i[1],a=t[0],c=rf(u);return r[2](a,e.d(r[0],a,[n,r[4](a,[t[1],t[2]],[c,e.a(r[3],c),ef(u)],o)],r[1],o),i[0]),o};function uf(n,t,r,e){var i=e[1],o=t[1],u=t[0];return fi(function(n){return si(me("not dispose any material before init","do"),function(n){return vi(function(n){return 0===n.length}(i))})},xi(Ai)),Pi(function(t,e){return r(n,[e,Os(e,u),o],t)},e[2],Gi(0,e[0]-1|0))}function af(n,t,r){return n.shaderSource(r,t),n.compileShader(r),he(function(e){if(!1===n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r),o=String(i)+"";ve(function(n){return fe("shader info log",o)},xi(Ai));var u=String(t)+"";return ve(function(n){return fe("glsl source",u)},xi(Ai))}return 0},xi(Ai)),r}function cf(n,t,r,e){var i=af(r,n,r.createShader(r.VERTEX_SHADER)),o=af(r,t,r.createShader(r.FRAGMENT_SHADER));return r.attachShader(e,i),r.attachShader(e,o),r.bindAttribLocation(e,0,"a_position"),function(n,t){t.linkProgram(n),he(function(r){if(!1===t.getProgramParameter(n,t.LINK_STATUS)){var e=t.getProgramInfoLog(n);return _e(de("link program error",String(e)+"","","",""))}return 0},xi(Ai))}(e,r),r.deleteShader(i),r.deleteShader(o),e}function sf(n,t,r){return mo(n,r,t[0]),r}function ff(n,t,r){var e,i,o,u,a,c=r[3];return i=t,u=ac(e=n,o=c),a=u[1],u[0]?a.includes(i)||Hi(i,a):mo(e,[i],o),hi(function(t){var r=t[3];return cc("material should only use the same shaderIndex once",n,0,r)},xi(Ai),r)}function hf(n){for(var t="",r=0,e=n.length-1|0;r<=e;++r)t+=be.b(n,r)[0];return t}function vf(n,t,r,e){var i=t[1],o=t[0],u=n[0];!function(n,t,r){We(n,t,r[2])}(n[1],u,e[0]);var a=r[0](i,r[1],[e[2],e[5]]),c=function(n,t,r,e){return cf(r[0],r[1],n,sf(t,e,n.createProgram()))}(o,u,[a[0],a[1]],e[1]),s=r[2]([o,u,c],i,[e[3],e[4]]);return r[3](o,[c,u,i],s),u}function lf(n,t,r,e){var i=e[0],o=t[1],u=hf(o),a=function(n,t){var r=t[2];return je(n,r)}(u,i);if(void 0!==a){var c=a;return ff(c,n,i),c}var s=tf(i),f=ff(s,n,i);return vf([s,u],[t[0],o],[r[0],r[1],r[2],r[3]],[f,e[1],e[2],e[3],e[4],e[5]])}function pf(n,t,r,e){return lf(n,[t[0],t[1]],[r[0],r[1],r[2],r[3]],[e[0],e[1],e[2],e[3],e[4],e[5]])}function df(n){return _e(de("getHandle","unknown handle name: "+String(n),"","",""))}function _f(n,t,r){var e=n[2],i=n[1],o=je(i,e);if(void 0!==o)return Re(o);var u=t(n[0],i,r);return We(i,u,e),u}function gf(n,t,r){return r.getAttribLocation(n,t)}function yf(n,t,r){return r.getUniformLocation(n,t)}function mf(n,t,r,e){return _f([n,t,r],gf,e)}function Ef(n,t,r,e){return _f([n,t,r],yf,e)}function wf(n,t){return To(n,t[0])}function bf(n,t,r){return mo(n,t,r[0]),r}function Tf(n,t,r){return mo(n,t,r[1]),r}function Af(n){return null!==n}function xf(n,t,r){var e=ac(n,r);if(e[0])return e[1];var i,o=(i=t,function(n,t){return t.subarray(n,n+16|0)}(Uo(n),i));return mo(n,o,r),o}function Sf(n,t,r,e){var i=r[1],o=ac(n,i);if(o[0])return o[1];var u,a,c=(a=(u=e)[2].pop(),[u,Ae(a),a]),s=function(n,t,r,e){return i=oc(e(n,t,r[0]),r[1]),o=i[1],u=i[2],a=i[5],i[1]=i[3],i[2]=i[6],i[3]=o,i[5]=i[7],i[6]=u,i[7]=a,i;var i,o,u,a}(n,t,[r[0],c[1]?c[2]:new Float32Array([1,0,0,1,0,0,1,0,0])],xf);return mo(n,s,i),s}function Df(n,t){var r=t[5];return xf(n,r[0],r[1])}function Lf(n,t){var r=t[5];return Sf(n,r[0],[r[1],r[2]],t[7])}function Rf(n,t){return hi(function(n){return si(me("uniform send record exist","not"),function(t){return di(n)})},xi(Ai),bo(n,t))}function Pf(n,t,r){return[Hi([n[0],r,Ks(n[1])],t[0]),t[1],t[2],t[3],t[4],t[5],t[6]]}function kf(n,t){return Rf(n,t[3])}function Mf(n,t,r){return[t[0],t[1],t[2],t[3],t[4],Hi([n,r[0],r[1]],t[5]),t[6]]}function Nf(n,t,r){return mo(n,r,t),0}function If(n,t){var r=n[3],e=n[1],i=n[0];switch(i){case"instance_mMatrix":return Mf(e,t,[Df,Ws]);case"instance_normalMatrix":return Mf(e,t,[Lf,Hs]);case"mMatrix":return Pf([e,r],t,Df);case"normalMatrix":return Pf([e,r],t,Lf);default:return _e(de("addModelSendData","unknow field:"+String(i),"","",""))}}function Uf(n){return ji(n[0])[0]}function Cf(n){return ji(n[0])[1]}function Bf(n){return ji(n[0])[2]}function Ff(n,t){var r=n[3],e=n[1],i=n[0];switch(i){case"pMatrix":return Qs([r,e],t,Cf);case"position":return function(n,t,r){return[t[0],t[1],t[2],Hi([n[0],n[1],n[2],r,Zs(n[3])],t[3]),t[4],t[5],t[6]]}([n[4],n[2],e,r],t,Bf);case"vMatrix":return Qs([r,e],t,Uf);default:return _e(de("_addCameraSendData","unknow field:"+String(i),"","",""))}}function Of(n,t){return r=n,e=t[1][1],Yo(Qc(r),e);var r,e}function Yf(n,t){return r=n,e=t[1][3],Oo(os(r),e);var r,e}function Gf(n,t){return bs(n,t[2][3])}function Hf(n,t){return Ts(n,t[2][4])}function Wf(n,t){return As(n,t[2][5])}function Vf(n,t){return fi(function(r){return si(me("unitMap has unit","not"),function(r){return vi(Ao(n,t))})},xi(Ai)),bo(n,t)}function jf(n,t){return Vf(n,t[2][0])}function Xf(n,t){return Vf(n,t[2][1])}function zf(n,t,r){return[t[0],Hi([n[0],n[1],n[2],r,Zs(n[3])],t[1]),t[2],t[3],t[4],t[5],t[6]]}function qf(n,t,r){return[t[0],Hi([n[0],n[1],n[2],r,qs],t[1]),t[2],t[3],t[4],t[5],t[6]]}function Jf(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0],a=0;switch(u){case"shininess":return zf([r,i,o,e],t,Wf);case"diffuseColor":case"specularColor":a=1;break;case"diffuseMap":case"specularMap":a=2;break;default:return _e(de("_addLightMaterialSendData","unknow field:"+String(u),"","",""))}switch(a){case 1:return function(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"diffuseColor":return zf([u,o,i,e],r,Gf);case"specularColor":return zf([u,o,i,e],r,Hf);default:throw[Ze.f,["HandleMaterialUniformConfigDataService.re",30,2]]}}(u,[r,i,o,e],t);case 2:return function(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"diffuseMap":return qf([u,o,i,e],r,jf);case"specularMap":return qf([u,o,i,e],r,Xf);default:return _e(de("_addLightMaterialSendData","unknow field:"+String(n),"","",""))}}(u,[r,i,o,e],t)}}function $f(n){return void 0!==n?Re(n):Ve(0)}function Kf(n){return t=[0,0,0],e=Uf(n),(r=e.slice())[12]=t[0],r[13]=t[1],r[14]=t[2],r;var t,r,e}function Zf(n){return 0}function Qf(n){return n[6][0][0]}function nh(n,t,r){return[t[0],t[1],t[2],t[3],t[4],t[5],Hi([n[0],n[1],n[2],r[0],r[1]],t[6])]}function th(n,t,r){var e=t[8],i=r[5];return function(n,t,r){mo(n,r,t)}(n,t[3],r[0]),function(n,t,r){mo(n,r,t)}(n,t[4],r[1]),function(n,t,r){mo(n,r,t)}(n,t[5],r[2]),function(n,t,r){mo(n,r,t)}(n,t[6],r[3]),function(n,t,r){mo(n,r,t)}(n,t[7],r[4]),Nf(n,e,i),Nf(n,e,i),function(n,t,r){mo(n,r,t)}(n,t[9],r[6]),0}function rh(n,t,r,e){var i=e[1],o=e[0],u=t[1],a=t[0];return Pi(function(n,t){var e=t[2];if(Xi(e))return n;var c=zi(e);return r([a,u,o,i],n,c[0])},[[],[],[],[],[],[],[]],n)}function eh(n,t,r,e){var i=e[1],o=e[0],u=t[1],a=$f(function(n,t){return To(n,t[1])}(u,i));return[th(u,o,r(t[2],n,t[0],[a,$f(Vs(u,o[2]))])),Tf(u,a,i)]}function ih(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Xi(r)?t:Pi(function(n,t){var r=t[3],a=t[2],c=t[1],s=t[0];switch(r){case"basicMaterial":return function(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0];switch(u){case"alpha":return zf([r,i,o,e],t,Yf);case"color":return zf([r,i,o,e],t,Of);default:return _e(de("_addBasicMaterialSendData","unknow field:"+String(u),"","",""))}}([c,Ef(o,s,i,u),s,a,e],n);case"camera":return Ff([c,Ef(o,s,i,u),s,a,e],n);case"model":return If([c,Ef(o,s,i,u),s,a,e],n);default:return _e(de("_readUniforms","unknow from:"+String(r),"","",""))}},t,zi(r))}function oh(n,t,r,e){return rh(n,[t,r],ih,[e[0],e[1]])}function uh(n,t,r){return eh(n,[t[0],t[1],t[2]],oh,r)}function ah(n,t,r,e){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),0}function ch(n,t,r,e){var i=t[1];return function(n){return-1!==n}(i)?(n.bindBuffer(n.ARRAY_BUFFER,r),n.vertexAttribPointer(i,t[0],n.FLOAT,!1,0,0),Gs(n,i,e[0]),0):0}function sh(n,t){return[t[0],Hi([mf(n[1],n[2],n[3],n[0]),4,function(n){return n<<4}],t[1])]}function fh(n,t){return[Hi([mf(n[1],n[2],n[5],n[0]),Ys(n[4]),n[3],ch],t[0]),t[1]]}function hh(n,t){return[Hi([0,0,n,ah],t[0]),t[1]]}function vh(n,t,r,e){var i=t[1],o=t[0];return Pi(function(n,t){var u=t[2];if(Xi(u))return n;var a=zi(u);return r([o,i,e],n,a[1])},[[],[]],n)}function lh(n,t,r,e){return mo(n,e[0],r[0]),mo(n,e[1],r[1]),r}function ph(n,t,r,e){var i=e[1],o=n[1],u=$f(wf(o,i));return[lh(o,0,e[0],r(t,n[0],n[2],u)),bf(o,u,i)]}function dh(n,t,r){var e=n[2],i=n[1],o=n[0];return Xi(r)?t:Pi(function(n,t){var r=t[2],u=t[1],a=t[0];if(!Xi(a)&&!Xi(r)){var c=zi(a),s=zi(r);return u>=5?sh([o,i,c,e],n):fh([o,i,c,u,s,e],n)}return hh(u,n)},t,zi(r))}function _h(n,t,r,e){return vh(n,[t,r],dh,e)}function gh(n,t,r){return ph(n,t,_h,r)}function yh(n,t,r,e){return pf(n,[t[0],t[1]],[r,df,gh,uh],[e[2],e[3],e[4],e[5],e[6],e[7]])}function mh(n,t){return ai(je(n,t[0]))}function Eh(n,t,r,e){return[n[0],n[1],t,r[0],r[1],e]}var wh="void main(void){\n",bh="}\n";function Th(n,t){return t.indexOf(n)>-1}function Ah(n,t){var r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],a=n[5],c=t[0],s=t[1],f=t[2],h=t[3],v=t[4],l=t[5];return n[0]=r+c,n[1]=e+s,n[2]=i+f,n[3]=o+h,n[4]=u+v,n[5]=a+l,n}function xh(n,t){return n[5]+t}function Sh(n,t){var r=n[2];return r+"\n"+function(n,t,r,e){return n.reduce(function(n,i){var o=i[2];if(Xi(o))return n;var u=zi(o)[0];return Xi(u)?n:n+zi(u).filter(function(n){var i=n[0];return!(!Th(i,t)&&!Th(i,r))||Th(i,e)}).reduce(function(n,t){var r=function(n){return"float3"===n?"vec3":n}(t[2]);return n+"uniform "+String(r)+" "+String(t[0])+";\n"},"")},"")}(t,r,n[4],n[5])}function Dh(n){return n[0]+(n[1]+(n[2]+(n[3]+(n[4]+n[5]))))}function Lh(n,t,r,i){return Pi(function(n,t){var o=t[1];return Xi(o)?n:Pi(function(n,t){return function(n,t,r,i){var o=t[1],u=t[0],a=n[1],c=n[0];switch(u){case"fs":return[c,Ah(a,mh(o,i))];case"fs_function":return[c,Ah(a,e.a(r,o))];case"vs":return[Ah(c,mh(o,i)),a];case"vs_function":return[Ah(c,e.a(r,o)),a];default:return _e(de("buildGLSLSource","unknown glsl type: "+String(u),"","","name: "+String(o)))}}(n,[t[0],t[1]],r,i)},n,zi(o))},[n[0],n[1]],t)}function Rh(n,t,r){var e=r[0][0],i=["","","","","",""],o=["","","","","",""];i[5]=i[5]+wh,o[5]=o[5]+wh;var u=ji(e);i[0]=u+i[0],o[0]=u+o[0];var a=Lh([i,o],n,t,r[1]),c=a[1],s=a[0];return s[5]=xh(s,bh),c[5]=xh(c,bh),s[2]="\n"+(function(n){return n.reduce(function(n,t){var r=t[2];if(Xi(r))return n;var e=zi(r)[1];return Xi(e)?n:n+zi(e).reduce(function(n,t){var r=t[2],e=t[0];if(!Xi(e)&&!Xi(r)){var i=zi(e),o=zi(r);return n+"attribute "+String(o)+" "+String(i)+";\n  "}return n},"")},"")}(n)+s[2]),s[2]=Sh(s,n),c[2]=Sh(c,n),[Dh(s),Dh(c)]}function Ph(n,t){return Vi(t,n,function(t){return t[0]===n})}function kh(n,t){return pe(function(n){return le("staticBranchs",t)},xi(Ai)),_e(de("_getMaterialShaderLibDataArrByStaticBranch","unknown name:"+String(n),"","",""))}function Mh(n,t,r){var e=t[1];return Hi(Ph(n[0]?n[1]?be.b(e,1):be.b(e,2):be.b(e,0),t[0]),r)}function Nh(n,t,r,e){var i=t[0],o=n[3],u=n[1];switch(u){case"dynamic_branch":return function(n,t,r,e){var i=n[1],o=$i(t[0],i,function(n){return qi(n[0],i)}),u=r(n[0],o[1],t[2])?function(n){return n[2]}(o):function(n){return n[3]}(o);return Xi(u)?e:Hi(Ph(zi(u),t[1]),e)}([n[0],o],[t[2],i,t[3]],r[1],e);case"group":return function(n,t,r,e){return e.concat(Vi(n,t,function(n){return n[0]===t})[1].map(function(n){return Ph(n,r)}))}(n[2],o,i,e);case"static_branch":return r[0]([o,n[4],n[5]],[t[1],i],e);default:return pe(function(n){return le("shaderLibs",i)},xi(Ai)),_e(de("_getMaterialShaderLibDataArrByType","unknown type_:"+String(u),"","",""))}}function Ih(n,t,r,e){var i=r[1],o=r[0],u=t[2],a=t[0],c=a[2],s=a[1],f=a[0],h=n[2],v=n[1],l=n[0];return Pi(function(n,t){var r=t[1],a=t[0];return Xi(a)?Hi(Ph(r,u),n):Nh([l,zi(a),c,r,v,h],[u,f,s,e],[o,i],n)},[],t[1])}function Uh(n,t,r){var e=t[0],i=n[0];if("modelMatrix_instance"===i){var o=Vi(e,i,function(n){return n[0]===i});return Mh([n[1],n[2]],[t[1],o[1]],r)}return kh(i,e)}function Ch(n,t,r){return!0}function Bh(n,t,r,e){return Ih([n,t[0],t[1]],r,[Uh,Ch],e)}function Fh(n){return Vi(n[3],"render_basic",function(n){return"render_basic"===n[0]})[1]}function Oh(n,t,r){return of(n,t,[yh,Rh,qc,Fh,Bh],[r[0][2],r[1],r])}function Yh(n,t,r){var e=r[0];return uf(n,t,Oh,[e[0],e[1],r])}function Gh(n,t){var r,e=function(n){return n.length}(n);return r=e,fi(function(n){return si(me("light count: "+String(r)+" <= max count: "+String(4),"not"),function(n){return bi(0,r,4)})},xi(Ai)),r}function Hh(n){var t=function(n){return Gh(n[1])}(n[0]),r=function(n){return Gh(n[1])}(n[1]);return["","#define DIRECTION_LIGHTS_COUNT "+String(t)+"\n#define POINT_LIGHTS_COUNT "+String(r),"","","",""]}function Wh(n,t){return"defineLightCount"===t?Hh(n):_e(de("getHandle","unknown handle name: "+String(t),"","",""))}var Vh=bo;function jh(n,t){return r=n,e=t[1],Yo(Nc(r),e);var r,e}function Xh(n,t,r){var e=r[3],i=t[2],o=t[1],u=t[0];fi(function(n){return si(me("max buffer count === 4","is "+String(4)),function(n){return Ti[0](4,4)})},xi(Ai));var a=[["u_pointLights[0].position","u_pointLights[0].color","u_pointLights[0].intensity","u_pointLights[0].constant","u_pointLights[0].linear","u_pointLights[0].quadratic","u_pointLights[0].range"],["u_pointLights[1].position","u_pointLights[1].color","u_pointLights[1].intensity","u_pointLights[1].constant","u_pointLights[1].linear","u_pointLights[1].quadratic","u_pointLights[1].range"],["u_pointLights[2].position","u_pointLights[2].color","u_pointLights[2].intensity","u_pointLights[2].constant","u_pointLights[2].linear","u_pointLights[2].quadratic","u_pointLights[2].range"],["u_pointLights[3].position","u_pointLights[3].color","u_pointLights[3].intensity","u_pointLights[3].constant","u_pointLights[3].linear","u_pointLights[3].quadratic","u_pointLights[3].range"]],c=e[8];return Ri(function(t,r,e){var s=be.b(a,e),f=s[2],h=s[1],v=s[0];return $s(n,o,[v,Ef(u,v,i,n)],Vh(r,c)),Js(n,o,[h,Ef(u,h,i,n)],jh(r,t)),zs(n,o,[f,Ef(u,f,i,n)],function(n,t){return r=n,t[2][r];var r}(r,t)),function(n,t,r,e){var i=r[6],o=r[5],u=r[4],a=r[3],c=t[3],s=t[2],f=t[1],h=t[0];return zs(h,s,[a,Ef(f,a,c,h)],function(n,t){return r=n,t[3][r];var r}(n,e)),zs(h,s,[u,Ef(f,u,c,h)],function(n,t){return r=n,t[4][r];var r}(n,e)),zs(h,s,[o,Ef(f,o,c,h)],function(n,t){return r=n,t[5][r];var r}(n,e)),zs(h,s,[i,Ef(f,i,c,h)],function(n,t){return r=n,t[6][r];var r}(n,e)),e}(r,[n,u,o,i],s,t)},e,e[7]),0}function zh(n,t,r){return Js(n,t[1],["u_ambient",Ef(t[0],"u_ambient",t[2],n)],function(n){return n[0][0]}(r[1]))}var qh=bo;function Jh(n,t){return r=n,e=t[1],Yo(Ss(r),e);var r,e}function $h(n,t){return r=n,e=t[2],Oo(Ds(r),e);var r,e}function Kh(n,t,r){var e=r[2],i=t[2],o=t[1],u=t[0];fi(function(n){return si(me("max buffer count === 4","is "+String(4)),function(n){return Ti[0](4,4)})},xi(Ai));var a=[["u_directionLights[0].direction","u_directionLights[0].color","u_directionLights[0].intensity"],["u_directionLights[1].direction","u_directionLights[1].color","u_directionLights[1].intensity"],["u_directionLights[2].direction","u_directionLights[2].color","u_directionLights[2].intensity"],["u_directionLights[3].direction","u_directionLights[3].color","u_directionLights[3].intensity"]],c=e[4];return Ri(function(t,r,e){var s=be.b(a,e),f=s[2],h=s[1],v=s[0];return $s(n,o,[v,Ef(u,v,i,n)],qh(r,c)),Js(n,o,[h,Ef(u,h,i,n)],Jh(r,t)),zs(n,o,[f,Ef(u,f,i,n)],$h(r,t)),t},e,e[3]),0}function Zh(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"ambientLight":return function(n,t){var r=n[0];return"send"===r?nf([n[1],n[2],n[3]],t,zh):_e(de("_addAmbientLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);case"directionLight":return function(n,t){var r=n[0];return"send"===r?nf([n[1],n[2],n[3]],t,Kh):_e(de("_addDirectionLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);case"pointLight":return function(n,t){var r=n[0];return"send"===r?nf([n[1],n[2],n[3]],t,Xh):_e(de("_addPointLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);default:throw[Ze.f,["HandleUniformConfigDataInitLightMaterialService.re",74,2]]}}function Qh(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Xi(r)?t:Pi(function(n,t){var r=t[3],a=t[2],c=t[1],s=t[0],f=0;switch(r){case"camera":return Ff([c,Ef(o,s,i,u),s,a,e],n);case"lightMaterial":return Jf([c,Ef(o,s,i,u),s,a,e],n);case"model":return If([c,Ef(o,s,i,u),s,a,e],n);case"ambientLight":case"directionLight":case"pointLight":f=1;break;default:return _e(de("_readUniforms","unknow from:"+String(r),"","",""))}if(1===f)return Zh(r,[c,o,e,i],n)},t,zi(r))}function nv(n,t,r,e){return rh(n,[t,r],Qh,[e[0],e[1]])}function tv(n,t,r){return eh(n,[t[0],t[1],t[2]],nv,r)}function rv(n,t,r){var e=n[2],i=n[1],o=n[0];return Xi(r)?t:Pi(function(n,t){var r=t[2],u=t[1],a=t[0];if(!Xi(a)&&!Xi(r)){var c=zi(a),s=zi(r);return 4!==u?u>=5?sh([o,i,c,e],n):fh([o,i,c,u,s,e],n):function(n,t){return[t[0],Hi([mf(n[1],n[2],n[3],n[0]),3,function(n){return to(n-4|0,12)+64|0}],t[1])]}([o,i,c,e],n)}return hh(u,n)},t,zi(r))}function ev(n,t,r,e){return vh(n,[t,r],rv,e)}function iv(n,t,r){return ph(n,t,ev,r)}function ov(n,t,r,e){var i=[e[1],e[2]];return pf(n,[t[0],t[1]],[r,function(n){return Wh(i,n)},iv,tv],[e[4],e[5],e[6],e[7],e[8],e[9]])}function uv(n,t,r){var e=t[0],i=n[0],o=0;switch(i){case"modelMatrix_instance":case"normalMatrix_instance":o=1;break;default:return kh(i,e)}if(1===o){var u=Vi(e,i,function(n){return n[0]===i});return Mh([n[1],n[2]],[t[1],u[1]],r)}}function av(n,t,r){var e=r[0];switch(t){case"has_diffuse_map":return as(xs(n,e[3]));case"has_specular_map":return as(xs(n,e[4]));case"light_has_map":return!!as(xs(n,e[3]))||as(xs(n,e[4]));default:return _e(de("_isPass","unknown condition:"+String(t),"","",""))}}function cv(n,t,r,e){return Ih([n,t[0],t[1]],r,[uv,av],e)}function sv(n){return Vi(n[3],"front_render_light",function(n){return"front_render_light"===n[0]})[1]}function fv(n,t,r){return of(n,t,[ov,Rh,qc,sv,cv],[r[0][2],r[3],r])}function hv(n,t,r){var e=r[0];return uf(n,t,fv,[e[0],e[1],r])}var vv=To;var lv=mo;function pv(n,t,r){return void 0!==vv(t,r)?r:lv(t,n.createTexture(),r)}function dv(n,t,r){return Pi(function(t,r){return pv(n,r,t)},r,t)}var _v=dv;function gv(n){return n}function yv(n,t){return t+n|0}function mv(n,t){return hi(function(n){return si(me("index should >= 0","is "+String(n)),function(t){return Ti[7](n,0)})},xi(Ai),n-t|0)}function Ev(n,t){return oi(n,t)?0:1}function wv(n){return to(n,to(Uint8Array.BYTES_PER_ELEMENT,8))}var bv=wv;function Tv(n,t){return 0===t?n.UNSIGNED_BYTE:1===t?n.UNSIGNED_SHORT_5_6_5:2===t?n.UNSIGNED_SHORT_4_4_4_4:n.UNSIGNED_SHORT_5_5_5_1}function Av(n){return 1}function xv(n){return to(n,1)}function Sv(n){return to(n,1)}function Dv(n){return to(n,1)}function Lv(n){return to(n,1)}function Rv(n){return 0+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Pv(n){return to(n,1)}function kv(n){return to(n,1)}function Mv(n){return Rv(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Nv(n){return to(n,1)}function Iv(n){return to(n,1)}function Uv(n){return Mv(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Cv(n){return to(n,1)}function Bv(n){return to(n,1)}function Fv(n){return Uv(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ov(n){return to(n,1)}function Yv(n){return to(n,1)}function Gv(n){return Fv(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Hv(n){return to(n,1)}function Wv(n){return to(n,1)}function Vv(n){return Gv(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function jv(n){return to(n,1)}function Xv(n){return Vv(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function zv(n){return to(n,1)}var qv=xv;function Jv(n,t){return[new Uint8Array(n,0,Sv(t)),new Uint8Array(n,Rv(t),Lv(t)),new Uint8Array(n,Mv(t),kv(t)),new Uint8Array(n,Uv(t),Iv(t)),new Uint8Array(n,Fv(t),Bv(t)),new Uint8Array(n,Gv(t),Yv(t)),new Uint8Array(n,Vv(t),Wv(t)),new Uint8Array(n,Xv(t),jv(t))]}function $v(n,t,r){return Ho(xv(n),t,r)}function Kv(n,t){return Co(Dv(n),t)}function Zv(n,t){return Co(Pv(n),t)}function Qv(n,t){return Co(Nv(n),t)}function nl(n,t){return Co(Cv(n),t)}function tl(n,t){return Co(qv(n),t)}function rl(n,t){return 1===Co(zv(n),t)}function el(n,t){return Co(Ov(n),t)}function il(n,t){return Co(Hv(n),t)}function ol(n){return to(n,1)}function ul(n,t){return bv(n)+0|0}function al(n){return to(n,1)}function cl(n){return to(n,1)}function sl(n,t){return(bv(n)+0|0)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function fl(n){return to(n,1)}function hl(n){return to(n,1)}function vl(n,t){return sl(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ll(n){return to(n,1)}function pl(n){return to(n,1)}function dl(n,t){return vl(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function _l(n){return to(n,1)}function gl(n){return to(n,1)}function yl(n,t){return dl(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ml(n){return to(n,1)}function El(n){return to(n,1)}function wl(n,t){return yl(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function bl(n){return to(n,1)}function Tl(n){return to(n,1)}function Al(n,t){return wl(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function xl(n){return to(n,1)}function Sl(n,t){return Al(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Dl(n){return to(n,1)}function Ll(n){return to(n,1)}function Rl(n,t){return Sl(n,t)+to(to(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Pl(n){return to(n,1)}function kl(n){return to(n,1)}function Ml(n,t){return Rl(n,t)+to(to(t,1),Uint16Array.BYTES_PER_ELEMENT)|0}function Nl(n){return to(n,1)}var Il=Av,Ul=xv;function Cl(n,t,r){return[new Uint8Array(n,ul(t),ol(r)),new Uint8Array(n,sl(t,r),cl(r)),new Uint8Array(n,vl(t,r),hl(r)),new Uint8Array(n,dl(t,r),pl(r)),new Uint8Array(n,yl(t,r),gl(r)),new Uint8Array(n,wl(t,r),El(r)),new Uint8Array(n,Al(t,r),Tl(r)),new Uint8Array(n,Sl(t,r),xl(r)),new Uint16Array(n,Rl(t,r),Ll(r)),new Uint16Array(n,Ml(t,r),kl(r))]}function Bl(n,t){return Co(Ul(n),t)}function Fl(n){return to(n,1)}function Ol(n){return to(n,1)}function Yl(n){return to(n,1)}function Gl(n){return 0+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Hl(n){return to(n,1)}function Wl(n){return to(n,1)}function Vl(n){return Gl(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function jl(n){return to(n,1)}function Xl(n){return to(n,1)}function zl(n){return Vl(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ql(n){return to(n,1)}function Jl(n){return to(n,1)}function $l(n){return to(n,1)}function Kl(n){return zl(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Zl(n){return Kl(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ql(n){return Zl(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function np(n){return Ql(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function tp(n){return np(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function rp(n){return Ql(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ep(n){return rp(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ip(n){return to(n,1)}function op(n){return to(n,1)}function up(n){return ep(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ap(n){return up(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function cp(n){return ap(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function sp(n){return cp(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function fp(n){return sp(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function hp(n){return to(n,1)}function vp(n){return fp(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function lp(n){return to(n,1)}function pp(n){return vp(n)+to(to(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function dp(n){return to(n,1)}var _p=Av,gp=xv;function yp(n,t){return[new Uint8Array(n,0,Fl(t)),new Uint8Array(n,Gl(t),Yl(t)),new Uint8Array(n,Vl(t),Wl(t)),new Uint8Array(n,zl(t),Xl(t)),new Uint8Array(n,Kl(t),$l(t)),new Uint8Array(n,Zl(t),$l(t)),new Uint8Array(n,Ql(t),$l(t)),new Uint8Array(n,np(t),$l(t)),new Uint8Array(n,tp(t),$l(t)),new Uint8Array(n,rp(t),$l(t)),new Uint8Array(n,ep(t),op(t)),new Uint8Array(n,up(t),op(t)),new Uint8Array(n,ap(t),op(t)),new Uint8Array(n,cp(t),op(t)),new Uint8Array(n,sp(t),op(t)),new Uint8Array(n,fp(t),op(t)),new Uint8Array(n,vp(t),hp(t)),new Uint8Array(n,pp(t),lp(t))]}function mp(n,t){return Co(Ol(n),t)}function Ep(n,t){return Co(Hl(n),t)}function wp(n,t){return Co(jl(n),t)}function bp(n,t){return Co(ql(n),t)}function Tp(n,t){return Co(gp(n),t)}function Ap(n,t){return 1===Co(dp(n),t)}function xp(n,t){return Co(Jl(n),t)}function Sp(n,t){return Co(ip(n),t)}var Dp=bo;function Lp(n,t){return hi(function(n){var t=n[1],r=n[0];return si(me("has info data","not"),function(n){return di(r),di(t)}),si(me("endIndex >= startIndex","is "+String(t)),function(n){return Ti[7](t,r)})},xi(Ai),[Fo(n,t),Fo(n+1|0,t)])}function Rp(n,t){var r=Lp(n,t);return r[1]>r[0]}function Pp(n,t,r){var e,i,o,u=Lp(n,r);return e=t,i=u[0],o=u[1],e.slice(i,o)}function kp(n,t,r){var e,i,o,u=Lp(n,r);return e=t,i=u[0],o=u[1],e.slice(i,o)}function Mp(n,t,r){var e,i,o,u=Lp(n,r);return e=t,i=u[0],o=u[1],e.slice(i,o)}function Np(n,t){return Rp(xc(n),t)}ta[4],ta[5],ta[1],ta[2],ra[0],ra[1];var Ip=function(n,t){var r=t[0];return We(r[0],n,r[2]),t},Up=function(n,t){var r=t[0];return We(r[1],n,r[3]),t},Cp=function(n,t){var r=t[0];return[[r[0],r[1],r[2],r[3],n,r[5],r[6]],t[1],t[2],t[3],t[4],t[5],t[6],t[7]]};var Bp=za,Fp=function(n,t,r){if(!aa[0](r))return r;var e=Mu(Jo,$o,n,n.createProgram()),i=Mu(Ko,Zo,n,n.createProgram()),o=Mu(Qo,nu,n,n.createProgram()),u=function(n,t){var r=n.createTexture(),e=n.TEXTURE_2D;n.bindTexture(e,r),n.texParameteri(e,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(e,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(e,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(e,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var i=n.RGBA;return n.texImage2D(e,0,i,i,n.UNSIGNED_BYTE,t),r}(n,function(n){return fu(ia(n))}(r));Fa(n,e,t),Fa(n,i,t),function(n,t,r){n.useProgram(t),Ba(n,t,r)}(n,o,t);var a=Ru(su[1](0),su[0](0),Lu(_u(r))),c=a[0],s=a[0];return[[s[0],s[1],s[2],s[3],s[4],oa(n,c[4],c[5]),s[6]],a[1],[[e,n.getAttribLocation(e,"a_position"),n.getAttribLocation(e,"a_color"),n.getAttribLocation(e,"a_texCoord"),Ua(n),Ua(n),Ua(n),Ca(n)],[i,n.getAttribLocation(i,"a_position"),n.getAttribLocation(i,"a_color"),n.getAttribLocation(i,"a_texCoord"),Ua(n),Ua(n),Ua(n),Ca(n)],[o,n.getAttribLocation(o,"a_position"),n.getAttribLocation(o,"a_color"),Ua(n),Ua(n),Ca(n)],u,void 0],a[3],a[4],a[5],a[6],a[7]]},Op=function(n,t,r,e,i){var o=i[4];return ja([i[0],i[1],i[2],i[3],[tu([e,t,r,n],i[4][0]).sort(function(n,t){return n[2]-t[2]|0}),o[1]],i[5],i[6],i[7]])},Yp=function(n){var t=n[4];return ja([n[0],n[1],n[2],n[3],[[],t[1]],n[5],n[6],n[7]])},Gp=function(n,t){return du((r=n,e=t[7][1][0],Pi(function(n,t){return Ui(t[0],t[1],n)},e,Yi(r))),t);var r,e};function Hp(n,t){return Pi(function(n,t){return Ru(t[0],t[1],n)},t,Yi(n))}var Wp=qa;function Vp(n,t){var r=be.a(t),e=t[44];return r[44]=[e[0],e[1],e[2],n],r}function jp(n,t){var r=be.a(t),e=t[44],i=t[44][2];return r[44]=[e[0],e[1],[i[0],[n]],e[3]],r}var Xp=[function(n){return n[44][2]},[function(n){return n[44][2][0][0]},function(n,t){var r=be.a(t),e=t[44],i=t[44][2];return r[44]=[e[0],e[1],[[n],i[1]],e[3]],r},function(n,t,r){var e=be.a(r),i=r[44],o=r[44][2];return e[44]=[i[0],i[1],[[Ui(n,t,r[44][2][0][0])],o[1]],i[3]],e},function(n){return Vp(Hp(n[44][2][0][0],Wp(n)),n)}],[function(n){return n[44][2][1][0]},function(n,t){var r=be.a(t),e=t[44],i=t[44][2];return r[44]=[e[0],e[1],[i[0],[n]],e[3]],r},jp,function(n,t,r){return jp(hu(n,t,r[44][2][1][0]),r)},function(n,t){return jp(vu(n,t[44][2][1][0]),t)},function(n,t,r){return jp(Ui(n,t,r[44][2][1][0]),r)},function(n){return Vp(Gp(n[44][2][1][0],Wp(n)),n)},Du]],zp=r(4);function qp(n){return""===n?null:zp.b(n)}var Jp=[function(n){return""===n},qp,function(n){return n.map(function(n){return[zp.c(n[0]),zp.d(n[1]),n[2],n[3]]})},function(n){return n.map(function(n){return[zp.a(n[0]),qp(n[1]),n[2],n[3]]})},function(n){return n.map(function(n){return[zp.c(n[0]),zp.d(n[1]),n[2],n[3]]})},function(n){return n.map(function(n){return[zp.a(n[0]),qp(n[1]),n[2],n[3]]})}],$p=[zp.d,zp.b];var Kp=[function(n){return JSON.stringify(n)},function(n){return JSON.parse(n)}];function Zp(n){return n[29]}var Qp=Zp;function nd(n,t){return t[29]=n,t}var td=[function(n,t,r){var e=su[2]([n[0],n[1]],t,Qp(r));return[nd(e[0],r),e[1]]}];var rd=[function(n,t){return uu(n,Qp(t))}];var ed=[[function(n){return $p[0](e.a(Xp[1][0],n))},function(n){return $p[1](n)}],[function(n){return Kp[0](e.a(Xp[2][0],n))},function(n){return Kp[1](n)}]];function id(n){return ji(n[28])}function od(n,t,r){var i=new ImageData(new Uint8ClampedArray(n[0]),n[1],n[2]),o=id(r)[0];return 1!==o?0!==o?qo("_createImageBitmap",o):function(n,t){return createImageBitmap(n,t)}(i,{imageOrientation:!0===e.a(t,r)?"flipY":"none"}):function(n){return createImageBitmap(n)}(i)}function ud(n){return!1}function ad(n,t,r){var i=Ja(t).imguiData;if(Xi(i.fntData)||Xi(i.bitmapImageData))return M(t);var o=so(r),u=i.extendData,a=u.customControlData,c=e.a(ed[0][1],a.funcMap),s=u.skinData,f=e.a(ed[1][1],s.allSkinDataMap);return Un(function(n){return t},Br(od(zi(i.bitmapImageData),ud,o).then(function(n){var t=so(r),e=Ip(JSON.parse(zi(i.fntData)),Up(n,Zp(t)));return t[29]=e,Promise.resolve(co(r,t))})).concat(Br(jn(function(n,t){return Hi(t,n)},[],It(i.customTextureSourceDataArr.map(function(n){var t=n[2],r=n[1];return Br(od(n[0],ud,o).then(function(n){return Promise.resolve([n,r,t])}))}))).then(function(n){var t=so(r);return t[29]=Gp(f,Hp(c,Fp(io(t[4]),[i.canvasWidth,i.canvasHeight],Cp(n,t[29])))),Promise.resolve(co(r,t))}))))}function cd(n){return ao(io(n),!0,uo(io(n),2,n))}function sd(n,t,r){return Ii(function(n){var e=so(r);return e[4]=cd(e[4]),co(r,e),t})}function fd(n){return Ji(n)[0]}var hd=2147483647,vd=-2147483648;function ld(n){return n>hd?hd:n<vd?vd:Math.floor(n)}var pd=ld,dd=/^\#([0-9a-f]{6})$/i;function _d(n){return _e(de("convert16HexToRGBA","color should be #xxxxxx, but actual is "+String(n),"","",""))}function gd(n,t){return function(n,t,r){var e=r[3],i=t[3],o=t[2],u=t[1],a=t[0],c=0;if(void 0!==e){var s=e;if(s[0]===a&&s[1]===u&&s[2]===o&&s[3]===i)return r;c=1}else c=1;if(1===c)return n.clearColor(a,u,o,i),[r[0],r[1],r[2],[a,u,o,i],r[4],r[5],r[6],r[7],r[8]]}(io(t),function(n){var t=dd.exec(n);if(null!==t){var r=be.b(t,1);if(null==r)return _d(n);var i=pd(e.a(eo,r));return[(i>>>16&255)/255,(i>>>8&255)/255,(255&i)/255,1]}return _d(n)}(fd(n)),t)}function yd(n,t,r){return Ii(function(e){var i=so(r);return i[4]=gd(n,i[4]),co(r,i),t})}function md(n,t){var r=t.pop();return void 0!==r?r:n.createBuffer()}function Ed(n,t){return md(n,t[6])}function wd(n,t,r){var e=To(n,t);return void 0!==e?Hi(Re(e),r):r}function bd(n,t){return[t[0],t[1],t[2],t[3],t[4],wd(n,t[2],wd(n,t[1],wd(n,t[0],t[5]))),wd(n,t[3],t[6]),t[7]]}function Td(n,t){var r=To(n,t[4]);return void 0!==r?[t[0],t[1],t[2],t[3],t[4],t[5],t[6],Hi(Re(r),t[7])]:t}function Ad(n,t){return[uc(n,t[0]),uc(n,t[1]),uc(n,t[2]),uc(n,t[3]),t[4],t[5],t[6],t[7]]}function xd(n,t){return[t[0],t[1],t[2],t[3],uc(n,t[4]),t[5],t[6],t[7]]}function Sd(n,t,r){var e=t[1],i=t[0];return Pi(function(n,t){return e(t,i(t,n))},r,n)}function Dd(n,t){return Sd(n,[bd,Ad],t)}function Ld(n,t,r){return Ii(function(n){var e,i,o=so(r),u=Ja(t);return o[25]=(e=u.sourceInstanceNeedDisposeVboBufferArr,i=Dd(u.geometryNeedDisposeVboBufferArr,o[25]),Sd(e,[Td,xd],i)),co(r,o),t})}function Rd(n,t,r,i){return t[1].includes(t[0])?void 0!==i?i|e.a(r,n):e.a(r,n):i}function Pd(n,t,r){return Ii(function(e){var i=so(r),o=io(i[4]);return i[4]=function(n,t,r){var e=function(n,t,r){var e=r[1],i=t[3],o=t[2],u=t[1],a=t[0],c=0;if(void 0!==e){var s=e;if(s[0]===a&&s[1]===u&&s[2]===o&&s[3]===i)return r;c=1}else c=1;if(1===c)return n.colorMask(a,u,o,i),[r[0],[a,u,o,i],r[2],r[3],r[4],r[5],r[6],r[7],r[8]]}(n,[!0,!0,!0,!0],r);return n.clear(t),e}(o,function(n,t){var r=Rd(n,["STENCIL_BUFFER",t],function(n){return n.STENCIL_BUFFER_BIT},Rd(n,["DEPTH_BUFFER",t],function(n){return n.DEPTH_BUFFER_BIT},Rd(n,["COLOR_BUFFER",t],function(n){return n.COLOR_BUFFER_BIT},void 0)));return void 0!==r?r:_e(de("_getBit","should find bit","","","flags:"+String(t)))}(o,Ji(n)),i[4]),co(r,i),t})}function kd(n){return n<<0}function Md(n){return n<<0}function Nd(n){return 0+to(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Id(n){return n<<0}function Ud(n){return Nd(n)+to(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Cd(n){return n<<0}function Bd(n){return Ud(n)+to(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Fd(n){return n<<0}function Od(n){return Bd(n)+to(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}var Yd=Fo;function Gd(n){return 429496729!==n}function Hd(n,t){return[new Uint32Array(n,0,kd(t)),new Uint32Array(n,Nd(t),Md(t)),new Uint32Array(n,Ud(t),Id(t)),new Uint32Array(n,Bd(t),Cd(t)),new Uint32Array(n,Od(t),Fd(t))]}function Wd(n){return ji(n[1])}function Vd(n){return Wd(n)[1]}function jd(n){return ji(n[2])}function Xd(n){return ji(n[6])}function zd(n){var t=n[18];return void 0!==t?t[0]:[]}function qd(n){return Gi(0,function(n){return ji(n[3][3])}(n)-1|0)}function Jd(n){return ji(n[17])}var $d=To,Kd=mo;function Zd(n,t,r){var e=Jd(r);return Kd(n,t,e[18]),r}function Qd(n,t,r){var e=Jd(r);return Kd(n,t,e[19]),r}function n_(n,t,r){var e=Jd(r);return Kd(n,t,e[20]),r}function t_(n,t,r){var e=Jd(r);return Kd(n,t,e[21]),r}function r_(n,t,r){var e=Jd(r);return Kd(n,t,e[22]),r}function e_(n,t,r){var e=Jd(r);return Kd(n,t,e[23]),r}function i_(n,t,r){return Lt(function(n){var i=n[3];return Un(function(n){return e.c(t,i,n,r)},Br(od([n[0],n[1],n[2]],function(n){return function(n,t){return Ap(n,ji(Jd(t)[17]))}(i,n)},r)))},K(n))}var o_=function(n,t){return It([i_(n[0],Zd,t),i_(n[1],Qd,t),i_(n[2],n_,t),i_(n[3],t_,t),i_(n[4],r_,t),i_(n[5],e_,t)])};function u_(n){return ji(n[15])}var a_=function(n,t){return Lt(function(n){var r=n[3];return Un(function(n){return function(n,t,r){var e=u_(r);return Kd(n,t,e[8]),r}(r,n,t)},Br(od([n[0],n[1],n[2]],function(n){return function(n,t){return rl(n,ji(u_(t)[7]))}(r,n)},t)))},K(n))};function c_(n){return ji(n[16])}function s_(n,t){return Ii(function(r){var e=so(t),i=e[1],o=Ja(n).textureData,u=jd(i),a=function(n){return ji(n[3])}(i),c=function(n){return ji(n[4])}(i);return co(t,function(n,t,r,e){var i=r[0],o=Jv(n,i);e[15]=[Se(o[0]),Se(o[1]),Se(o[2]),Se(o[3]),Se(o[4]),Se(o[5]),Se(o[6]),Se(o[7]),wo(0),wo(0)];var u=Cl(n,i,r[1]);e[16]=[Se(u[0]),Se(u[1]),Se(u[2]),Se(u[3]),Se(u[4]),Se(u[5]),Se(u[6]),Se(u[7]),Se(u[8]),Se(u[9]),void 0,wo(0)];var a=yp(t,r[2]);return e[17]=[Se(a[0]),Se(a[1]),Se(a[2]),Se(a[3]),Se(a[4]),Se(a[5]),Se(a[6]),Se(a[7]),Se(a[8]),Se(a[9]),Se(a[10]),Se(a[11]),Se(a[12]),Se(a[13]),Se(a[14]),Se(a[15]),Se(a[16]),Se(a[17]),wo(0),wo(0),wo(0),wo(0),wo(0),wo(0),wo(0)],e}(o.sourceTextureBuffer,o.cubemapTextureData.buffer,[u,a,c],e))})}function f_(n,t){return Ii(function(r){var e=so(t),i=Ja(n).textureData.arrayBufferViewSourceTextureData.sourceMap;return co(t,function(n,t){var r=c_(t),e=be.a(t);return e[16]=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],n,r[11]],e}(i,e))})}function h_(n,t){return Ii(function(r){var e,i,o=so(t),u=Ja(n).textureData,a=u_(o),c=c_(o),s=Jd(o);o[15]=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],_v(io(o[4]),Gi(0,u.basicSourceTextureData.index-1|0),a[9])],o[16]=[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],_v(io(o[4]),(e=u.arrayBufferViewSourceTextureData.index,i=jd(o[1]),Gi(0,e-1|0).map(function(n){return yv(n,i)})),c[11])];var f=be.a(s);return o[17]=(f[24]=_v(io(o[4]),Gi(0,u.cubemapTextureData.index-1|0),s[24]),f),o[18]=[qd(o)],o})}function v_(n,t,r){var e=so(r),i=Ja(t).textureData;return Br(On(function(n){return co(r,n),0},Mi([s_(t,r),a_(i.basicSourceTextureData.needAddedImageDataArray,e),o_([i.cubemapTextureData.needAddedPXImageDataArray,i.cubemapTextureData.needAddedNXImageDataArray,i.cubemapTextureData.needAddedPYImageDataArray,i.cubemapTextureData.needAddedNYImageDataArray,i.cubemapTextureData.needAddedPZImageDataArray,i.cubemapTextureData.needAddedNZImageDataArray],e),f_(t,r),h_(t,r)])).then(function(n){return Promise.resolve(t)}))}function l_(n){return fi(function(t){return si(me("data##renderData exist","not"),function(t){return di(n.renderData)})},xi(Ai)),!0===n.renderData.isRender}function p_(n,t){return t.drawElements(n[0],n[3],n[1],0),0}function d_(n,t){return Dp(n,t[5][9])}function __(n,t,r){return d_(t,r)?n.UNSIGNED_INT:n.UNSIGNED_SHORT}function g_(n,t,r){return d_(t,r)?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT}function y_(n,t,r){return function(n,t,r){var e=r[4],i=e[1];return void 0!==i&&t===Re(i)?r:1===1?(e[1]=Se(t),n.useProgram(t),r):void 0}(n,function(n,t){return hi(function(n){return si(me("program exist","not"),function(t){return di(n)})},xi(Ai),bo(n,t[0]))}(t,r[4]),r)}function m_(n,t,r,e){var i=t[1],o=t[0],u=ac(o,i);if(u[0])return u[1];var a=r(n,t[2](o,e),e);return mo(o,a,i),a}function E_(n,t,r){var e=function(n,t){return md(n,t[5])}(n,r[1]);return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e}function w_(n,t,r,e){return function(n,t,r,e){var i=t[1],o=t[0],u=ac(o,i);if(u[0])return u[1];var a=r[0](n,r[1](o,e),e);return mo(o,a,i),a}(n,[t[0],t[1]],[E_,r],e)}function b_(n,t,r){var e=Ed(n,r[1]);return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),e}function T_(n,t,r){var e=Ed(n,r[1]);return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),e}function A_(n,t){var r=t[5];return kp(xc(n),r[3],r[8])}function x_(n,t){var r=t[5];return Mp(xc(n),r[4],r[8])}function S_(n,t){var r=Lp(xc(n),t[5][8]);return r[1]-r[0]|0}function D_(n,t){return t[n]}function L_(n,t){return[n[t],n[t+1|0],n[t+2|0]]}function R_(n,t,r){return r[t]=r[t]+n[0],r[t+1|0]=r[t+1|0]+n[1],r[t+2|0]=r[t+2|0]+n[2],r}function P_(n,t){return function(n){for(var t=n.length,r=0,e=n;;){var i=r;if(i>=t)return e;var o=e[i],u=e[i+1|0],a=e[i+2|0],c=Math.sqrt(o*o+u*u+a*a);0===c?(e[i]=0,e[i+1|0]=0,e[i+2|0]=0):(e[i]=o/c,e[i+1|0]=u/c,e[i+2|0]=a/c),r=i+3|0}}(function(r,e,i){for(;;){var o=i,u=e;if(u>=r)return o;var a=to(D_(u,t),3),c=to(D_(u+1|0,t),3),s=to(D_(u+2|0,t),3),f=L_(n,a),h=L_(n,c),v=ec(rc(0,L_(n,s),h),rc(0,f,h));i=R_(v,s,R_(v,c,R_(v,a,o))),e=u+3|0}}(function(n){return n.length}(t),0,new Float32Array(n.length)))}function k_(n,t){var r=t[5];return Pp(xc(n),r[0],r[5])}function M_(n,t){var r,e;return(r=n,e=t[5],Np(r,e[7]))?function(n,t){var r=t[5];return Pp(xc(n),r[2],r[7])}(n,t):function(n,t){var r=d_(n,t);return P_(k_(n,t),r?x_(n,t):A_(n,t))}(n,t)}function N_(n,t){return hi(function(n){return si(me("instance attribute send record exist","not"),function(t){return di(n)})},xi(Ai),bo(n,t[1]))}function I_(n,t){var r=t[5];return Pp(xc(n),r[1],r[6])}function U_(n){return[n[6],n[7],n[8],n[14],n[15],n[16],[[(t=n[24],t[0][0])]],n[19]];var t}function C_(n){return[n[3][10],n[0],n[14],n[15]]}function B_(n,t,r,e){var i=r[1],o=r[0],u=o[3],a=t[1],c=t[0],s=0;switch(n){case 0:return w_(c,[a,o[0]],i[0],e);case 1:return w_(c,[a,o[2]],i[2],e);case 2:return w_(c,[a,o[1]],i[1],e);case 3:return d_(a,e)?function(n,t,r,e){return m_(n,[t[0],t[1],r],T_,e)}(c,[a,u],i[4],e):function(n,t,r,e){return m_(n,[t[0],t[1],r],b_,e)}(c,[a,u],i[3],e);case 4:case 5:s=1}if(1===s)return _e(de("_getOrCreateBuffer","unknown buffer: "+String(n),"","",""))}var F_=function(n,t,r,e){var i,o,u=e[1],a=[[u[0],u[1],u[2],u[3]],[k_,I_,M_,A_,x_]],c=t[1],s=[n,c];return Di(function(t){var i=B_(t[2],s,a,e);return t[3](n,[t[1],t[0]],i,r)},(i=t[0],o=e[3],hi(function(n){return si(me("attribute send record exist","not"),function(t){return di(n)})},xi(Ai),bo(i,o[0])))),e};function O_(n,t,r,e){var i,o,u=t[1];return Di(function(t){return t[4](n,t[0],[t[1],t[2]],t[3](u,r))},(i=t[0],o=e[3],Rf(i,o[4]))),e}function Y_(n,t,r,e){var i=t[2],o=t[1],u=y_(n,i,e),a=C_(u),c=F_(n,[i,t[4]],a,u),s=U_(c);!function(n,t,r){var e=r[0],i=t[1];Di(function(t){var r=t[0];return Af(r)?t[2](n,r,t[1](i,e)):0},kf(t[0],r[1][3]))}(n,[i,t[0]],[s,c]);var f=c[3],h=f[11],v=0;if(void 0!==h){var l=h;if(l[0]===o&&l[1]===i)return c;v=1}else v=1;if(1===v)return f[11]=[o,i],O_(n,[i,o],U_(c),r(n,o,c))}function G_(n,t,r,e){return p_([t,__(n,r,e),g_(0,r,e),S_(r,e)],n)}function H_(n,t,r){return r}function W_(n,t,r){return Y_(n,t,H_,r)}var V_=ao;function j_(n,t,r){return hi(function(n){return si(me("shaderIndex should exist","not"),function(t){return Ti[3](n,429496729)})},xi(Ai),t(n,r))}function X_(n,t,r){switch(Mc(t,r[9][0])){case 0:return n.POINTS;case 1:return n.LINES;case 2:return n.LINE_LOOP;case 3:return n.LINE_STRIP;case 4:return n.TRIANGLES;case 5:return n.TRIANGLE_STRIP;case 6:return n.TRIANGLE_FAN}}function z_(n){return Fs((t=n[21],ji(t[0]))[0],n[18]);var t}var q_=bo;function J_(n,t,r,e){var i=Us(n,t);return hi(function(n){var t=n[1],r=n[0];return si(me("endIndex should <= objectInstanceTransformCollections->length","not"),function(n){return Ti[11](t,e.length)}),si(me("endIndex + 1 should >= startIndex","not"),function(n){return Ti[7](t+1|0,r)})},xi(Ai),[i,i+(r-1|0)|0])}function $_(n,t,r){for(var e=n[3],i=t,o=J_(n[0],n[1],n[2],e),u=o[0],a=o[1];u<=a;++u)i=r(i,Fo(u,e));return i}function K_(n,t){var r,e=t[17],i=q_(n,e[0]);return[i,[n,(r=t[21],ji(r[1])[0]),i,e[1]]]}function Z_(n,t,r,e){var i=t[4],o=t[3],u=t[2],a=r(n,[t[0],t[1],u,o,i],e);G_(n,X_(n,o,a),i,a);var c=kf(u,a[3]),s=X_(n,o,a),f=__(n,i,a),h=g_(0,i,a),v=S_(i,a),l=K_(t[5],a),p=U_(a);return function(n,t){for(var r=n[3],e=J_(n[0],n[1],n[2],r),i=e[0],o=e[1];i<=o;++i)t(Fo(i,r))}(l[1],function(t){return Di(function(r){var e=r[0];return Af(e)?r[2](n,e,r[1](t,p)):0},c),p_([s,f,h,v],n),0}),a}function Q_(n,t,r,e){var i=To(n,e);if(void 0!==i){var o=i;return o.length>=r?e:(o.push(t),e)}return mo(n,[t],e)}function ng(n,t,r){return Q_(n.length,n,t,r)}function tg(n,t){var r=To(n,t);if(void 0!==r){var e=r;return 0!==e.length?Le(e.pop()):void 0}}function rg(n,t,r){var e=function(n,t){return md(n,t[7])}(n,r[1]);return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.DYNAMIC_DRAW),e}function eg(n){return fi(function(t){return si(me("capacity should be a multiplier of 4","is "+String(n)),function(t){return Ti[0](n%4,0)})},xi(Ai)),n/4|0}function ig(n,t,r){var e=To(n,r);return void 0!==e?Re(e):t}function og(n,t,r){var e=t[1],i=n[1],o=To(i,e);if(void 0!==o)return Re(o);var u=rg(n[0],ig(i,n[2],t[0]),r);return mo(i,u,e),u}function ug(n,t,r,e){var i=r[1],o=ig(n,t,r[0]),u=To(n,i);if(void 0!==u)return Re(u);var a=(c=eg(o),s=e[2],tg(c,s[0]));if(void 0!==a)return Re(a);var c,s,f=new Float32Array(eg(o));return mo(n,f,i),f}function ag(n,t,r,e){for(var i=r[2],o=t[0],u=n[2],a=n[1],c=n[0],s=ig(a,n[3],i),f=!1;s<u;)s<<=1,f=!0;if(f){!function(n,t,r){mo(n,t,r)}(a,s,i),c.deleteBuffer(o);var h=rg(c,s,e);mo(a,h,r[0]);var v=new Float32Array(eg(s));return mo(a,v,r[1]),[h,v]}return[o,t[1]]}var cg=mo;function sg(n,t){return function(n,t){return 1===Co(Cs(n),t)}(n,t[2])}function fg(n,t,r){return[r[0],r[1],r[2],r[3],r[4],cg(n,t,r[5])]}function hg(n,t,r,e){var i=e[1],o=e[0];return Li(function(t,e){return function(n,t,r){var e=t[0],i=e[0],o=n[0];return o.vertexAttribPointer(i,e[1],o.FLOAT,!1,t[1],e[2](t[2])),n[1].vertexAttribDivisorANGLE(i,1),Gs(o,i,r[0]),r}(n,[t,r,e],o)},N_(t,i[3])),i}function vg(n,t,r,e){var i=t[2],o=i[2],u=i[1],a=i[0],c=t[1],s=c[0],f=t[0],h=f[0],v=n[1],l=og([h,v,s],[a,u],e),p=ug(v,s,[a,o],e),d=ag([h,v,to(c[4],c[1]),s],[l,p],[u,o,a],e),_=d[1],g=U_(e);return function(n,t,r,e,i){$_(n,i,function(n,i){return r(i,t,e,n)})}(c[3],_,r,g,r(n[0],_,g,0)),function(n,t,r,e){var i,o,u;return i=n[0],o=r[1],u=r[2],i.bindBuffer(i.ARRAY_BUFFER,u),i.bufferSubData(i.ARRAY_BUFFER,0,o),hg(n,t,r[0],[e[0],e[1]])}([h,f[1]],f[2],[c[2],_,d[0]],[C_(e),e])}function lg(n,t,r,e){var i=t[2],o=t[1],u=t[0],a=u[0],c=n[1];if(function(n,t){var r=To(n,t);return void 0!==r&&r}(c,e[17][5])){!function(n,t){n.bindBuffer(n.ARRAY_BUFFER,t)}(a,og([a,c,o[0]],[i[0],i[1]],e));var s=C_(e);return hg([a,u[1]],u[2],o[2],[s,e])}var f=vg(n,t,r,e),h=be.a(f);return h[17]=fg(c,!0,f[17]),h}function pg(n){var t=n[1],r=n[17];return[r[3],t[4],r[4]]}function dg(n,t,r,e){var i,o=(i=e[18],fi(function(n){return si(me("extensionInstancedArrays exist","not"),function(n){return _i(i[0])})},xi(Ai)),ji(i[0])),u=K_(r[0],e),a=0|u[0]+1;return[[n,o,t],[r[1],r[2],r[3],u[1],a],pg(e)]}function _g(n,t,r,e){var i=r[1],o=t[0],u=o[5],a=o[4],c=o[3],s=o[2],f=o[0],h=function(n,t,r,e){return r(n,t,e)}(n,[f,o[1],s,c,a],r[0],e),v=dg(n,s,[u,t[1],t[2],t[3]],h),l=v[0],p=l[1],d=l[0],_=sg(u,h[17])?lg([f,u],v,i,h):function(n,t,r,e){var i=be.a(e);return vg(n,t,r,(i[17]=fg(n[1],!1,e[17]),i))}([f,u],v,i,h);return function(n,t){t.drawElementsInstancedANGLE(n[0],n[3],n[1],0,n[4])}([X_(d,c,_),__(d,a,_),g_(0,a,_),S_(a,_),v[1][4]],p),function(n,t,r){return Di(function(n){return t.vertexAttribDivisorANGLE(n[0],0),0},N_(n,r[3])),r}(s,p,_)}function gg(n,t,r,e){return Xo([t,e],[Df(n,r),0],16)}function yg(n,t,r,e){return gg(n,t,r,e),e+16|0}function mg(n,t,r){return z_(r)?function(n,t,r){return _g(n,[t,4096,64,64],[W_,yg],r)}(n,t,r):function(n,t,r){return Z_(n,t,W_,r)}(n,t,r)}function Eg(n,t){var r=be.a(t),e=t[13];return r[13]=[e[0],n],r}function wg(n){return Eg(0,n)}function bg(n){fi(function(t){return si(me("activableTextureUnitArray should has data","not"),function(t){var r=n[13];return Ti[5](r[0].length,0)})},xi(Ai));var t=n[13],r=t[1],e=t[0];return hi(function(n){var t=n[1];return si(me("newActivedTextureUnitIndex <= activableTextureUnitArray.length","not"),function(n){return Ti[11](t,e.length)})},xi(Ai),[e[r],r+1|0])}function Tg(n,t){return zc(n,t[7][0])}function Ag(n,t,r){var e,i;return V_(n,(e=t,i=r[7][2],0===Co(rs(e),i)),r[20]),r}function xg(n){return n[23][2]}function Sg(n){return ji(n[20])}function Dg(n){return ji(n[22])}function Lg(n){return ji(n[1])}function Rg(n){return ji(n[2])}function Pg(n){return n[0][0][0]}function kg(n){return gv(jd(n[1]))}function Mg(n){return ji(n[12])}function Ng(n){return ji(Mg(n)[0])}function Ig(n){return ji(Mg(n)[2])}function Ug(n){return ji(Mg(n)[3])}function Cg(n){return ji(n[13])}function Bg(n){return ji(Cg(n)[0])}function Fg(n){return ji(Cg(n)[4])}function Og(n){return ji(Cg(n)[5])}function Yg(n,t,r){var e=r[0];return 1!==e?0!==e?_e(de("setFlipY","unknown browser","","","")):0:(n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t),0)}function Gg(n){return ji(n[21])}function Hg(n){return ji(n[2])}function Wg(n){return ji(n[0])}function Vg(n){return ji(n[1])}function jg(n){return ji(n[2])}function Xg(n){var t=n[1],r=n[3],e=n[4],i=n[5],o=n[6],u=n[8],a=n[11],c=n[24],s=n[25],f=n[26],h=n[32],v=ji(n[19]),l=Sg(n),p=Mg(n),d=Cg(n),_=function(n){return ji(n[14])}(n),g=Gg(n),y=Dg(n),m=u_(n),E=c_(n),w=Jd(n);c_(n);var b,T=function(n){return ji(n[27])}(n),A=id(n);return[[[Pg(n)]],s,c,u,o,[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9]],xg(n),[Ng(n),ji(p[1]),Ig(n),Ug(n)],[wo(0),wo(0),Bg(n),ji(d[1]),ji(d[2]),ji(d[3]),ji(d[4]),ji(d[5])],[_[0]],[ji(m[0]),ji(m[1]),ji(m[2]),ji(m[3]),ji(m[4]),ji(m[5]),ji(m[6]),ji(m[7]),m[8],m[9],Yg],[ji(E[0]),ji(E[1]),ji(E[2]),ji(E[3]),ji(E[4]),ji(E[5]),ji(E[6]),ji(E[7]),ji(E[8]),ji(E[9]),ji(E[10]),E[11],Yg,kg(n)],[ji(w[0]),ji(w[1]),ji(w[2]),ji(w[3]),ji(w[4]),ji(w[5]),ji(w[6]),ji(w[7]),ji(w[8]),ji(w[9]),ji(w[10]),ji(w[11]),ji(w[12]),ji(w[13]),ji(w[14]),ji(w[15]),ji(w[16]),ji(w[17]),w[18],w[19],w[20],w[21],w[22],w[23],w[24],Yg],[zd(n),0],[g[0],g[3],g[4],Hg(g),(b=g,ji(b[1]))],[y[0],y[3],y[4],y[5],y[6],y[7],y[8],Rg(y),Lg(y)],[v[0],v[4],v[5]],[Wg(a),Vg(a),jg(a),a[3],a[4],a[5]],r,f,e,[t[0],[Vd(t)]],[T[0]],[A[0]],h,i]}function zg(n,t){var r=function(n){return n[23][0]}(t);if(void 0!==r){var e=r;return function(n,t,r){var e=t[5],i=t[4],o=t[3],u=t[2],a=t[1];Pi(function(t,r){var c=wg(t),s=Yd(r,a),f=Yd(r,u),h=j_(f,Tg,c),v=Yd(r,o),l=Yd(r,i),p=Yd(r,e),d=Ag(n,f,c);if(Gd(p))return mg(n,[s,f,h,v,l,p],d);var _=W_(n,[s,f,h,v,l],d);return G_(n,X_(n,v,_),l,_),_},r,t[0])}(n,[e[0],e[1],e[2],e[3],e[4],e[5]],Xg(t)),t}return t}function qg(n,t,r){return Ii(function(n){var e=so(r);if(l_(Ja(t))){var i=io(e[4]);return co(r,zg(i,e)),t}return t})}function Jg(n){return n[31][0]}function $g(n,t){var r=t[31];return t[31]=[n,r[1],r[2]],t}function Kg(n){return n[31][1]}function Zg(n,t){var r=t[31];return t[31]=[r[0],n,r[2]],t}function Qg(n){return n[31][2]}var ny=eu,ty=iu;function ry(n,t,r,e){return nd(Ma(n,t,r,Qp(e)),e)}function ey(n,t,r,e){return nd(Na(n,t,r,Qp(e)),e)}function iy(n,t,r){return nd(Ia(n,t,Qp(r)),r)}function oy(n,t){return nd(ny(n,Qp(t)),t)}function uy(n){return nd(ty(Qp(n)),n)}function ay(n,t){return function(n){return n.length>0}(n)?function(n,t){return Pi(function(n,t){return Op(t[3],t[1],t[2],t[0],n)},t,Jp[3](n))}(n,Yp(t)):t}function cy(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).imguiData,o=ay(i.execFuncDataArr,Zp(e));e[29]=o;var u=Xa(io(e[4]),i.ioData,function(n){return n[30][0]}(e),[Qp,nd],e);return co(r,u),t})}function sy(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).viewportData;return e[4]=function(n,t,r){var e=r[8],i=t[3],o=t[2],u=t[1],a=t[0],c=0;if(void 0!==e){var s=e;if(s[0]===a&&s[1]===u&&s[2]===o&&s[3]===i)return r;c=1}else c=1;if(1===c)return n.viewport(a,u,o,i),[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],[a,u,o,i]]}(io(e[4]),i,e[4]),co(r,e),t})}function fy(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.geometryData,u=o.buffer,a=o.indicesTypeMap,c=i.bufferData.geometryPointCount,s=i.bufferData.geometryCount;return co(r,function(n,t,r,e){var i=Sc(n,t[0],t[1]);return e[20]=[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],r],e}(u,[c,s],a,e)),t})}function hy(n,t,r){return Ii(function(n){var e=so(r),i=e[1],o=Ja(t).sourceInstanceData,u=function(n,t,r,e){var i=Bs(n,t,r),o=e[11];return e[11]=[o[0],Se(i[0]),Se(i[1]),o[3],o[4],o[5]],e}(o.buffer,Wd(i)[0],Vd(i),e),a=u[11];return u[11]=[o.objectInstanceTransformIndexMap,a[1],a[2],a[3],a[4],a[5]],co(r,u),t})}function vy(n,t){return ji(function(n,t){var r=t[1];return je(n,r)}(n,t))}function ly(n,t,r){return We(n,t,r[1])}function py(n,t,r,e){var i=t[1];fi(function(n){return si(me("unit should >= 0","is "+String(i)),function(n){return Ti[7](i,0)})},xi(Ai));var o=vv(r,e);return void 0!==o?(n.activeTexture(n.TEXTURE0+i|0),n.bindTexture(t[0],Re(o)),e):e}function dy(n,t,r,e){var i=r[0];switch(fi(function(n){return si(me("unit should >= 0","is "+String(t)),function(n){return Ti[7](t,0)})},xi(Ai)),r[1]){case 0:return function(n,t){var r=t[2],e=t[0];return py(e,[e.TEXTURE_2D,t[1]],n,r[10][9]),r}(i,[n,t,e]);case 1:return function(n,t){var r=t[2],e=t[0];return py(e,[e.TEXTURE_2D,t[1]],n,r[11][11]),r}(i,[n,t,e]);case 2:return function(n,t){var r=t[2],e=t[0];return py(e,[e.TEXTURE_CUBE_MAP,t[1]],n,r[12][24]),r}(i,[n,t,e])}}function _y(n){return n[11][13]}function gy(n){return n.width}function yy(n){return n.height}function my(n,t){switch(t){case 0:return n.CLAMP_TO_EDGE;case 1:return n.MIRRORED_REPEAT;case 2:return n.REPEAT}}function Ey(n,t){switch(t){case 0:return n.RGB;case 1:return n.RGBA;case 2:return n.ALPHA;case 3:return n.LUMINANCE;case 4:return n.LUMINANCE_ALPHA;case 5:return n.RGB_S3TC_DXT1;case 6:return n.RGBA_S3TC_DXT1;case 7:return n.RGBA_S3TC_DXT3;case 8:return n.RGBA_S3TC_DXT5}}function wy(n,t,r,e){return 1===e(n,r)}function by(n,t){switch(t){case 0:return n.NEAREST;case 1:return n.LINEAR;case 2:return n.NEAREST_MIPMAP_NEAREST;case 3:return n.LINEAR_MIPMAP_NEAREST;case 4:return n.NEAREST_MIPMAP_LINEAR;case 5:return n.LINEAR_MIPMAP_LINEAR}}function Ty(n){return 0==(n&(n-1|0))&&0!==n&&1!==n}function Ay(n,t){switch(n){case 0:case 2:case 4:return t.NEAREST;case 1:case 3:case 5:return t.LINEAR}}function xy(n){return n>=2}function Sy(n,t,r,i){var o,u,a=t[9],c=t[5],s=t[4],f=n[0],h=(o=t[0],u=t[1],!!Ty(o)&&Ty(u));return e.c(i[1],f,t[8],r[1]),f.pixelStorei(f.UNPACK_COLORSPACE_CONVERSION_WEBGL,f.NONE),function(n,t,r,e){var i=e[3],o=e[2];r?(n.texParameteri(t,n.TEXTURE_WRAP_S,e[0]),n.texParameteri(t,n.TEXTURE_WRAP_T,e[1]),n.texParameteri(t,n.TEXTURE_MAG_FILTER,by(n,o)),n.texParameteri(t,n.TEXTURE_MIN_FILTER,by(n,i))):(n.texParameteri(t,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_MAG_FILTER,Ay(o,n)),n.texParameteri(t,n.TEXTURE_MIN_FILTER,Ay(i,n)))}(f,a,h,[t[2],t[3],s,c]),e.c(i[0],f,[t[10],t[6],t[7]],n[2]),h&&(xy(s)||xy(c))&&f.generateMipmap(a),$v(n[1],0,r[0]),0}function Dy(n,t,r){var e=t[2],i=t[1],o=t[0];return Li(function(t,r){return function(n,t,r){return function(n,t){var r=t[3];return n.texImage2D(t[0],t[1],r,r,t[4],t[2]),0}(n,[t[0],0,r,t[1],t[2]])}(n,[o[r],i[r],e[r]],t)},r)}function Ly(n,t){var r=$d(n,t[0]),e=$d(n,t[1]),i=$d(n,t[2]),o=$d(n,t[3]),u=$d(n,t[4]),a=$d(n,t[5]);if(void 0!==r&&void 0!==e&&void 0!==i&&void 0!==o&&void 0!==u&&void 0!==a)return[Re(r),Re(e),Re(i),Re(o),Re(u),Re(a)]}function Ry(n,t,r){return Ey(n,xp(t,r))}function Py(n,t,r){return Tv(n,Sp(t,r))}function ky(n,t,r){var e=r[1],i=r[0];fi(function(n){return si(me("has all sources","not"),function(n){return vi(ui(Ly(t,[i[18],i[19],i[20],i[21],i[22],i[23]])))})},xi(Ai));var o=Ly(t,[i[18],i[19],i[20],i[21],i[22],i[23]]);if(void 0!==o){var u=o,a=u[5],c=u[4],s=u[3],f=u[2],h=u[1],v=u[0],l=function(n){fi(function(t){return si(me("all sources' size equal","not"),function(t){return Ti[0](Si(n.map(gy)).length,1),Ti[0](Si(n.map(yy)).length,1)}),si(me("source' width and height equal","not"),function(t){return Ti[0](Wi(Si(n.map(gy))),Wi(Si(n.map(yy))))})},xi(Ai));var t=Wi(n);return[gy(t),yy(t)]}([v,h,f,s,c,a]),p=my(n,mp(t,i[0])),d=my(n,Ep(t,i[1])),_=wp(t,i[2]),g=bp(t,i[3]),y=Ap(t,i[17]);return Sy([n,t,[v,h,f,s,c,a]],[l[0],l[1],p,d,_,g,[Ry(n,t,i[4]),Ry(n,t,i[5]),Ry(n,t,i[6]),Ry(n,t,i[7]),Ry(n,t,i[8]),Ry(n,t,i[9])],[Py(n,t,i[10]),Py(n,t,i[11]),Py(n,t,i[12]),Py(n,t,i[13]),Py(n,t,i[14]),Py(n,t,i[15])],y,n.TEXTURE_CUBE_MAP,[n.TEXTURE_CUBE_MAP_POSITIVE_X,n.TEXTURE_CUBE_MAP_NEGATIVE_X,n.TEXTURE_CUBE_MAP_POSITIVE_Y,n.TEXTURE_CUBE_MAP_NEGATIVE_Y,n.TEXTURE_CUBE_MAP_POSITIVE_Z,n.TEXTURE_CUBE_MAP_NEGATIVE_Z]],[i[16],e],[Dy,i[25]]),[i,e]}return[i,e]}var My=function(n,t,r){return function(n,t){var r=t[3];return n.texImage2D(t[0],t[1],r,r,t[4],t[2]),0}(n,[t[0],0,r,t[1],t[2]])};function Ny(n,t,r,e){return function(n,t,r){var e=r[1],i=r[0],o=t[3];return fi(function(n){return si(me("width/height shouldn't be 0","width is "+String(i)+"; height is "+String(e)),function(n){return Ti[3](i,0),Ti[3](e,0)})},xi(Ai)),n.texImage2D(t[0],t[1],o,i,e,0,o,t[4],t[2]),0}(n,[t[0],0,e,t[1],t[2]],r)}function Iy(n,t,r){var e,i,o=r[0],u=r[1],a=t[1],c=$d(t[0],o[10]);if(void 0!==c){var s=(e=a,i=o[8],Bo(Pl(e),i)),f=function(n,t){return Bo(Nl(n),t)}(a,o[9]),h=my(n,function(n,t){return Co(al(n),t)}(a,o[0])),v=my(n,function(n,t){return Co(fl(n),t)}(a,o[1])),l=function(n,t){return Co(ll(n),t)}(a,o[2]),p=function(n,t){return Co(_l(n),t)}(a,o[3]),d=Ey(n,function(n,t){return Co(ml(n),t)}(a,o[4])),_=Tv(n,function(n,t){return Co(bl(n),t)}(a,o[5])),g=function(n,t){return 1===Co(Dl(n),t)}(a,o[7]),y=n.TEXTURE_2D,m=[s,f];return Sy([n,a,Re(c)],[s,f,h,v,l,p,d,_,g,y,y],[o[6],u],[function(n,t,r){return function(n,t,r,e){return Ny(t,r,n,e)}(m,n,t,r)},o[12]]),[o,u]}return[o,u]}function Uy(n,t){var r=t[1],e=r[23],i=r[10];return function(n,t){return wy(n,0,t[6],tl)}(n,i)&&function(n,t,r){var e=r[0],i=r[1],o=t[1],u=$d(t[0],e[8]);if(void 0!==u){var a=Re(u),c=gy(a),s=yy(a),f=my(n,Kv(o,e[0])),h=my(n,Zv(o,e[1])),v=Qv(o,e[2]),l=nl(o,e[3]),p=Ey(n,el(o,e[4])),d=Tv(n,il(o,e[5])),_=rl(o,e[7]),g=n.TEXTURE_2D;return Sy([n,o,a],[c,s,f,h,v,l,p,d,_,g,g],[e[6],i],[My,e[10]]),[e,i]}}(t[0],[n,n],[i,e]),r}function Cy(n,t){var r=t[1],e=r[23],i=r[11],o=mv(n,_y(r));return function(n,t){return wy(n,Il(0),t[6],Bl)}(o,i)&&Iy(t[0],[n,o],[i,e]),r}function By(n,t){var r=t[1],e=r[23],i=r[12];return function(n,t){return wy(n,_p(0),t[16],Tp)}(n,i)&&ky(t[0],n,[i,e]),r}function Fy(n,t,r){var e=t[0];switch(t[1]){case 0:return Uy(e,[n,r]);case 1:return Cy(e,[n,r]);case 2:return By(e,[n,r])}}function Oy(n,t,r,e){return Di(function(t){var e=t[4],i=t[3],o=t[2],u=t[1];return Af(o)?"u_skyboxVMatrix"===u?e(n,o,i(r)):e(n,t[0],[u,o],i(r)):0},function(n,t){return Rf(n,t[9])}(t,e[3])),e}function Yy(n,t,r,e){if(void 0!==t&&void 0!==r){n.TEXTURE_CUBE_MAP;var i=function(n,t,r){var e=bg(r);return Fy(n,[t,2],dy(n,e[0],[t,2],Eg(e[1],r)))}(n,t,e),o=vy("skybox",i[25]);return function(n,t){var r=uo(n,2,oo(n,n.LESS,t[20])),e=be.a(t);return e[20]=r,e}(n,function(n,t,r,e){var i=r[1],o=C_(e);return F_(n,[t,i],o,e),Oy(n,t,U_(e),e),G_(n,n.TRIANGLES,i,e),e}(n,o,r,y_(n,o,function(n,t){var r=uo(n,3,oo(n,n.LEQUAL,t[20])),e=be.a(t);return e[20]=r,e}(n,i))))}return e}function Gy(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t);if(l_(i)){var o=i.renderData.skyboxData,u=o.cubemapTextureOpt,a=o.renderSkyboxGameObjectDataOpt;return Yy(io(e[4]),u,a,Xg(e)),co(r,e),t}return t})}function Hy(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).renderData.camera;return e[23][2]=null==i?void 0:[i.vMatrix,i.pMatrix,i.position],co(r,e),t})}function Wy(n,t,r){return Ii(function(n){var e=so(r),i=function(n,t){var r=t[31];return t[31]=[r[0],r[1],n],t}(Ja(t).customData,e);return co(r,i),t})}function Vy(n,t){return tr(function(t){return t.data.operateType===fd(n)},An("message",t))}function jy(n,t){return Un(function(n){return Se(n)},Vy(n,t))}function Xy(n,t,r){return jy(n,e.a(Ee,0))}function zy(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.transformData.buffer,u=i.bufferData.transformCount;return co(r,function(n,t,r){var e=zo(n,t);return r[19]=[e[0],e[1],e[2],e[3],wo(0),wo(0)],r}(o,u,e)),t})}function qy(n,t,r){return Ii(function(n){var e=so(r);return Ja(t),co(r,e),t})}function Jy(n,t,r){return jy(n,e.a(Ee,0))}function $y(n,t,r){return Ii(function(n){var r=Ja(t);return function(n,t){n[1]=t}(Ai,r.isDebug),t})}function Ky(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.gpuData,u=i.memoryData,a=i.instanceBufferData;return e[1]=[[o.useHardwareInstance],[a.sourceInstanceCount,a.objectInstanceCountPerSourceInstance],i.bufferData.basicSourceTextureCount,i.bufferData.arrayBufferViewSourceTextureCount,i.bufferData.cubemapTextureCount,i.bufferData.directionLightCount,i.bufferData.pointLightCount,[u.maxBigTypeArrayPoolSize]],co(r,e),t})}function Zy(n,t,r){return Ii(function(n){var e=so(r),i=e[1],o=Ja(t).pointLightData,u=o.buffer,a=Xd(i);return co(r,function(n,t){var r=Dg(t);return t[22]=[r[0],r[1],n.renderLightArr,r[3],r[4],r[5],r[6],r[7],r[8]],t}(o,function(n,t,r,e){var i=jc(n,t);return e[22]=[r,void 0,void 0,i[0],i[1],i[2],i[3],i[4],i[5]],e}(u,a,o.index,e))),t})}function Qy(n,t,r){return Ii(function(n){var e=so(r);return e[7][0]=function(n,t){var r=mh("highp_fragment",t)[0],e=n[2];if(void 0===e)return r;switch(e){case 0:return mh("highp_fragment",t)[0];case 1:return mh("mediump_fragment",t)[0];case 2:return mh("lowp_fragment",t)[0]}}(e[3],e[10]),co(r,e),t})}function nm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).renderData.geometryData.indicesTypeMap,o=Sg(e);return e[20]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],i],co(r,e),t})}function tm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).renderData.sourceInstance,o=e[11];return e[11]=[i.objectInstanceTransformIndexMap,o[1],o[2],o[3],o[4],o[5]],co(r,e),t})}function rm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.basicMaterialData;e[12]=[void 0,void 0,void 0,void 0,o.index,o.disposedIndexArray,o.isSourceInstanceMap];var u=i.lightMaterialData;return e[13]=[void 0,void 0,void 0,void 0,void 0,void 0,u.index,u.disposedIndexArray,u.isSourceInstanceMap],co(r,e),t})}function em(n,t,r){return mo(n,t,r[8][0]),r}function im(n,t,r){return mo(n,t,r[8][1]),r}function om(n,t,r,i){var o=t[1],u=t[0],a=n[0];if(as(u)){var c=bg(i),s=c[0];return Fy(a,[u,o],dy(a,s,[u,o],Eg(c[1],e.c(r,n[1],s,i))))}return i}function um(n,t,r){var e=r[8],i=xs(t,e[6]),o=xs(t,e[7]),u=_y(r);return om([n,t],[o,Ev(o,u)],im,om([n,t],[i,Ev(i,u)],em,r))}function am(n,t,r){return Y_(n,t,um,r)}function cm(n,t,r,e){return gg(n,t,r,e),Xo([t,e+16|0],[Lf(n,r),0],9),9+(e+16|0)|0}function sm(n,t,r){return z_(r)?function(n,t,r){return _g(n,[t,6400,112,100],[am,cm],r)}(n,t,r):function(n,t,r){return Z_(n,t,am,r)}(n,t,r)}function fm(n,t){return zc(n,t[8][2])}function hm(n,t){var r=function(n){return n[23][1]}(t);if(void 0!==r){var e=r;return function(n,t,r){var e=t[5],i=t[4],o=t[3],u=t[2],a=t[1];Pi(function(t,r){var c=wg(t),s=Yd(r,a),f=Yd(r,u),h=j_(f,fm,c),v=Yd(r,o),l=Yd(r,i),p=Yd(r,e);if(Gd(p))return sm(n,[s,f,h,v,l,p],c);var d=am(n,[s,f,h,v,l],c);return G_(n,X_(n,v,d),l,d),d},r,t[0])}(n,[e[0],e[1],e[2],e[3],e[4],e[5]],Xg(t)),t}return t}function vm(n,t,r){return Ii(function(n){var e=so(r);if(l_(Ja(t))){var i=io(e[4]);return co(r,hm(i,e)),t}return t})}function lm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.meshRendererData.buffer,u=i.bufferData.meshRendererCount;return co(r,function(n,t,r){var e=kc(n,t);return r[14]=[e[0],e[1]],r}(o,u,e)),t})}function pm(n,t,r){return jy(n,e.a(Ee,0))}function dm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).pointLightData,o=Dg(e);return e[22]=[i.index,i.positionMap,i.renderLightArr,o[3],o[4],o[5],o[6],o[7],o[8]],co(r,e),t})}function _m(n){return Fs((t=n[1],ji(t[0]))[0],n[3]);var t}function gm(n,t,r){return e.c(n[1],io(r[4]),[t,_m(r)],e.a(n[0],r)),r}function ym(n){return ji(n[2])}function mm(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10],a=Mg(n);return[[a[4],a[5],Ng(n)],ym(n),t,r,e,i,o,u]}function Em(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.basicMaterialData,u=i.bufferData.basicMaterialCount;return co(r,gm([mm,Yh],Mg(e)[6],function(n,t,r){var e=us(n,t),i=Mg(r);return r[12]=[Se(e[0]),Se(e[1]),Se(e[2]),Se(e[3]),i[4],i[5],i[6]],r}(o.buffer,u,e))),t})}function wm(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10],a=Gg(n),c=Dg(n),s=Cg(n);return[[s[6],s[7],Bg(n),Fg(n),Og(n)],[a[0],Hg(a)],[c[0],Rg(c)],ym(n),t,r,e,i,o,u]}function bm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t),o=i.lightMaterialData,u=i.bufferData.lightMaterialCount;return co(r,gm([wm,hv],Cg(e)[8],function(n,t,r){var e=ws(n,t),i=Cg(r);return r[13]=[Se(e[0]),Se(e[1]),Se(e[2]),Se(e[3]),Se(e[4]),Se(e[5]),i[6],i[7],i[8]],r}(o.buffer,u,e))),t})}function Tm(n,t,r){return Ii(function(n){var e=so(r),i=e[1],o=Ja(t).directionLightData,u=o.buffer,a=Xd(i);return co(r,function(n,t){var r=Gg(t);return t[21]=[r[0],r[1],n.renderLightArr,r[3],r[4]],t}(o,function(n,t,r,e){var i=ks(n,t);return e[21]=[r,void 0,void 0,i[0],i[1]],e}(u,a,o.index,e))),t})}function Am(n,t,r){return Ii(function(n){var e=so(r),i=function(n,t){var r=be.a(t);return r[0]=[[n]],r}(Ja(t).ambientLightData.color,e);return co(r,i),t})}function xm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).renderConfigData;return e[2]=function(n){return[n[0],n[1]]}([JSON.parse(i.shaders),JSON.parse(i.shaderLibs)]),co(r,e),t})}function Sm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).workerDetectData;return e[27]=[i.isUseWorker],co(r,e),t})}function Dm(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).browserDetectData;return e[28]=[i.browser],co(r,e),t})}function Lm(n){return _e(de("getHandle","unknown handle name: "+String(n),"","",""))}function Rm(n,t){var r,e,i,o,u,a,c=t[5],s=xf(n,c[0],c[1]);return r=[1.01,1.01,1.01],e=s,i=ic(),o=r[2],u=r[1],a=r[0],i[0]=e[0]*a,i[1]=e[1]*a,i[2]=e[2]*a,i[3]=e[3]*a,i[4]=e[4]*u,i[5]=e[5]*u,i[6]=e[6]*u,i[7]=e[7]*u,i[8]=e[8]*o,i[9]=e[9]*o,i[10]=e[10]*o,i[11]=e[11]*o,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function Pm(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Xi(r)?t:Pi(function(n,t){var r=t[3],a=t[2],c=t[1],s=t[0];switch(r){case"camera":return Ff([c,Ef(o,s,i,u),s,a,e],n);case"expand_model":return function(n,t){var r=n[0];return"mMatrix"===r?Pf([n[1],n[3]],t,Rm):_e(de("addModelSendData","unknow field:"+String(r),"","",""))}([c,Ef(o,s,i,u),s,a,e],n);case"model":return function(n,t){var r=n[0];return"mMatrix"===r?Pf([n[1],n[3]],t,Df):_e(de("addModelSendData","unknow field:"+String(r),"","",""))}([c,Ef(o,s,i,u),s,a,e],n);case"no_material_shader":return function(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0];switch(u){case"outlineExpand":return nh([r,i,o],t,[Qf,Zs(e)]);case"rotationGizmoForEditor":var a=0;switch(i){case"u_alpha":case"u_cameraPosInLocalCoordSystem":case"u_color":a=1;break;default:throw[Ze.f,["HandleNoMaterialShaderUniformConfigDataService.re",69,4]]}if(1===a)return nh([r,i,o],t,[-1,Zs(e)]);break;case"skyboxCubeMap":return nh([r,i,o],t,[Zf,Zs(e)]);case"skyboxVMatrix":return nh([r,i,o],t,[Kf,Ks(e)]);default:return _e(de("addSendData","unknow field:"+String(u),"","",""))}}([c,Ef(o,s,i,u),s,a,e],n);default:return _e(de("_readUniforms","unknow from:"+String(r),"","",""))}},t,zi(r))}function km(n,t,r,e){return rh(n,[t,r],Pm,[e[0],e[1]])}function Mm(n,t,r){var e=n[2],i=n[1],o=n[0];return Xi(r)?t:Pi(function(n,t){var r=t[2],u=t[1],a=t[0];if(!Xi(a)&&!Xi(r)){var c=zi(a),s=zi(r);return function(n,t){return Hi([mf(n[1],n[2],n[5],n[0]),Ys(n[4]),n[3],ch],t)}([o,i,c,u,s,e],n)}return function(n,t){return Hi([0,0,n,ah],t)}(u,n)},t,zi(r))}function Nm(n,t,r,e){return Pi(function(n,i){var o=i[2];if(Xi(o))return n;var u=zi(o);return Mm([t,r,e],n,u[1])},[],n)}function Im(n,t,r,e){return mo(n,e,r[0]),r}function Um(n,t){var r=t[1],e=n[1],i=n[0],o=tf(r);ly(n[2],o,r);var u=Rh(e,Lm,[t[3],t[6]]),a=function(n,t,r,e){return cf(r[0],r[1],n,sf(t,e,n.createProgram()))}(i,o,[u[0],u[1]],t[2]);return function(n,t,r){eh(n,[t[0],t[1],t[2]],km,r)}(i,[a,o,e],function(n,t,r){var e=r[1],i=n[1],o=$f(wf(i,e));return[Im(i,0,r[0],Nm(t,n[0],n[2],o)),bf(i,o,e)]}([i,o,a],e,[t[4],t[5]])),o}function Cm(n,t){return Vi(t,n,function(t){return t[0]===n})}function Bm(n,t,r){var e=t[0],i=n[0];if("group"===i)return function(n,t,r,e){return e.concat(Vi(n,t,function(n){return n[0]===t})[1].map(function(n){return Cm(n,r)}))}(n[1],n[2],e,r);return pe(function(n){return le("shaderLibs",e)},xi(Ai)),_e(de("_getShaderLibDataArrByType","unknown type_:"+String(i),"","",""))}function Fm(n,t){var r=n[2],e=n[0][2];return Pi(function(n,i){var o=i[1],u=i[0];return Xi(u)?Hi(Cm(o,r),n):Bm([zi(u),e,o],[r,t],n)},[],n[1])}var Om=function(n,t){var r=t[0],e=rf(r),i=ef(r);return Pi(function(t,r){var o=r[0];return ly(o,Um([n,Fm([e,r[1],i],t),o],t),t[1]),t},t,e[4])};function Ym(n,t,r){return Ii(function(n){var e=so(r);return e[4]=cd(e[4]),Om(io(e[4]),function(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10];return[ym(n),t,r,e,i,o,u]}(e)),co(r,e),t})}function Gm(n,t){return Ii(function(r){var e=so(t),i=Ja(n).initData.textureData;return co(t,function(n,t){var r=c_(t),e=ji(r[10]);Pi(function(n,t){return Kd(t[0],t[1],n)},e,n);var i=be.a(t);return i[16]=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],e,r[11]],i}(i.arrayBufferViewSourceTextureData.needAddedSourceArray,e))})}function Hm(n,t){return Ii(function(r){var e=so(t),i=Ja(n).initData.textureData,o=u_(e),u=c_(e),a=Jd(e);e[15]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],dv(io(e[4]),i.basicSourceTextureData.needInitedTextureIndexArray,o[9])],e[16]=[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],dv(io(e[4]),i.arrayBufferViewSourceTextureData.needInitedTextureIndexArray,u[11])];var c=be.a(a);return e[17]=(c[24]=dv(io(e[4]),i.cubemapTextureData.needInitedTextureIndexArray,a[24]),c),e})}function Wm(n,t,r){var e=so(r),i=Ja(t).initData.textureData;return Br(On(function(n){return co(r,n),0},Mi([a_(i.basicSourceTextureData.needAddedImageDataArray,e),o_([i.cubemapTextureData.needAddedPXImageDataArray,i.cubemapTextureData.needAddedNXImageDataArray,i.cubemapTextureData.needAddedPYImageDataArray,i.cubemapTextureData.needAddedNYImageDataArray,i.cubemapTextureData.needAddedPZImageDataArray,i.cubemapTextureData.needAddedNZImageDataArray],e),Gm(t,r),Hm(t,r)])).then(function(n){return Promise.resolve(t)}))}function Vm(n,t,r){return Ii(function(i){var o=so(r);return we({operateType:fd(n),customData:Kg(o)},e.a(Ee,0)),t})}function jm(n,t,r,e){var i=To(n,r);return void 0!==i&&ng(Re(i),t,e[0]),uc(n,r)}var Xm=uc,zm=uc;function qm(n){return(t=n,ji(t[7]))[0];var t}function Jm(n,t,r){return Ii(function(n){var e=so(r),i=e[1],o=e[11],u=e[24],a=Ja(t),c=Pi(function(n,t){return[jm(t,qm(i),n[0],u),Xm(t,n[1]),zm(t,n[2])]},[o[4],o[3],o[5]],a.sourceInstanceNeedDisposeVboBufferArr);return e[11]=[o[0],o[1],o[2],c[1],c[0],c[2]],co(r,e),t})}function $m(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t).directionLightData,o=Gg(e);return e[21]=[i.index,i.directionMap,i.renderLightArr,o[3],o[4]],co(r,e),t})}function Km(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t);i.initData.materialData;var o=i.initData.materialData.basicMaterialData,u=i.initData.materialData.lightMaterialData,a=io(e[4]),c=_m(e);return co(r,function(n,t,r,e){return Cg(e),Pi(function(t,e){return fv(n,[e[0],e[1],r],t)},wm(e),t.materialDataForWorkerInit),e}(a,u,c,function(n,t,r,e){return Mg(e),Pi(function(t,e){return Oh(n,[e[0],e[1],r],t)},mm(e),t.materialDataForWorkerInit),e}(a,o,c,e))),t})}function Zm(n,t,r){return Ii(function(r){return we({operateType:fd(n)},e.a(Ee,0)),t})}var Qm=Zm,nE=Zm;function tE(n,t){return r=t[3],Do(function(t,r,e){var i=y_(n,e,t);return Pi(function(t,r){var e=r[0];return Af(e)&&r[2](n,e,r[1](t)),t},U_(i),r),i},t,r[5]);var r}function rE(n,t){return r=t[3],Do(function(t,r,e){var i=y_(n,e,t);return Pi(function(t,r){return r[4](n,r[0],[r[1],r[2]],r[3](t)),t},U_(i),r),i},t,r[6]);var r}function eE(n,t){return r=t[3],Do(function(t,r,e){var i=y_(n,e,t);return Pi(function(t,r){return r[3](n,[r[0],r[1],r[2]],t),t},C_(i),r),i},t,r[7]);var r}function iE(n){if(!ui(n[6]))return n;var t=io(n[20]);return eE(t,rE(t,tE(t,n)))}function oE(n,t,r){return Ii(function(n){var e=so(r);return l_(Ja(t))?(iE(Xg(e)),co(r,e),t):t})}function uE(n,t,r){return Ii(function(n){var e,i=so(r);return i[8]=[(e=i[8])[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],void 0,void 0],co(r,i),t})}var aE=Zm;function cE(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t);if(l_(i)){var o=i.renderData.basic,u=Hd(o.buffer,o.bufferCount);return e[23][0]=[o.renderIndexArray,u[0],u[1],u[2],u[3],u[4]],co(r,e),t}return t})}function sE(n,t,r){return Ii(function(n){var e=so(r),i=Ja(t);if(l_(i)){var o=i.renderData.light,u=Hd(o.buffer,o.bufferCount);return e[23][1]=[o.renderIndexArray,u[0],u[1],u[2],u[3],u[4]],co(r,e),t}return t})}function fE(n){return ro([["send_finish_send_job_data",nE],[["get_init_render_data",pm],[["get_isDebug_data",$y],[["get_renderConfig_data",xm],[["get_setting_data",Ky],[["get_material_data",rm],[["get_browserDetect_data",Dm],[["get_workerDetect_data",Sm],[["preget_glslData",Qy],[["create_gl",$a],[["set_viewport",sy],[["detect_gl",tc],[["preget_glslData",Qy],[["init_state",sd],[["init_transform",zy],[["init_instance",hy],[["init_geometry",fy],[["init_meshRenderer",lm],[["init_no_material_shader",Ym],[["init_basic_material",Em],[["init_direction_light",Tm],[["init_point_light",Zy],[["init_light_material",bm],[["init_texture",v_],[["init_imgui",ad],[["send_finish_init_render_data",aE],[["get_render_data",Xy],[["get_instance_data",tm],[["get_geometry_data",nm],[["get_ambient_light_data",Am],[["get_direction_light_data",$m],[["get_point_light_data",dm],[["init_material_for_render",Km],[["init_texture_for_render",Wm],[["clear_color",yd],[["clear_buffer",Pd],[["clear_last_send_component",uE],[["create_basic_render_object_typeArray",cE],[["create_light_render_object_typeArray",sE],[["get_custom_data",Wy],[["get_camera_data",Hy],[["send_uniform_shader_data",oE],[["render_skybox",Gy],[["render_basic",qg],[["front_render_light",vm],[["render_imgui",cy],[["commit",fo],[["send_finish_render_data",Vm],[["get_dispose_data",Jy],[["dispose_vbo",Ld],[["dispose_sourceInstance",Jm],[["dispose_texture",qy],[["send_finish_dispose_data",Qm],0]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]])}function hE(n,t){var r=je(n,t);return void 0!==r?Re(r):function(n,t){return _e(de("get no job","can't find job handle function whose job name is "+String(n),"","make sure that the job name defined in config record be correctly","jobHandleMap:"+ce(t)+"\nname: "+String(n)))}(n,t)}var vE=hE;function lE(n,t,r){return ye(ge("render worker error",String(n)+"","","","fileName:"+String(t)+"\n        lineno:"+String(r)))}function pE(n){return co(Qi,[[[[0,0,0]]],[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],void 0,[void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],[0,Ve(0),Ve(0),wo(0)],[wo(0),void 0],[void 0],[wo(0),wo(0),wo(0),wo(0),wo(0),wo(0),wo(0),wo(0),wo(0),wo(0),[],void 0,void 0],[wo(0),wo(0)],[We("webgl1_no_basic_map_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nvec4 totalColor = vec4(u_color, u_alpha);\n"),We("webgl1_basic_end_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(totalColor.rgb, totalColor.a);\n"),We("webgl1_basic_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),We("common_define",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),We("common_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),We("common_function",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n// mat2 transpose(mat2 m) {\n//   return mat2(  m[0][0], m[1][0],   // new col 0\n//                 m[0][1], m[1][1]    // new col 1\n//              );\n//   }\n\n// mat3 transpose(mat3 m) {\n//   return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n//                 m[0][1], m[1][1], m[2][1],  // new col 1\n//                 m[0][2], m[1][2], m[2][2]   // new col 1\n//              );\n//   }\n\n//bool isRenderArrayEmpty(int isRenderArrayEmpty){\n//  return isRenderArrayEmpty == 1;\n//}\n"],"\n\n"),We("common_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n// mat2 transpose(mat2 m) {\n//   return mat2(  m[0][0], m[1][0],   // new col 0\n//                 m[0][1], m[1][1]    // new col 1\n//              );\n//   }\n\n// mat3 transpose(mat3 m) {\n//   return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n//                 m[0][1], m[1][1], m[2][1],  // new col 1\n//                 m[0][2], m[1][2], m[2][2]   // new col 1\n//              );\n//   }\n\n//bool isRenderArrayEmpty(int isRenderArrayEmpty){\n//  return isRenderArrayEmpty == 1;\n//}\n"],"\n\n"),We("highp_fragment",Eh(["\nprecision highp float;\nprecision highp int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),We("lowp_fragment",Eh(["\nprecision lowp float;\nprecision lowp int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),We("mediump_fragment",Eh(["\nprecision mediump float;\nprecision mediump int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),We("webgl1_setPos_mvp",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),We("webgl1_rotation_gizmo_circle_for_editor_fragment",Eh(["\n\n","\n\n"],"\nvarying vec3 v_position;\n",["\nbool isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(vec3 vertexPos, vec3 cameraPosInLocalCoordSystem);\n","\nbool isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(vec3 vertexPos, vec3 cameraPosInLocalCoordSystem){\nreturn dot(\nnormalize(-vertexPos),\ncameraPosInLocalCoordSystem - vertexPos\n) >= 0.0;\n}\n"],"\nif(isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(v_position, u_cameraPosInLocalCoordSystem)){\n    discard;\n}\n\ngl_FragColor = vec4(u_color, u_alpha);\n"),We("webgl1_rotation_gizmo_circle_for_editor_vertex",Eh(["\n\n","\n\n"],"\nvarying vec3 v_position;\n",["\n\n","\n\n"],"\nv_position = a_position;\n\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),We("modelMatrix_batch_instance_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = u_mMatrix;\n"),We("normalMatrix_batch_instance_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = u_normalMatrix;\n"),We("modelMatrix_hardware_instance_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = mat4(a_mVec4_0, a_mVec4_1, a_mVec4_2, a_mVec4_3);\n"),We("normalMatrix_hardware_instance_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = mat3(a_normalVec3_0, a_normalVec3_1, a_normalVec3_2);\n"),We("modelMatrix_noInstance_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = u_mMatrix;\n"),We("normalMatrix_noInstance_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = u_normalMatrix;\n"),We("webgl1_diffuse_map_fragment",Eh(["\n\n","\n\n"],"\nvarying vec2 v_diffuseMapTexCoord;\n",["\n\n","\nvec4 getMaterialDiffuse() {\n        vec4 texelColor = texture2D(u_diffuseMapSampler, v_diffuseMapTexCoord);\n\n        return vec4(texelColor.rgb * u_diffuse, texelColor.a);\n    }\n"],"\n\n"),We("webgl1_diffuse_map_vertex",Eh(["\n\n","\n\n"],"\nvarying vec2 v_diffuseMapTexCoord;\n",["\n\n","\n\n"],"\n//TODO optimize(combine, reduce compute numbers)\n    //TODO BasicTexture extract textureMatrix\n//    vec2 sourceTexCoord = a_texCoord * u_diffuseMapSourceRegion.zw + u_diffuseMapSourceRegion.xy;\n//    v_diffuseMapTexCoord = sourceTexCoord * u_diffuseMapRepeatRegion.zw + u_diffuseMapRepeatRegion.xy;\n\n    v_diffuseMapTexCoord = a_texCoord;\n"),We("webgl1_no_diffuse_map_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\nvec4 getMaterialDiffuse() {\n        return vec4(u_diffuse, 1.0);\n    }\n"],"\n\n"),We("webgl1_no_emission_map_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\nvec3 getMaterialEmission() {\n        return vec3(0.0);\n    }\n"],"\n\n"),We("webgl1_no_light_map_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\nvec3 getMaterialLight() {\n        return vec3(0.0);\n    }\n"],"\n\n"),We("webgl1_no_normal_map_fragment",Eh(["\n\n","\n\n"],"\nvarying vec3 v_normal;\n",["\nvec3 getNormal();\n","\nvec3 getNormal(){\n    return v_normal;\n}\n\n#if POINT_LIGHTS_COUNT > 0\nvec3 getPointLightDir(int index){\n    //workaround '[] : Index expression must be constant' error\n    for (int x = 0; x <= POINT_LIGHTS_COUNT; x++) {\n        if(x == index){\n            return getPointLightDirByLightPos(u_pointLights[x].position);\n        }\n    }\n    /*!\n    solve error in window7 chrome/firefox:\n    not all control paths return a value.\n    failed to create d3d shaders\n    */\n    return vec3(0.0);\n}\n#endif\n\n#if DIRECTION_LIGHTS_COUNT > 0\nvec3 getDirectionLightDir(int index){\n    //workaround '[] : Index expression must be constant' error\n    for (int x = 0; x <= DIRECTION_LIGHTS_COUNT; x++) {\n        if(x == index){\n            return getDirectionLightDir(u_directionLights[x].direction);\n        }\n    }\n\n    /*!\n    solve error in window7 chrome/firefox:\n    not all control paths return a value.\n    failed to create d3d shaders\n    */\n    return vec3(0.0);\n}\n#endif\n\n\nvec3 getViewDir(){\n    return normalize(u_cameraPos - v_worldPosition);\n}\n"],"\n\n"),We("webgl1_no_normal_map_vertex",Eh(["\n\n","\n\n"],"\nvarying vec3 v_normal;\n",["\n\n","\n\n"],"\nv_normal = normalize(normalMatrix * a_normal);\n"),We("webgl1_no_shadow_map_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getShadowVisibility() {\n        return 1.0;\n    }\n"],"\n\n"),We("webgl1_no_specular_map_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getSpecularStrength() {\n        return 1.0;\n    }\n"],"\n\n"),We("webgl1_specular_map_fragment",Eh(["\n\n","\n\n"],"\nvarying vec2 v_specularMapTexCoord;\n",["\n\n","\nfloat getSpecularStrength() {\n        return texture2D(u_specularMapSampler, v_specularMapTexCoord).r;\n    }\n"],"\n\n"),We("webgl1_specular_map_vertex",Eh(["\n\n","\n\n"],"\nvarying vec2 v_specularMapTexCoord;\n",["\n\n","\n\n"],"\nv_specularMapTexCoord = a_texCoord;\n"),We("webgl1_ambientLight_fragment",Eh(["\n\n","\n\n"],"\nuniform vec3 u_ambient;\n",["\n\n","\n\n"],"\n\n"),We("webgl1_frontLight_common_fragment",Eh(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),We("webgl1_frontLight_common_vertex",Eh(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),We("webgl1_frontLight_common",Eh(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),We("webgl1_frontLight_end_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = totalColor;\n"),We("webgl1_frontLight_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getBlinnShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\n        vec3 halfAngle = normalize(lightDir + viewDir);\n\n        float blinnTerm = dot(normal, halfAngle);\n\n        blinnTerm = clamp(blinnTerm, 0.0, 1.0);\n        blinnTerm = dotResultBetweenNormAndLight != 0.0 ? blinnTerm : 0.0;\n        blinnTerm = pow(blinnTerm, shininess);\n\n        return blinnTerm;\n}\n\n// float getPhongShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\n//         vec3 reflectDir = reflect(-lightDir, normal);\n//         float phongTerm = dot(viewDir, reflectDir);\n\n//         phongTerm = clamp(phongTerm, 0.0, 1.0);\n//         phongTerm = dotResultBetweenNormAndLight != 0.0 ? phongTerm : 0.0;\n//         phongTerm = pow(phongTerm, shininess);\n\n//         return phongTerm;\n// }\n\nvec3 calcLight(vec3 lightDir, vec3 color, float intensity, float attenuation, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        vec3 materialSpecular = u_specular;\n        vec3 materialEmission = getMaterialEmission();\n\n        float specularStrength = getSpecularStrength();\n\n        float dotResultBetweenNormAndLight = dot(normal, lightDir);\n        float diff = max(dotResultBetweenNormAndLight, 0.0);\n\n        vec3 emissionColor = materialEmission;\n\n\n\n        // if(u_lightModel == 3){\n        //     return emissionColor + ambientColor;\n        // }\n\n        vec3 diffuseColor = color * materialDiffuse.rgb * diff * intensity;\n\n        float spec = 0.0;\n\n        // if(u_lightModel == 2){\n        //         spec = getPhongShininess(u_shininess, normal, lightDir, viewDir, diff);\n        // }\n        // else if(u_lightModel == 1){\n        //         spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\n        // }\n\n        spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\n\n\n        vec3 specularColor = spec * materialSpecular * specularStrength * intensity;\n\n       return vec3(emissionColor + attenuation * (diffuseColor.rgb + specularColor));\n}\n\n\n\n\n#if POINT_LIGHTS_COUNT > 0\n        vec3 calcPointLight(vec3 lightDir, PointLight light, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        //lightDir is not normalize computing distance\n        float distance = length(lightDir);\n\n        float attenuation = 0.0;\n\n        if(distance < light.range)\n        {\n            attenuation = 1.0 / (light.constant + light.linear * distance + light.quadratic * (distance * distance));\n        }\n\n        lightDir = normalize(lightDir);\n\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir, materialDiffuse);\n}\n#endif\n\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\n        vec3 calcDirectionLight(vec3 lightDir, DirectionLight light, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        float attenuation = 1.0;\n\n        // lightDir = normalize(lightDir);\n\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir, materialDiffuse);\n}\n#endif\n\n\n\nvec4 calcTotalLight(vec3 norm, vec3 viewDir){\n    vec3 totalLight = vec3(0.0, 0.0, 0.0);\n\n    vec4 materialDiffuse = getMaterialDiffuse();\n\n    float alpha = materialDiffuse.a;\n    vec3 materialDiffuseRGB = materialDiffuse.rgb;\n\n\n    #if (DIRECTION_LIGHTS_COUNT == 0 && POINT_LIGHTS_COUNT == 0 )\n        return vec4(u_ambient * materialDiffuseRGB, alpha);\n    #endif\n\n\n    #if POINT_LIGHTS_COUNT > 0\n                for(int i = 0; i < POINT_LIGHTS_COUNT; i++){\n                totalLight += calcPointLight(getPointLightDir(i), u_pointLights[i], norm, viewDir, materialDiffuseRGB);\n        }\n    #endif\n\n    #if DIRECTION_LIGHTS_COUNT > 0\n                for(int i = 0; i < DIRECTION_LIGHTS_COUNT; i++){\n                totalLight += calcDirectionLight(getDirectionLightDir(i), u_directionLights[i], norm, viewDir, materialDiffuseRGB);\n        }\n    #endif\n\n        totalLight += u_ambient * materialDiffuseRGB;\n\n        return vec4(totalLight, alpha);\n}\n"],"\nvec3 normal = normalize(getNormal());\n\n// #ifdef BOTH_SIdE\n// normal = normal * (-1.0 + 2.0 * float(gl_FrontFacing));\n// #endif\n\nvec3 viewDir = normalize(getViewDir());\n\nvec4 totalColor = calcTotalLight(normal, viewDir);\n\n// totalColor.a *= u_opacity;\n\ntotalColor.rgb = totalColor.rgb * getShadowVisibility();\n"),We("webgl1_frontLight_setWorldPosition_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nv_worldPosition = vec3(mMatrix * vec4(a_position, 1.0));\n"),We("webgl1_frontLight_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * vec4(v_worldPosition, 1.0);\n"),We("webgl1_outline_expand_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(u_outlineColor, 1.0);\n"),We("webgl1_outline_expand_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nvec3 position = a_position.xyz + a_normal.xyz * 0.08;\n\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(position, 1.0);\n"),We("webgl1_outline_origin_fragment",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(1.0);\n"),We("webgl1_outline_origin_vertex",Eh(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),We("webgl1_skybox_fragment",Eh(["\n\n","\n\n"],"\nvarying vec3 v_texCoord;\n",["\n\n","\n\n"],"\ngl_FragColor = textureCube(u_skyboxCubeMapSampler, vec3(-v_texCoord.x, v_texCoord.y, v_texCoord.z));\n"),We("webgl1_skybox_vertex",Eh(["\n\n","\n\n"],"\nvarying vec3 v_texCoord;\n",["\n\n","\n\n"],"\nv_texCoord = a_position;\n\nvec4 pos = u_pMatrix * u_skyboxVMatrix * vec4(a_position, 1.0);\ngl_Position = pos.xyww;\n"),Ve(0)))))))))))))))))))))))))))))))))))))))))))))],[void 0,void 0,void 0,wo(0),wo(0),wo(0)],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[void 0,void 0,void 0],[wo(0),wo(0)],[wo(0),wo(0),wo(0),wo(0),wo(0),[],[],[]],[new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Float32Array([1,0,0,1,0,0,1,0,0]),[]],void 0,void 0,Bp(0),[{label:ry,image:ey,button:td[0],box:iy,beginGroup:oy,endGroup:uy,unsafeGetCustomControl:rd[0],getWonderImguiIMGUIRecord:Qp,setWonderImguiIMGUIRecord:nd,getCustomDataInRenderWorker:Jg,setCustomDataInRenderWorker:$g,getCustomDataFromMainWorkerToRenderWorker:Qg,getCustomDataFromRenderWorkerToMainWorker:Kg,setCustomDataFromRenderWorkerToMainWorker:Zg}],[-1,-1,-1],[[[1,1,1],[]]]]),0}Yn(Pt(function(n){return It((pE(),Zi(JSON.parse(n.data.pipelineJobs),JSON.parse(n.data.jobs),[fE,vE],Qi)))},tr(function(n){return"SEND_JOB_DATA"===n.data.operateType},An("message",e.a(Ee,0))))),r.d(t,"useThisToImportRenderWorkerSystem",function(){return _E}),r.d(t,"defineOnError",function(){return dE});var dE=function(n){onerror=(n,t,r)=>{lE(n,t,r)}};e.a(dE,0);var _E=lE}])});